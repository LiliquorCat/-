<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GKVP3QRX9Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GKVP3QRX9Y');
    </script>

    <!-- ç¦æ­¢ç§»åŠ¨ç«¯åŒæŒ‡æ”¾å¤§ -->
    <script>
    // ç¦æ­¢ç§»åŠ¨ç«¯åŒæŒ‡ç¼©æ”¾
    document.addEventListener('touchstart', function(event) {
        if (event.touches.length > 1) {
            event.preventDefault();
        }
    }, { passive: false });

    // ç¦æ­¢åŒæŒ‡ç¼©æ”¾
    document.addEventListener('gesturestart', function(event) {
        event.preventDefault();
    });

    document.addEventListener('gesturechange', function(event) {
        event.preventDefault();
    });

    document.addEventListener('gestureend', function(event) {
        event.preventDefault();
    });

    // ç¦æ­¢åŒå‡»ç¼©æ”¾
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimum-scale=1.0, viewport-fit=cover">
    <title>æµ·æ‹‰çš„é’±åŒ…</title>
    <!-- Open Graph å…ƒæ ‡ç­¾ - ç”¨äºQQåˆ†äº«æ˜¾ç¤º -->
    <meta property="og:title" content="æµ·æ‹‰çš„é’±åŒ…">
    <meta property="og:description" content="æ— æœŸè¿·é€”æ”’æŠ½è®¡ç®—å™¨&ç¤¼åŒ…æ€§ä»·æ¯”">
    <meta property="og:url" content="https://phi-khaki.vercel.app">
    <meta property="og:type" content="website">
    
    <!-- é’ˆå¯¹ QQ çš„é¢å¤–æ ‡ç­¾ -->
    <meta itemprop="name" content="æµ·æ‹‰çš„é’±åŒ…">
    <meta itemprop="description" content="æ— æœŸè¿·é€”æ”’æŠ½è®¡ç®—å™¨&ç¤¼åŒ…æ€§ä»·æ¯”">
    
    <!-- Twitter å¡ç‰‡ -->
    <meta name="twitter:title" content="æµ·æ‹‰çš„é’±åŒ…">
    <meta name="twitter:description" content="æ— æœŸè¿·é€”æ”’æŠ½è®¡ç®—å™¨&ç¤¼åŒ…æ€§ä»·æ¯”">
    <script src="https://unpkg.com/vue@3.4.21/dist/vue.global.js"></script>
    <style>
        /* ==================== é›ªç¢§å›¾æ ·å¼ - ä¸­æ–‡ç±»å ==================== */

        .resource-sprites {
            background-image: url('icons/Css-sprites.png');
            background-repeat: no-repeat;
            display: inline-block;
            vertical-align: middle;
        }

        /* å°ºå¯¸å˜ä½“ */
        .resource-sprites.æ ‡å‡†å°ºå¯¸ { width: 80px; height: 80px; }
        .resource-sprites.ä¸­ç­‰å°ºå¯¸ { width: 48px; height: 48px; background-size: 480px 480px; }
        .resource-sprites.å°å°ºå¯¸ { width: 32px; height: 32px; background-size: 480px 480px; }
        .resource-sprites.è¶…å°å°ºå¯¸ { width: 24px; height: 24px; background-size: 480px 480px; }
        .resource-sprites.å¾®å‹å°ºå¯¸ { width: 16px; height: 16px; background-size: 480px 480px; }

        /* ==================== å›¾æ ‡ä½ç½® - ä¸­æ–‡ç±»å ==================== */

        /* ç¬¬ä¸€è¡Œ */
        .sprite-å¼‚æ–¹æ™¶ { background-position: 0 0; }
        .sprite-ç’€ç’¨æ™¶æº { background-position: -80px 0; }
        .sprite-æœç´¢ä»¤ { background-position: -160px 0; }
        .sprite-é™å®šåˆ¸ { background-position: -240px 0; }
        .sprite-éƒ½å¸‚æœç´¢ä»¤ { background-position: -320px 0; }
        .sprite-ç»Ÿåˆåè¿æœç´¢ä»¤ { background-position: -400px 0; }

        /* ç¬¬äºŒè¡Œ */
        .sprite-åŒè½¨æœç´¢ä»¤ { background-position: 0 -80px; }
        .sprite-å¤šé¡¹åˆé‡‘ { background-position: -80px -80px; }
        .sprite-é»„ç¥¨ { background-position: -160px -80px; }
        .sprite-ç‹„æ–¯å¸ { background-position: -240px -80px; }
        .sprite-ç‹‚ä¹±ç²¾ç²¹ { background-position: -320px -80px; }
        .sprite-è¶…é˜¶ææ–™è¡¥ç»™ç®± { background-position: -400px -80px; }

        /* ç¬¬ä¸‰è¡Œ */
        .sprite-é«˜é˜¶ææ–™è¡¥ç»™ç®± { background-position: 0 -160px; }
        .sprite-ä¸­é˜¶ææ–™è¡¥ç»™ç®± { background-position: -80px -160px; }
        .sprite-ä½é˜¶ææ–™è¡¥ç»™ç®± { background-position: -160px -160px; }
        .sprite-ä¸€é˜¶æºç´ è¡¥ç»™ç®± { background-position: -240px -160px; }
        .sprite-äºŒé˜¶æºæ¶²è¡¥ç»™ç®± { background-position: -320px -160px; }
        .sprite-ä¸‰é˜¶æºè´¨è¡¥ç»™ç®± { background-position: -400px -160px; }

        /* ç¬¬å››è¡Œ */
        .sprite-ç‹‚çº§é­‚è¯†å°è®° { background-position: 0 -240px; }
        .sprite-å±çº§é­‚è¯†å°è®° { background-position: -80px -240px; }
        .sprite-æ™®çº§é­‚è¯†å°è®° { background-position: -160px -240px; }
        .sprite-ç‹‚çº§æ€æ„Ÿç²¾ç²¹ { background-position: -240px -240px; }
        .sprite-å±çº§æ€æ„Ÿç²¾ç²¹ { background-position: -320px -240px; }
        .sprite-æ™®çº§æ€æ„Ÿç²¾ç²¹ { background-position: -400px -240px; }

        /* ç¬¬äº”è¡Œ */
        .sprite-æ ¸å¿ƒé‡æ„ç¢ç‰‡ { background-position: 0 -320px; }
        .sprite-è¾¹ç•Œé‡æ„ç¢ç‰‡ { background-position: -80px -320px; }
        .sprite-æŠ€èƒ½æ¨¡ç»„â…£ { background-position: -160px -320px; }
        .sprite-æŠ€èƒ½æ¨¡ç»„â…¢ { background-position: -240px -320px; }
        .sprite-æŠ€èƒ½æ¨¡ç»„â…¡ { background-position: -320px -320px; }
        .sprite-æŠ€èƒ½æ¨¡ç»„â…  { background-position: -400px -320px; }

        /* ç¬¬å…­è¡Œ */
        .sprite-åç‰‡ { background-position: 0 -400px; }
        .sprite-ç•™å½±èƒ¶ç‰‡ { background-position: -80px -400px; }
        .sprite-ä½“åŠ› { background-position: -160px -400px; }
        .sprite-å¼‚è‰²æ€æ„Ÿç²¾ç²¹ { background-position: -240px -400px; }
        .sprite-ç‹‚çº§è·ƒå‡æŒ‡ä»¤ { background-position: -320px -400px; }
        .sprite-å±çº§è·ƒå‡æŒ‡ä»¤ { background-position: -400px -400px; }

        /* ==================== åŸºç¡€æ ·å¼è®¾ç½® ==================== */
        
        /* è®¾ç½®æ•´ä¸ªç½‘é¡µèƒŒæ™¯ */
        body {
            background: #1a1a1a;
            margin: 0;
            padding: 0;
        }

        /* ç¦æ­¢æ–‡æœ¬é€‰æ‹©å’Œç¼©æ”¾ */
        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* å…è®¸è¾“å…¥æ¡†æ–‡æœ¬é€‰æ‹© */
        input, textarea {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        /* æ·»åŠ æ …æ æ•ˆæœèƒŒæ™¯ - ä½¿ç”¨ä¼ªå…ƒç´ åˆ›å»º */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(90deg, rgba(139, 0, 0, 0.1) 1px, transparent 1px),
                linear-gradient(0deg, rgba(139, 0, 0, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: -1;
        }

        /* ==================== é¡µé¢å¸ƒå±€ç»“æ„ ==================== */

        /* æ•´ä¸ªé¡µé¢åŒ…è£…å™¨ */
        .page-wrapper {
            position: relative;
            transition: margin-left 0.3s ease;
            margin-left: 0;
            min-height: 100vh;
            padding-top: 70px; /* æ–°å¢ï¼šä¸ºå›ºå®šèœå•æ ç•™å‡ºç©ºé—´ */
            box-sizing: border-box; /* æ–°å¢ï¼šåŒ…å«å†…è¾¹è· */
        }

        /* å½“ä¾§è¾¹æ æ˜¾ç¤ºæ—¶ï¼Œæ•´ä¸ªé¡µé¢å‘å³ç§»åŠ¨ */
        .page-wrapper.with-sidebar {
            margin-left: 280px;
        }

        /* ä¸»è¦å†…å®¹å®¹å™¨ */
        .main-container {
            width: 100%;
        }

        /* é¡µé¢å†…å®¹åŒºåŸŸ */
        .page-content {
            width: 100%;
        }

        /* ==================== é¡¶éƒ¨èœå•æ æ ·å¼ ==================== */

        /* é¡¶éƒ¨èœå•æ æ ·å¼ */
        .top-menu-bar {
            background: #2a2a2a;
            border-bottom: 2px solid #8B0000;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            z-index: 10000;
            position: fixed; /* æ–°å¢ï¼šå›ºå®šå®šä½ */
            top: 0; /* æ–°å¢ï¼šå›ºå®šåœ¨é¡¶éƒ¨ */
            left: 0; /* æ–°å¢ï¼šå·¦ä¾§å¯¹é½ */
            right: 0; /* æ–°å¢ï¼šå³ä¾§å¯¹é½ */
            width: 100%; /* æ–°å¢ï¼šå…¨å®½åº¦ */
            box-sizing: border-box; /* æ–°å¢ï¼šåŒ…å«å†…è¾¹è· */
        }

        /* === èœå•æ ‡é¢˜æ ·å¼ === */
        .menu-title {
            color: #FF6B6B; /* äº®çº¢è‰² */
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        /* === èœå•å³ä¾§æŒ‰é’®å®¹å™¨ === */
        .menu-right {
            display: flex;
            gap: 15px;
            margin-left: auto;
        }

        /* === èœå•æŒ‰é’®åŸºç¡€æ ·å¼ === */
        .menu-btn {
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            color: #FF6B6B; /* äº®çº¢è‰² */
            border: 1px solid #555555;
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* === èœå•æŒ‰é’®æ‚¬åœæ•ˆæœ === */
        .menu-btn:hover {
            background: #3a3a3a;
            border-color: #FF4500;
            color: #FF4500; /* æ©™çº¢è‰²æ‚¬åœ */
        }

        /* èœå•æŒ‰é’®æ¿€æ´»çŠ¶æ€ */
        .menu-btn.active {
            background: #8B0000 !important;
            border-color: #FF4500 !important;
            color: white !important;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5) !important;
        }

        /* èœå•åˆ‡æ¢æŒ‰é’®æ ·å¼ - ä¸‰æ¡æ æŒ‰é’® */
        .menu-toggle-btn {
            background: #333333;
            color: #FF6B6B;
            border: 1px solid #555555;
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            margin-right: 10px;
        }

        /* é¼ æ ‡æ‚¬åœæ•ˆæœ */
        .menu-toggle-btn:hover {
            background: #3a3a3a;
            border-color: #FF4500;
            color: #FF4500;
        }

        /* æ¿€æ´»çŠ¶æ€ï¼ˆèœå•æ‰“å¼€æ—¶ï¼‰ */
        .menu-toggle-btn.active {
            background: #8B0000;
            border-color: #FF4500;
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== ä¾§è¾¹æ æ ·å¼ ==================== */

        /* ä¾§è¾¹èœå•æ å®¹å™¨ */
        .side-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 280px;
            background: #2a2a2a;
            border-right: 2px solid #333333;
            z-index: 1000;
            transform: translateX(-100%);
            animation: slideInLeft 0.3s ease forwards;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 
                        inset 0 0 0 1px rgba(255, 107, 107, 0.2);
        }

        /* æ»‘å…¥åŠ¨ç”» */
        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }

        /* ä¾§è¾¹æ é”é“¾è£…é¥° */
        .side-menu-overlay::after {
            content: "â›“ï¸";
            position: absolute;
            top: -10px;
            right: 10px;
            font-size: 16px;
            color: #8B0000;
            opacity: 0.7;
        }

        /* ä¾§è¾¹èœå•å¤´éƒ¨ - å¡ç‰‡é£æ ¼ */
        .side-menu-header {
            background: #333333;
            padding: 20px;
            border-bottom: 1px solid #444444;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        /* ä¾§è¾¹èœå•æ ‡é¢˜ */
        .side-menu-header h3 {
            color: #FF6B6B;
            margin: 0;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        /* ä¾§è¾¹èœå•å†…å®¹åŒºåŸŸ */
        .side-menu-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        /* ä¾§è¾¹èœå•é¡¹ - å¡ç‰‡æŒ‰é’®é£æ ¼ */
        .side-menu-item {
            padding: 16px 20px;
            background: #333333;
            border: 2px solid #444444;
            border-radius: 8px;
            color: #FF6B6B;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            margin-top: 10px;
        }

        /* èœå•é¡¹æ‚¬åœæ•ˆæœ */
        .side-menu-item:hover {
            background: #3a3a3a;
            border-color: #FF4500;
            color: #FF4500;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }

        /* èœå•é¡¹æ¿€æ´»çŠ¶æ€ï¼ˆå½“å‰é€‰ä¸­é¡µé¢ï¼‰ */
        .side-menu-item.active {
            background: #8B0000;
            border-color: #FF4500;
            color: white;
            box-shadow: 0 0 15px rgba(255, 69, 0, 0.5);
            transform: translateY(-1px);
        }

        /* èœå•é¡¹æ¿€æ´»çŠ¶æ€çš„é”é“¾è£…é¥° */
        .side-menu-item.active::before {
            content: "ğŸ”—";
            position: absolute;
            right: 15px;
            font-size: 14px;
        }

        /* ==================== è®¡ç®—å™¨é¡µé¢æ ·å¼ ==================== */

        /* åŸºç¡€æ ·å¼ - ä¿®æ”¹é¢œè‰²æ–¹æ¡ˆ */
        .gacha-calculator {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: transparent;
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* è®¡ç®—å™¨å¸ƒå±€ - ä½¿ç”¨CSS Grid */
        .calculator-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
            position: relative;
            z-index: 1;
        }

        /* å·¦å³é¢æ¿æ ·å¼ */
        .left-panel, .right-panel {
            display: flex;
            flex-direction: column;
            gap: 0px; /* æ‰€æœ‰æ¨¡å—çš„ä¸Šä¸‹é—´è· */
        }

        /* é˜²æ­¢çˆ¶å…ƒç´ overflowéšè— - å¼ºåˆ¶æ˜¾ç¤ºæº¢å‡ºå†…å®¹ */
        .calculator-layout {
            overflow: visible !important;
        }

        .gacha-calculator {
            overflow: visible !important;
        }

        /* å¡ç‰‡ç»„ä»¶æ ·å¼ */
        .card {
            background: #2a2a2a; /* æ·±ç°è‰²èƒŒæ™¯ */
            padding: 20px;
            border-radius: 8px; /* å‡å°‘åœ†è§’ï¼Œæ›´ç¡¬æœ— */
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 
                        inset 0 0 0 1px rgba(255, 107, 107, 0.2); /* åšé‡é˜´å½±å’Œçº¢è‰²å†…è¾¹æ¡† */
            border: 2px solid #333333; /* åšé‡è¾¹æ¡† */
            position: relative;
        }

        /* å¡ç‰‡é”é“¾è£…é¥° - ä½¿ç”¨ä¼ªå…ƒç´  */
        .card::after {
            content: "â›“ï¸";
            position: absolute;
            top: -10px;
            right: 10px;
            font-size: 16px;
            color: #8B0000; /* æ·±çº¢è‰² */
            opacity: 0.7;
        }

        /* ç²˜æ€§é¢æ¿æ ·å¼ - å¢å¼ºå›ºå®šå®šä½æ–¹æ¡ˆ */
        .sticky-panel {
            position: sticky;
            top: 90px; /* å¢åŠ é¡¶éƒ¨è·ç¦»ï¼Œé¿å…è¢«èœå•æ é®æŒ¡ */
            align-self: flex-start;
            z-index: 1000;
            background: #2a2a2a;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            margin-bottom: 20px;
        }

        /* åŒºåŸŸæ ‡é¢˜æ ·å¼ */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            color: #FF6B6B; /* äº®çº¢è‰²æ–‡å­— */
            margin-bottom: 15px;
            font-size: 18px;
            user-select: none;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        /* åŒºåŸŸæ ‡é¢˜æ‚¬åœæ•ˆæœ */
        .section-header:hover {
            color: #FF4500; /* æ©™çº¢è‰²æ‚¬åœ */
        }

        /* æŠ˜å å›¾æ ‡æ ·å¼ */
        .collapse-icon {
            font-weight: bold;
            font-size: 16px;
            color: #FF6B6B; /* äº®çº¢è‰² */
        }

        /* å†…å®¹åŒºåŸŸæ ·å¼ */
        .section-content {
            margin-top: 10px;
        }

        /* ä¸»æ ‡é¢˜æ ·å¼ */
        h1 {
            text-align: center;
            color: #FF6B6B; /* äº®çº¢è‰² */
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            border-bottom: 2px solid #8B0000; /* æ·±çº¢è‰²ä¸‹åˆ’çº¿ */
            padding-bottom: 10px;
        }

        /* äºŒçº§æ ‡é¢˜æ ·å¼ */
        h2 {
            color: #FF6B6B; /* äº®çº¢è‰² */
            margin-bottom: 15px;
            font-size: 18px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        /* å­åŒºåŸŸæ ·å¼ */
        .sub-section {
            margin: 20px 0;
            padding: 15px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 6px;
            border-left: 4px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
        }

        /* å­æ ‡é¢˜æ ·å¼ */
        .sub-title {
            color: #FF6B6B; /* äº®çº¢è‰² */
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: bold;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* å­æ ‡é¢˜åŒ…è£…å™¨æ ·å¼ */
        .sub-title-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        /* ==================== èµ„æºè¾“å…¥ç»„ä»¶æ ·å¼ ==================== */

        /* å½“å‰åº“å­˜å‚ç›´å¸ƒå±€ */
        .resource-vertical {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 10px;
        }

        /* å‚ç›´èµ„æºè¾“å…¥å®¹å™¨ */
        .resource-input-vertical {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 6px;
            border: 1px solid #444444; /* æ·±è‰²è¾¹æ¡† */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* å‚ç›´å¸ƒå±€æ ‡ç­¾æ ·å¼ */
        .resource-input-vertical label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            min-width: 120px;
            margin-bottom: 0;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* å‚ç›´å¸ƒå±€è¾“å…¥æ¡†æ ·å¼ */
        .resource-input-vertical input {
            padding: 8px;
            border: 1px solid #555555;
            border-radius: 5px;
            width: 100px;
            text-align: center;
            background: #2a2a2a;
            color: #FFFFFF;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* === èµ„æºè¾“å…¥ç»„ä»¶æ ·å¼ === */
        /* èµ„æºè¾“å…¥å®¹å™¨ */
        .resource-input {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }

        /* èµ„æºè¾“å…¥æ ‡ç­¾ */
        .resource-input label {
            width: 120px;
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* èµ„æºè¾“å…¥æ¡† */
        .resource-input input {
            padding: 8px;
            border: 1px solid #555555;
            border-radius: 5px;
            width: 120px;
            background: #2a2a2a;
            color: #FFFFFF;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* === è‡ªå®šä¹‰è°ƒæ•´åŒºåŸŸæ ·å¼ === */
        /* è‡ªå®šä¹‰è°ƒæ•´å®¹å™¨ */
        .custom-adjust {
            margin-top: 10px;
        }

        /* è‡ªå®šä¹‰è°ƒæ•´æç¤ºæ–‡å­— */
        .custom-tip {
            font-size: 12px;
            color: #FF4500; /* æ©™çº¢è‰² */
            margin-top: 5px;
            font-style: italic;
        }

        /* === èµ„æºå›¾æ ‡æ ·å¼ === */
        /* æ ‡å‡†èµ„æºå›¾æ ‡ */
        .resource-icon {
            width: 24px;
            height: 24px;
            vertical-align: middle;
            margin: 0 2px;
        }

        /* å°å‹èµ„æºå›¾æ ‡å˜ä½“ */
        .resource-icon.small {
            width: 16px;
            height: 16px;
        }

        /* ==================== çš®è‚¤é¢„ç•™åŒºåŸŸæ ·å¼ ==================== */

        /* çš®è‚¤é¢„ç•™åŒºåŸŸç½‘æ ¼å¸ƒå±€ - å•è¡Œæ˜¾ç¤ºä¸‰åˆ— */
        .skin-reserve-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        /* ç´§å‡‘å‹çš®è‚¤é¡¹æ ·å¼ */
        .skin-item.compact {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 12px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 6px;
            border: 1px solid #444444;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* çš®è‚¤ä¿¡æ¯åŒºåŸŸæ ·å¼ */
        .skin-item.compact .skin-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        /* çš®è‚¤ä»·æ ¼æ˜¾ç¤ºæ ·å¼ */
        .skin-item.compact .skin-price {
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* çš®è‚¤æ§åˆ¶æŒ‰é’®åŒºåŸŸ */
        .skin-item.compact .skin-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        /* çš®è‚¤æ•°é‡æ˜¾ç¤ºæ ·å¼ */
        .skin-item.compact .skin-count {
            color: #FF4500; /* æ©™çº¢è‰² */
            font-weight: bold;
            min-width: 40px;
            text-align: center;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* çš®è‚¤æ“ä½œæŒ‰é’®åŸºç¡€æ ·å¼ */
        .skin-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #555555;
            background: #2a2a2a;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FF6B6B;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* çš®è‚¤æŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .skin-btn:hover {
            background: #3a3a3a;
            border-color: #FF4500;
        }

        /* çš®è‚¤æŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆæŒ‰ä¸‹æ—¶ï¼‰ */
        .skin-btn:active {
            background: #1a1a1a;
            transform: translateY(1px);
        }

        /* ==================== è§’è‰²å…»æˆæ¨¡å—æ ·å¼ ==================== */

        /* æ–°å¢è§’è‰²å…»æˆæ¨¡å—æ ·å¼ */
        .character-development-input {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 6px 0;
            padding: 8px 12px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 6px;
            border: 1px solid #444444;
            gap: 15px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .character-development-label {
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
            flex: 1;
            flex-wrap: nowrap;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .character-development-value {
            font-weight: bold;
            color: #FF4500; /* æ©™çº¢è‰² */
            display: flex;
            align-items: center;
            gap: 2px;
            margin-left: 8px;
            white-space: nowrap;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .character-development-controls input {
            padding: 8px;
            border: 1px solid #555555;
            border-radius: 5px;
            width: 70px;
            text-align: center;
            font-size: 14px;
            min-width: 0;
            flex-shrink: 0;
            background: #2a2a2a;
            color: #FFFFFF;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .character-development-btn {
            width: 100%;
            padding: 10px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            margin-top: 10px;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .character-development-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        .character-development-btn.active {
            border-color: #FF4500;
            background: #8B0000; /* æ·±çº¢è‰² */
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* è§’è‰²å…»æˆæ“ä½œæŒ‰é’®åŸºç¡€æ ·å¼ */
        .character-dev-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #555555;
            background: #2a2a2a;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FF6B6B;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* è§’è‰²å…»æˆæŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .character-dev-btn:hover {
            background: #3a3a3a;
            border-color: #FF4500;
        }

        /* è§’è‰²å…»æˆæŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆæŒ‰ä¸‹æ—¶ï¼‰ */
        .character-dev-btn:active {
            background: #1a1a1a;
            transform: translateY(1px);
        }

        /* è§’è‰²å…»æˆæ•°é‡æ˜¾ç¤ºæ ·å¼ */
        .character-dev-count {
            color: #FF4500; /* æ©™çº¢è‰² */
            font-weight: bold;
            min-width: 40px;
            text-align: center;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* ==================== æ´¾é£å£°æœ›æŒ‰é’®æ ·å¼ ==================== */

        .dispatch-buttons {
            margin-top: 10px;
        }

        /* æ´¾é£å£°æœ›åˆ—å¸ƒå±€ */
        .dispatch-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* æ´¾é£å£°æœ›å•åˆ—æ ·å¼ */
        .dispatch-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* æ´¾é£å£°æœ›æŒ‰é’®åŸºç¡€æ ·å¼ */
        .dispatch-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* æ´¾é£å£°æœ›æŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .dispatch-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        /* æ´¾é£å£°æœ›æŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆé€‰ä¸­æ—¶ï¼‰ */
        .dispatch-btn.active {
            border-color: #FF4500;
            background: #8B0000;
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== ä¸»çº¿å‰§æƒ…æŒ‰é’®æ¨¡å—æ ·å¼ ==================== */

        /* ä¸»çº¿æŒ‰é’®å®¹å™¨ - é¡¶éƒ¨é—´è· */
        .main-story-buttons {
            margin-top: 10px;
        }

        /* ä¸»çº¿åˆ—å¸ƒå±€ - åŒåˆ—ç½‘æ ¼ */
        .main-story-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* å•åˆ—æ ·å¼ - å‚ç›´æ’åˆ— */
        .main-story-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* ä¸»çº¿æŒ‰é’®åŸºç¡€æ ·å¼ */
        .main-story-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* ä¸»çº¿æŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .main-story-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        /* ä¸»çº¿æŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆé€‰ä¸­æ—¶ï¼‰ */
        .main-story-btn.active {
            border-color: #FF4500;
            background: #8B0000; /* æ·±çº¢è‰² */
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰æŒ‰é’®æ¨¡å—æ ·å¼ ==================== */

        /* EXæŒ‰é’®å®¹å™¨ - é¡¶éƒ¨é—´è· */
        .ex-buttons {
            margin-top: 10px;
        }

        /* EXåˆ—å¸ƒå±€ - åŒåˆ—ç½‘æ ¼ */
        .ex-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* EXå•åˆ—æ ·å¼ - å‚ç›´æ’åˆ— */
        .ex-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* EXæŒ‰é’®åŸºç¡€æ ·å¼ */
        .ex-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* EXæŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .ex-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        /* EXæŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆé€‰ä¸­æ—¶ï¼‰ */
        .ex-btn.active {
            border-color: #FF4500;
            background: #8B0000; /* æ·±çº¢è‰² */
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== ä¸‰åˆ—ç½‘æ ¼æŒ‰é’®ç»„æ ·å¼ ==================== */

        /* è®°å¿†é£æš´ã€æ±¡æŸ“ä¹‹å·¢ã€æ¸…å‰¿è¡ŒåŠ¨æŒ‰é’®ç»„ - ä¸‰åˆ—ç½‘æ ¼å¸ƒå±€ */
        .memory-storm-buttons,
        .pollution-nest-buttons,
        .cleanup-operation-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }

        /* ä¸‰åˆ—æŒ‰é’®åŸºç¡€æ ·å¼ */
        .memory-storm-btn,
        .pollution-nest-btn,
        .cleanup-operation-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* ä¸‰åˆ—æŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .memory-storm-btn:hover,
        .pollution-nest-btn:hover,
        .cleanup-operation-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        /* ä¸‰åˆ—æŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆé€‰ä¸­æ—¶ï¼‰ */
        .memory-storm-btn.active,
        .pollution-nest-btn.active,
        .cleanup-operation-btn.active {
            border-color: #FF4500;
            background: #8B0000; /* æ·±çº¢è‰² */
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== å¸•å°”é©¬åºŸå¢Ÿç‰¹æ®Šå¸ƒå±€æ ·å¼ ==================== */

        /* å¸•å°”é©¬åºŸå¢ŸæŒ‰é’®ç»„ - å‚ç›´æ’åˆ—çš„å®¹å™¨ */
        .palma-ruins-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        /* å¸•å°”é©¬åºŸå¢Ÿè¡Œ - åŒåˆ—ç½‘æ ¼ */
        .palma-ruins-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        /* å¸•å°”é©¬åºŸå¢ŸæŒ‰é’®åŸºç¡€æ ·å¼ */
        .palma-ruins-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* å¸•å°”é©¬åºŸå¢ŸæŒ‰é’®æ‚¬åœçŠ¶æ€ */
        .palma-ruins-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        /* å¸•å°”é©¬åºŸå¢ŸæŒ‰é’®æ¿€æ´»çŠ¶æ€ï¼ˆé€‰ä¸­æ—¶ï¼‰ */
        .palma-ruins-btn.active {
            border-color: #FF4500;
            background: #8B0000; /* æ·±çº¢è‰² */
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== æš—åŸŸå¼€å…³ç»„æ ·å¼ ==================== */

        /* æš—åŸŸå¼€å…³ç»„æ ·å¼ - æ°´å¹³æ’åˆ—çš„å¼€å…³å®¹å™¨ */
        .dark-zone-switches {
            display: flex;
            gap: 15px;
        }

        /* ==================== é›¶é•œç³»ç»ŸæŒ‰é’®æ ·å¼ ==================== */

        .zero-mirror-buttons {
            margin-top: 10px;
        }

        .zero-mirror-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .zero-mirror-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .zero-mirror-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .zero-mirror-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        .zero-mirror-btn.active {
            border-color: #FF4500;
            background: #8B0000;
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== æ—¥å¸¸ç§¯ç´¯é¡¹ç›®æ ·å¼ ==================== */

        /* æ—¥å¸¸ç§¯ç´¯é¡¹ç›®å®¹å™¨ */
        .accumulation-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 5px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* é¡¹ç›®ä¿¡æ¯åŒºåŸŸ */
        .item-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        /* é¡¹ç›®æ ‡é¢˜ */
        .item-title {
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            min-width: 120px;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* é¡¹ç›®å‰¯æ ‡é¢˜ */
        .item-subtitle {
            color: #CCCCCC;
            min-width: 80px;
            font-size: 14px;
        }

        /* é¡¹ç›®æ•°å€¼ */
        .item-value {
            font-weight: bold;
            color: #FF4500; /* æ©™çº¢è‰² */
            margin-left: 10px;
            display: flex;
            align-items: center;
            gap: 2px;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* ==================== å¼€å…³ç»„ä»¶æ ·å¼ ==================== */

        /* å¼€å…³ç»„å®¹å™¨ */
        .switch-group {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 10px;
        }

        /* å°å‹å¼€å…³ç»„å˜ä½“ */
        .switch-group.small {
            margin: 0 0 0 10px;
        }

        /* å¼€å…³å®¹å™¨ */
        .switch {
            position: relative;
            width: 40px;
            height: 20px;
        }

        /* éšè—åŸå§‹è¾“å…¥æ¡† */
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* å¼€å…³æ»‘å—è½¨é“ */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #555555;
            transition: .4s;
            border-radius: 20px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* å¼€å…³æ»‘å— */
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        /* å¼€å…³é€‰ä¸­çŠ¶æ€ - è½¨é“ */
        input:checked + .slider {
            background-color: #8B0000; /* æ·±çº¢è‰² */
        }

        /* å¼€å…³é€‰ä¸­çŠ¶æ€ - æ»‘å—ä½ç½® */
        input:checked + .slider:before {
            transform: translateX(20px);
        }

        /* å¼€å…³æ ‡ç­¾æ–‡å­— */
        .switch-label {
            font-size: 12px;
            margin-left: 5px;
            color: #CCCCCC;
        }

        /* åœ¨è¿™é‡Œæ·»åŠ å¼€å…³æ ‡ç­¾é«˜äº®æ ·å¼ */
        .switch-label.active {
            color: #FF4500; /* æ©™çº¢è‰² */
            font-weight: bold;
        }

        .switch-label.inactive {
            color: #666666;
        }

        /* æ–°å¢ï¼šæœ¬æœŸå·²é¢†å–å¼€å…³æ ·å¼ */
        .claimed-switch {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: auto;
        }

        .claimed-switch-label {
            font-size: 12px;
            color: #CCCCCC;
            white-space: nowrap;
        }

        /* ==================== æ—¶é—´é€‰é¡¹æ ·å¼ ==================== */

        .time-options {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }

        .time-option {
            flex: 1;
            padding: 12px;
            min-width: 0;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border: 2px solid #444444;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .time-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
            gap: 5px;
        }

        .time-title {
            font-size: 14px;
            font-weight: bold;
            flex-shrink: 0;
            color: #FF6B6B; /* äº®çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .time-days {
            font-size: 14px;
            font-weight: bold;
            color: #FF4500; /* æ©™çº¢è‰² */
            flex-shrink: 0;
            white-space: nowrap;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .time-date {
            font-size: 12px;
            color: #CCCCCC;
            text-align: center;
        }

        .time-option.active {
            border-color: #FF4500;
            background: #3a3a3a;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.3);
        }

        /* ==================== ç»“æœå±•ç¤ºæ ·å¼ ==================== */

        .result {
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            padding: 20px;
            border-radius: 8px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 16px;
            color: #CCCCCC;
        }

        .result-item.simple {
            font-size: 18px;
        }

        .result-item.highlight {
            font-weight: bold;
            font-size: 20px;
            border-top: 1px solid #444444;
            padding-top: 10px;
            margin-top: 15px;
            color: #FF4500; /* æ©™çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .summary-section {
            margin: 15px 0;
            padding: 15px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 8px;
            border-left: 4px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 16px;
            color: #CCCCCC;
        }

        .summary-label {
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .summary-value {
            font-weight: bold;
            color: #FF4500; /* æ©™çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .shop-section {
            margin-top: 15px;
            padding: 15px;
            background: #2a2a2a; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 8px;
            border: 1px solid #444444;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .shop-title {
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            margin-bottom: 10px;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* ==================== å•†åº—å…‘æ¢æ¨¡å—æ ·å¼ ==================== */

        .certification-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .certification-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #555555;
            background: #333333;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FF6B6B;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .certification-btn:hover {
            background: #3a3a3a;
            border-color: #FF4500;
        }

        .certification-count {
            font-weight: bold;
            color: #FF4500; /* æ©™çº¢è‰² */
            min-width: 80px;
            text-align: center;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
            background: #333333;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #555555;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        /* ==================== æ´»åŠ¨ç§¯ç´¯æ¨¡å—æ ·å¼ ==================== */

        .training-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .training-btn {
            padding: 12px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .training-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        .training-btn.active {
            border-color: #FF4500;
            background: #8B0000; /* æ·±çº¢è‰² */
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== æ— å°½æ¢¦é­‡æ ·å¼ ==================== */

        .nightmare-score {
            margin-bottom: 20px;
            padding: 15px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 8px;
            border: 1px solid #444444;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .score-title {
            font-size: 14px;
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            margin-bottom: 10px;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .slider-container {
            margin-bottom: 15px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: #CCCCCC;
        }

        /* æ— å°½æ¢¦é­‡æ»‘å—æ ·å¼ï¼ˆå¤§èŒƒå›´ï¼‰ */
        .score-slider {
            width: 100%;
            height: 20px;
            border-radius: 3px;
            background: #2a2a2a; /* æ·±ç°è‰²èƒŒæ™¯ */
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }

        .score-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8B0000; /* æ·±çº¢è‰² */
            cursor: pointer;
            border: 2px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .score-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8B0000; /* æ·±çº¢è‰² */
            cursor: pointer;
            border: 2px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .score-slider::-webkit-slider-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #555555;
            margin: 7px 0;
        }

        .score-slider::-moz-range-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #555555;
            border: none;
        }

        .slider-value {
            text-align: center;
            font-size: 12px;
            color: #FF4500; /* æ©™çº¢è‰² */
            margin-top: 5px;
            font-weight: bold;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        .score-rewards {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reward-label {
            font-size: 13px;
            color: #CCCCCC;
        }

        .reward-value {
            font-size: 13px;
            font-weight: bold;
            color: #FF4500; /* æ©™çº¢è‰² */
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* ==================== ç›‘å¯Ÿå¯†ä»¤æ ·å¼ ==================== */

        /* ç›‘å¯Ÿå¯†ä»¤æŒ‰é’®æ ·å¼ */
        .inspection-order-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .inspection-period-btn-wrapper {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .inspection-period-btn {
            padding: 10px 8px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .inspection-period-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        .inspection-period-btn.active {
            border-color: #FF4500;
            background: #8B0000;
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        .inspection-slider-container {
            padding: 10px;
            background: #333333;
            border-radius: 6px;
            border: 1px solid #444444;
        }

        /* ç›‘å¯Ÿå¯†ä»¤æ»‘å—æ ·å¼ï¼ˆå°èŒƒå›´ï¼‰ */
        .inspection-slider {
            width: 100%;
            height: 20px;
            border-radius: 3px;
            background: #2a2a2a; /* æ·±ç°è‰²èƒŒæ™¯ */
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }

        .inspection-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8B0000; /* æ·±çº¢è‰² */
            cursor: pointer;
            border: 2px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .inspection-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8B0000; /* æ·±çº¢è‰² */
            cursor: pointer;
            border: 2px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .inspection-slider::-webkit-slider-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #555555;
            margin: 7px 0;
        }

        .inspection-slider::-moz-range-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #555555;
            border: none;
        }

        /* æ»‘å—ç¦ç”¨çŠ¶æ€æ ·å¼ */
        .inspection-slider:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .inspection-slider:disabled::-webkit-slider-thumb {
            background: #444444;
            cursor: not-allowed;
        }
        
        .inspection-slider:disabled::-moz-range-thumb {
            background: #444444;
            cursor: not-allowed;
        }

        /* ç›‘å¯Ÿå¯†ä»¤å¥–åŠ±ä¿¡æ¯æ ·å¼ */
        .reward-info {
            margin-top: 10px;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 5px;
            border: 1px solid #444444;
        }

        .reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
            font-size: 12px;
        }

        .reward-label {
            color: #CCCCCC;
        }

        .reward-value {
            color: #FF4500;
            font-weight: bold;
        }

        .reward-value.claimed {
            color: #666666;
            text-decoration: line-through;
        }

        /* ç›‘å¯Ÿå¯†ä»¤æ»‘å—å®¹å™¨æ ·å¼ */
        .inspection-slider-container {
            padding: 15px;
            background: #333333;
            border-radius: 6px;
            border: 1px solid #444444;
            margin-top: 8px;
        }

        .inspection-slider-container .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: #CCCCCC;
        }

        .inspection-slider-container .slider-value {
            text-align: center;
            font-size: 13px;
            color: #FF4500;
            margin-top: 8px;
            font-weight: bold;
        }

        /* ==================== æ™¶æºç‰¹ä¾›æ ·å¼ ==================== */

        /* æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰å“åº”å¼å¸ƒå±€ */
        .crystal-supply-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .price-tag {
            white-space: normal !important;
            min-width: 30px !important;
            display: inline-block !important;
            text-align: center !important;
        }

        /* === æ–°å¢ï¼šæ™¶æºç‰¹ä¾›æŒ‰é’®æ ·å¼ === */
        .crystal-supply-btn.active {
            border-color: #FFD700 !important;
            background: linear-gradient(135deg, #8B0000, #FF4500) !important;
            color: white !important;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5) !important;
        }

        /* ==================== é¥¼çŠ¶å›¾æ ·å¼ ==================== */

        /* é¥¼çŠ¶å›¾æ ·å¼ */
        .pie-chart-section {
            background: #2a2a2a; /* æ·±ç°è‰²èƒŒæ™¯ */
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #333333;
            margin-bottom: 20px;
            position: relative;
            min-height: 320px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 
                        inset 0 0 0 1px rgba(255, 107, 107, 0.2);
        }

        /* é¥¼çŠ¶å›¾å®¹å™¨å¸ƒå±€ */
        .pie-chart-container {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        /* é¥¼çŠ¶å›¾ç”»å¸ƒåŒ…è£…å™¨ */
        .pie-canvas-wrapper {
            position: relative;
            width: 60%;
            height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* é¥¼çŠ¶å›¾ç”»å¸ƒ */
        .pie-canvas {
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.2s ease;
        }

        .pie-canvas:hover {
            transform: scale(1.02);
        }

        /* é¥¼çŠ¶å›¾æç¤ºæ¡† */
        .pie-tooltip {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            pointer-events: none;
            text-align: center;
            min-width: 120px;
            border: 1px solid #FF4500;
        }

        .tooltip-details {
            font-size: 11px;
            margin-top: 4px;
            color: #FF6B6B;
        }

        /* é¥¼çŠ¶å›¾å›¾ä¾‹ */
        .pie-legend {
            flex: 1;
            padding: 12px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 8px;
            border: 1px solid #444444;
            max-height: 250px;
            overflow-y: auto;
            box-sizing: border-box;
            min-width: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .legend-items {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            transition: all 0.3s ease;
        }

        .legend-item:hover {
            transform: translateX(5px);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 8px;
            flex-shrink: 0;
        }

        .legend-text {
            font-size: 12px;
            color: #CCCCCC;
        }

        .legend-total {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #444444;
            font-size: 13px;
            font-weight: bold;
            color: #FF6B6B; /* äº®çº¢è‰² */
            text-align: left;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* é¥¼çŠ¶å›¾canvasæ ·å¼ */
        .pie-chart-section canvas {
            transition: transform 0.2s ease;
        }

        .pie-chart-section canvas:hover {
            transform: scale(1.02);
        }

        /* é¥¼å›¾ç”»å¸ƒæ¸²æŸ“ä¼˜åŒ– */
        .pie-canvas {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: -o-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            -ms-interpolation-mode: nearest-neighbor;
        }

        /* ==================== ç¤¼åŒ…æ€§ä»·æ¯”é¡µé¢æ ·å¼ ==================== */

        /* ç¤¼åŒ…æ€§ä»·æ¯”é¡µé¢æ ·å¼ */
        /* é¡µé¢ä¸»å®¹å™¨ï¼šè®¾ç½®å†…è¾¹è·ã€æœ€å¤§å®½åº¦ã€é¡¶éƒ¨å¤–è¾¹è·ï¼ˆä¸ºé¡¶éƒ¨èœå•ç•™å‡ºç©ºé—´ï¼‰å’Œæ°´å¹³å±…ä¸­ */
        .value-analysis-page {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto 0;
        }

        /* === é¡µé¢æ ‡é¢˜åŒºåŸŸæ ·å¼ === */
        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
            border: 2px solid #333333;
        }

        /* é¡µé¢ä¸»æ ‡é¢˜æ ·å¼ */
        .page-header h1 {
            color: #FF6B6B;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            font-size: 28px;
        }

        /* é¡µé¢æè¿°æ–‡å­—æ ·å¼ */
        .page-header p {
            color: #CCCCCC;
            font-size: 16px;
            margin: 0;
        }

        /* === å†…å®¹åŒºåŸŸæ ·å¼ === */
        .analysis-content {
            background: #2a2a2a;
            border-radius: 8px;
            border: 2px solid #333333;
            padding: 40px 20px;
        }

        /* === ç¤¼åŒ…æ¨¡å—åˆ†åŒºæ ·å¼ === */
        /* æ¯ä¸ªç¤¼åŒ…åˆ†ç±»åŒºåŸŸçš„é—´è·æ§åˆ¶ */
        .package-section {
            margin-bottom: 30px;
            background: #2a2a2a;
            border-radius: 8px;
            border: 2px solid #333333;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto 30px;
            width: calc(100% - 40px);
            box-sizing: border-box;
        }

        /* ç¤¼åŒ…ç½‘æ ¼å®¹å™¨ */
        .package-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2åˆ— */
            gap: 5px; /* åˆ—é—´è· */
        }

        /* === åˆ†åŒºæ ‡é¢˜æ ·å¼ === */
        /* åˆ†åŒºæ ‡é¢˜ï¼šçº¢è‰²ç³»é…è‰²ï¼Œæ·»åŠ ä¸‹åˆ’çº¿è£…é¥°å’Œæ–‡å­—é˜´å½± */
        .section-title {
            color: #FF6B6B;
            font-size: 22px;
            margin-bottom: 20px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            border-bottom: 2px solid #8B0000;
            padding-bottom: 10px;
        }

        /* ç¤¼åŒ…è¯¦æƒ…åŒºåŸŸæ ·å¼ */
        /* æ¯ä¸ªç¤¼åŒ…å®¹å™¨çš„åº•éƒ¨é—´è· */
        .package-container {
            margin-bottom: 5px;
        }

        /* ç¤¼åŒ…å¡ç‰‡æ ·å¼ */
        /* ç¤¼åŒ…å¡ç‰‡ï¼šflexå¸ƒå±€ï¼Œæ·±è‰²èƒŒæ™¯ï¼Œåœ†è§’è¾¹æ¡†ï¼Œé˜´å½±æ•ˆæœï¼Œå¯ç‚¹å‡»äº¤äº’ */
        .package-card {
            display: flex;
            background: #333333;
            border-radius: 8px 8px 8px 8px; /* åªæœ‰é¡¶éƒ¨åœ†è§’ */
            border: 2px solid #444444;
            border-bottom: none; /* å»æ‰åº•éƒ¨è¾¹æ¡† */
            padding: 20px;
            gap: 20px;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        /* å¡ç‰‡æ‚¬åœæ•ˆæœï¼šè½»å¾®å˜äº®èƒŒæ™¯ï¼Œæå‡äº¤äº’ä½“éªŒ */
        .package-card:hover {
            background: rgba(255, 255, 255, 0.05); /* æ‚¬åœæ•ˆæœ */
        }

        /* ç¤¼åŒ…å›¾ç‰‡å®¹å™¨ */
        /* å›¾ç‰‡å®¹å™¨ï¼šå›ºå®šå°ºå¯¸ï¼Œé˜²æ­¢å‹ç¼©ï¼Œç›¸å¯¹å®šä½ä¸ºè¦†ç›–å±‚æä¾›å‚è€ƒ */
        .package-image {
            flex-shrink: 0;
            width: 120px;
            height: 120px;
            position: relative; /* ä¸ºç»å¯¹å®šä½å­å…ƒç´ æä¾›å‚è€ƒ */
        }

        /* ç¤¼åŒ…å›¾ç‰‡ï¼šå¡«å……å®¹å™¨ï¼Œä¿æŒæ¯”ä¾‹è£å‰ª */
        .package-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ç¤¼åŒ…ä¿¡æ¯ */
        /* ä¸»è¦ä¿¡æ¯åŒºåŸŸï¼šå¼¹æ€§å¡«å……å‰©ä½™ç©ºé—´ï¼Œå‚ç›´æ’åˆ— */
        .package-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* ç¤¼åŒ…åç§°ï¼šé†’ç›®æ ‡é¢˜æ ·å¼ */
        .package-name {
            color: #FF6B6B;
            font-size: 20px;
            margin: 0;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        /* ç»Ÿè®¡ä¿¡æ¯å®¹å™¨ï¼šå‚ç›´æ’åˆ—å„é¡¹æ•°æ® */
        .package-stats {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* å•ä¸ªç»Ÿè®¡é¡¹ï¼šæ°´å¹³æ’åˆ—æ ‡ç­¾å’Œæ•°å€¼ */
        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ç»Ÿè®¡æ ‡ç­¾ï¼šæµ…ç°è‰²æè¿°æ–‡å­— */
        .stat-label {
            color: #CCCCCC;
            font-size: 14px;
        }

        /* ç»Ÿè®¡æ•°å€¼ï¼šæ©™è‰²çªå‡ºæ˜¾ç¤ºï¼Œç²—ä½“å¼ºè°ƒ */
        .stat-value {
            color: #FF4500;
            font-weight: bold;
            font-size: 16px;
        }

        /* ä»·æ ¼æ ‡ç­¾ */
        /* ä»·æ ¼æ ‡ç­¾å®¹å™¨ï¼šé¡¶éƒ¨é—´è·åˆ†éš” */
        .price-tag-container {
            margin-top: 10px;
        }

        /* ä»·æ ¼æ ‡ç­¾ï¼šæ·±çº¢è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼Œçªå‡ºæ˜¾ç¤º */
        .price-tag {
            background: #8B0000;
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* æ¡å½¢å›¾æ ·å¼ */
        /* æ¡å½¢å›¾å®¹å™¨ï¼šå›ºå®šå®½åº¦ï¼Œé˜²æ­¢å‹ç¼©ï¼Œå‚ç›´æ’åˆ— */
        .package-chart {
            flex-shrink: 0;
            width: 200px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* å•ä¸ªå›¾è¡¨é¡¹ï¼šæ°´å¹³æ’åˆ—æ ‡ç­¾å’Œæ¡å½¢å›¾ */
        .chart-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* å›¾è¡¨æ ‡ç­¾ï¼šå›ºå®šå®½åº¦å³å¯¹é½ï¼Œæµ…è‰²æ–‡å­— */
        .chart-label {
            color: #CCCCCC;
            font-size: 12px;
            width: 60px;
            text-align: right;
        }

        /* æ¡å½¢å›¾å®¹å™¨ï¼šå¼¹æ€§å®½åº¦ï¼Œå›ºå®šé«˜åº¦ï¼Œéšè—æº¢å‡ºå†…å®¹ */
        .chart-bar-container {
            flex: 1;
            height: 20px;
            position: relative;
            background: transparent;
            overflow: hidden; /* æ¢å¤è¿™è¡Œï¼Œç¡®ä¿æ¡å½¢å›¾æ­£ç¡®æ˜¾ç¤º */
        }

        /* æ¡å½¢å›¾åŸºç¡€æ ·å¼ï¼šé«˜åº¦å¡«å……ï¼Œè¿‡æ¸¡åŠ¨ç”»ï¼Œåœ†è§’è®¾è®¡ */
        .chart-bar {
            height: 100%;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            min-width: 0;
            border-radius: 10px; /* æ·»åŠ é»˜è®¤åœ†è§’ */
        }

        /* æ¡å½¢å›¾ç™¾åˆ†æ¯”æ–‡å­—ï¼šç™½è‰²ç²—ä½“ï¼Œæ–‡å­—é˜´å½±ç¡®ä¿å¯è¯»æ€§ */
        .chart-percentage {
            color: white;
            font-size: 11px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            margin-left: 8px;
            white-space: nowrap;
        }

        /* ææ–™ä»·å€¼æ¡å½¢å›¾ï¼šç®€çº¦é’è‰² */
        .material-bar {
            background: #4ECDC4; /* ç®€çº¦çš„é’è‰² */
        }

        /* çº¯æŠ½å¡ä»·å€¼æ¡å½¢å›¾ï¼šç®€çº¦çº¢è‰² */
        .pure-gacha-bar {
            background: #FF6B6B; /* ç®€çº¦çš„çº¢è‰² */
        }

        /* åŸºå‡†çº¿ï¼ˆ648çº¢æ™¶ï¼‰æ¡å½¢å›¾ï¼šç®€çº¦ç±³é»„è‰² */
        .red-crystal-bar {
            background: #FFEAA7; /* ç®€çº¦çš„ç±³é»„è‰² */
        }

        /* é’ˆå¯¹ä¸åŒé¢œè‰²çš„æ¡å½¢å›¾è°ƒæ•´æ–‡å­—é¢œè‰² */
        /* é’è‰²å’Œçº¢è‰²æ¡å½¢å›¾ä½¿ç”¨ç™½è‰²æ–‡å­— */
        .material-bar .chart-percentage {
            color: white;
        }

        .pure-gacha-bar .chart-percentage {
            color: white;
        }

        /* ç±³é»„è‰²æ¡å½¢å›¾ä½¿ç”¨æ·±è‰²æ–‡å­—ï¼Œé…åˆæµ…è‰²é˜´å½±ç¡®ä¿å¯è¯»æ€§ */
        .red-crystal-bar .chart-percentage {
            color: #2c3e50;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        }

        /* ç¤¼åŒ…è¯¦æƒ…æ ·å¼ */
        /* è¯¦æƒ…åŒºåŸŸï¼šä½äºç¤¼åŒ…å¡ç‰‡ä¸‹æ–¹ï¼ŒåŠé€æ˜èƒŒæ™¯ï¼Œç»†è¾¹æ¡†ï¼Œåœ†è§’è®¾è®¡ */
        .package-detail {
            margin-top: -2px;
            padding: 25px 20px 20px;
            background: #333333;
            border-radius: 0 0 8px 8px;
            border: 2px solid #444444;
            border-top: none;
            box-shadow: 
                0 8px 20px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.1);
            position: relative;
            z-index: 1;
            width: 95%; /* ç•¥çª„äºç¤¼åŒ…åŒºåŸŸ */
            margin-left: auto; /* å±…ä¸­å¯¹é½ */
            margin-right: auto; /* å±…ä¸­å¯¹é½ */
            box-sizing: border-box;
        }

        /* è¿æ¥è£…é¥°çº¿ */
        .package-detail::before {
            content: "";
            position: absolute;
            top: 0;
            left: 30px; /* è°ƒæ•´è¾¹è·é€‚åº”95%å®½åº¦ */
            right: 30px; /* è°ƒæ•´è¾¹è·é€‚åº”95%å®½åº¦ */
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                #FF4500 20%, 
                #FF4500 80%, 
                transparent
            );
            opacity: 0.6;
        }

        /* === è¯¦æƒ…åŒºåŸŸæ ‡é¢˜æ ·å¼ === */
        /* è¯¦æƒ…æ ‡é¢˜å®¹å™¨ï¼šåº•éƒ¨é—´è·åˆ†éš”æ ‡é¢˜ä¸å†…å®¹ */
        .detail-header {
            margin-bottom: 12px;
        }

        /* è¯¦æƒ…æ ‡é¢˜æ–‡å­—ï¼šæµ…ç°è‰²ï¼Œç²—ä½“ï¼Œç¨å°å­—å· */
        .detail-title {
            color: #CCCCCC;
            font-weight: bold;
            font-size: 14px;
        }

        /* === è¯¦æƒ…å†…å®¹åŒºåŸŸæ ·å¼ === */
        /* å†…å®¹å®¹å™¨ï¼šå‚ç›´æ’åˆ—ï¼Œè®¾ç½®è¡Œé—´è· */
        .detail-content {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* === è¯¦æƒ…è¡Œæ ·å¼ === */
        /* æ™®é€šè¯¦æƒ…è¡Œï¼šæ°´å¹³å¸ƒå±€ï¼Œå‚ç›´å±…ä¸­ï¼Œå†…è¾¹è·ï¼Œåº•éƒ¨è¾¹æ¡†åˆ†éš” */
        .detail-row {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* è¡¨å¤´è¡Œæ ·å¼ï¼šç²—ä½“æ–‡å­—ï¼Œæµ…ç°è‰²ï¼Œå°å­—å· */
        .detail-row.header-row {
            font-weight: bold;
            color: #CCCCCC;
            font-size: 12px;
        }

        /* === åˆ—å¸ƒå±€æ ·å¼ === */
        /* ç‰©å“åç§°åˆ—ï¼šå æ®2ä»½å®½åº¦ï¼Œæ°´å¹³æ’åˆ—å›¾æ ‡å’Œæ–‡å­— */
        .col-name {
            flex: 2;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* æ•°é‡åˆ—ï¼šå æ®1ä»½å®½åº¦ï¼Œå±…ä¸­å¯¹é½ */
        .col-quantity {
            flex: 1;
            text-align: center;
        }

        /* ä»·å€¼åˆ—ï¼šå æ®1ä»½å®½åº¦ï¼Œå±…ä¸­å¯¹é½ */
        .col-value {
            flex: 1;
            text-align: center;
        }

        /* å æ¯”åˆ—ï¼šå æ®1ä»½å®½åº¦ï¼Œå±…ä¸­å¯¹é½ */
        .col-percentage {
            flex: 1;
            text-align: center;
        }

        /* === ç‰©å“å›¾æ ‡æ ·å¼ === */
        /* èµ„æºå›¾æ ‡ï¼šå›ºå®šå°ºå¯¸ï¼Œç¡®ä¿ç»Ÿä¸€å¯¹é½ */
        .item-icon {
            width: 20px;
            height: 20px;
        }

        /* è¯´æ˜è¡Œæ ·å¼ */
        .explanation-row {
            background: #333333;
            border: 1px solid #444444;
        }

        .explanation-text {
            color: #CCCCCC;
        }

        /* ==================== æ’åºæ§åˆ¶æ ·å¼ ==================== */

        /* æ’åºæ§åˆ¶å®¹å™¨ */
        .sort-controls-container {
            max-width: 1200px;
            margin: 0 auto 20px;
            padding: 0 20px;
            box-sizing: border-box;
        }

        .sort-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            max-width: 100%;
        }

        .sort-btn {
            padding: 10px 20px;
            border: 2px solid #555555;
            background: #2a2a2a;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            color: #CCCCCC;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            flex-shrink: 0; /* é˜²æ­¢æŒ‰é’®è¢«å‹ç¼© */
        }

        .sort-btn:hover {
            border-color: #FF4500;
            background: #3a3a3a;
            color: #FFFFFF;
        }

        .sort-btn.active {
            border-color: #FF4500;
            background: #8B0000;
            color: white;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        /* ==================== å¼¹çª—æ¨¡æ€æ¡†æ ·å¼ ==================== */

        /* å¼¹çª—æ¨¡æ€æ¡†æ ·å¼ */
        /* æ¨¡æ€æ¡†é®ç½©å±‚ - è¦†ç›–æ•´ä¸ªå±å¹• */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        /* å¼¹çª—å†…å®¹å®¹å™¨ */
        .modal-content {
            background: #2a2a2a;
            border: 2px solid #333333;
            border-radius: 8px;
            padding: 0;
            max-width: 500px;
            width: 90%;
            max-height: 70vh;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), 
                        inset 0 0 0 1px rgba(255, 107, 107, 0.2);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* å¼¹çª—é”é“¾è£…é¥°å…ƒç´  */
        .modal-content::after {
            content: "â›“ï¸";
            position: absolute;
            top: -10px;
            right: 10px;
            font-size: 16px;
            color: #8B0000; /* æ·±çº¢è‰² */
            opacity: 0.7;
        }

        /* å¼¹çª—å¤´éƒ¨ */
        .modal-header {
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            padding: 20px;
            border-bottom: 1px solid #444444;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky; /* æ”¹ä¸ºstickyå®šä½ */
            top: 0;
            z-index: 10;
            flex-shrink: 0; /* é˜²æ­¢æ ‡é¢˜æ è¢«å‹ç¼© */
            box-shadow: 0 2px 8px rgba(0,0,0,0.2); /* æ·»åŠ é˜´å½±å¢å¼ºå±‚æ¬¡æ„Ÿ */
        }

        /* === å¼¹çª—æ ‡é¢˜æ ·å¼ === */
        .modal-title {
            color: #FF6B6B; /* äº®çº¢è‰² */
            font-size: 20px;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            margin: 0;
        }

        /* === å…³é—­æŒ‰é’®æ ·å¼ === */
        .modal-close {
            background: none;
            border: none;
            color: #FF6B6B;
            font-size: 24px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        /* === å…³é—­æŒ‰é’®æ‚¬åœæ•ˆæœ === */
        .modal-close:hover {
            background: #3a3a3a;
            color: #FF4500;
        }

        /* å¼¹çª—ä¸»ä½“å†…å®¹åŒºåŸŸ */
        .modal-body {
            padding: 25px;
            color: #CCCCCC;
            line-height: 1.6;
            overflow-y: auto;
            flex: 1;
            scrollbar-width: thin;
            scrollbar-color: #8B0000 #333333;
        }

        /* å¼¹çª—åº•éƒ¨ */
        .modal-footer {
            padding: 15px 25px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-top: 1px solid #444444;
            border-radius: 0 0 8px 8px;
            text-align: center;
            flex-shrink: 0;
        }

        /* === å¼¹çª—å†…å®¹åŒºå—æ ·å¼ === */
        .modal-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #333333; /* æ·±ç°è‰²èƒŒæ™¯ */
            border-radius: 6px;
            border-left: 4px solid #FF4500; /* æ©™çº¢è‰²è¾¹æ¡† */
            box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
        }

        /* === åŒºå—æ ‡é¢˜æ ·å¼ === */
        .modal-section-title {
            color: #FF6B6B; /* äº®çº¢è‰² */
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 1px 1px rgba(0,0,0,0.5);
        }

        /* === åˆ—è¡¨æ ·å¼ === */
        .modal-list {
            margin: 10px 0;
            padding-left: 20px;
        }

        /* === åˆ—è¡¨é¡¹æ ·å¼ === */
        .modal-list li {
            margin-bottom: 8px;
            color: #CCCCCC;
        }

        /* === é«˜äº®æ–‡å­—æ ·å¼ === */
        .modal-highlight {
            color: #FF4500; /* æ©™çº¢è‰² */
            font-weight: bold;
        }

        /* === è”ç³»æ–¹å¼æ–‡å­—æ ·å¼ === */
        .modal-contact {
            color: #FF6B6B;
            font-weight: bold;
            margin-top: 10px;
        }

        /* === å¼¹çª—æ»šåŠ¨æ¡è‡ªå®šä¹‰æ ·å¼ === */
        /* Webkitæµè§ˆå™¨è‡ªå®šä¹‰æ»šåŠ¨æ¡ (Chrome, Safari, Edge) - åº”ç”¨åˆ°å†…å®¹åŒºåŸŸ */
        .modal-body::-webkit-scrollbar {
            width: 12px;
        }

        /* æ»šåŠ¨æ¡è½¨é“æ ·å¼ */
        .modal-body::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 6px;
            margin: 5px 0;
            box-shadow: inset 0 0 3px rgba(0,0,0,0.5);
        }

        /* æ»šåŠ¨æ¡æ»‘å—æ ·å¼ */
        .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8B0000, #FF4500);
            border-radius: 6px;
            border: 2px solid #2a2a2a;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        /* æ»‘å—æ‚¬åœçŠ¶æ€ */
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #FF4500, #FF6B6B);
            box-shadow: 0 0 8px rgba(255, 69, 0, 0.5);
        }

        /* æ»‘å—æ¿€æ´»çŠ¶æ€ï¼ˆç‚¹å‡»æ—¶ï¼‰ */
        .modal-body::-webkit-scrollbar-thumb:active {
            background: linear-gradient(135deg, #FF6B6B, #FF8C00);
        }

        /* æ»šåŠ¨æ¡è§’è½æ ·å¼ */
        .modal-body::-webkit-scrollbar-corner {
            background: #2a2a2a;
        }

        /* === å¤–å±‚å®¹å™¨æ»šåŠ¨æ¡å¤„ç† === */
        /* ç§»é™¤modal-contentçš„æ»šåŠ¨æ¡æ ·å¼ï¼Œå› ä¸ºç°åœ¨å†…å®¹åŒºåŸŸå•ç‹¬æ»šåŠ¨ */
        .modal-content::-webkit-scrollbar {
            display: none; /* éšè—å¤–å±‚æ»šåŠ¨æ¡ */
        }

        /* å¤–å±‚æ»šåŠ¨æ¡æ»‘å—æ‚¬åœï¼ˆè™½ç„¶éšè—ä½†ä¿ç•™å®šä¹‰ï¼‰ */
        .modal-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #FF4500, #FF6B6B); /* æ‚¬åœæ—¶æ›´äº® */
            box-shadow: 0 0 8px rgba(255, 69, 0, 0.5);
        }

        /* å¤–å±‚æ»šåŠ¨æ¡æ»‘å—æ¿€æ´» */
        .modal-content::-webkit-scrollbar-thumb:active {
            background: linear-gradient(135deg, #FF6B6B, #FF8C00); /* ç‚¹å‡»æ—¶æœ€äº® */
        }

        /* å¤–å±‚æ»šåŠ¨æ¡è§’è½ */
        .modal-content::-webkit-scrollbar-corner {
            background: #2a2a2a; /* æ»šåŠ¨æ¡è§’è½èƒŒæ™¯ */
        }

        /* ä¸ºå¼¹çª—å†…å®¹åŒºåŸŸä¹Ÿæ·»åŠ æ»šåŠ¨æ¡æ ·å¼ */
        .modal-body {
            padding: 25px;
            color: #CCCCCC;
            line-height: 1.6;
            overflow-y: auto; /* å†…å®¹åŒºåŸŸå•ç‹¬æ»šåŠ¨ */
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
            
            /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
            scrollbar-width: thin;
            scrollbar-color: #8B0000 #333333;
        }

        /* === å¤‡ç”¨æ»šåŠ¨æ¡æ ·å¼ï¼ˆç¡®ä¿ä¸€è‡´æ€§ï¼‰ === */
        /* å†…å®¹åŒºåŸŸæ»šåŠ¨æ¡å®½åº¦ */
        .modal-body::-webkit-scrollbar {
            width: 10px;
        }

        /* å†…å®¹åŒºåŸŸæ»šåŠ¨æ¡è½¨é“ */
        .modal-body::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 5px;
        }

        /* å†…å®¹åŒºåŸŸæ»šåŠ¨æ¡æ»‘å— */
        .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #8B0000, #FF4500);
            border-radius: 5px;
            border: 2px solid #2a2a2a;
        }

        /* å†…å®¹åŒºåŸŸæ»‘å—æ‚¬åœ */
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #FF4500, #FF6B6B);
        }

        /* ==================== ç¦ç”¨çŠ¶æ€æ ·å¼ ==================== */

        /* ç¦ç”¨çŠ¶æ€æ ·å¼ */
        .disabled-section {
            opacity: 0.6;
            pointer-events: none;
        }

        .disabled-section .skin-btn {
            background: #333333;
            color: #666666;
            cursor: not-allowed;
        }

        .disabled-section .skin-btn:hover {
            background: #333333;
        }

        .disabled-section .skin-btn:active {
            background: #333333;
        }

        /* ==================== ç™½å¤©æ¨¡å¼æ ·å¼ ==================== */

        /* ç›‘ç‹±é£æ ¼ç™½å¤©æ¨¡å¼ - ç²¾ç®€ç‰ˆ */
        .light-mode {
            background: #f5f7fa !important;
        }

        .light-mode .gacha-calculator {
            background: transparent !important;
        }

        /* é¡¶éƒ¨èœå• - ç›‘ç‹±é“é—¨é£æ ¼ */
        .light-mode .top-menu-bar {
            background: #2c3e50 !important;
            border-bottom: 3px solid #34495e !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;
        }

        .light-mode .menu-title {
            color: #ecf0f1 !important;
            font-weight: bold;
        }

        .light-mode .menu-btn {
            background: #34495e !important;
            color: #bdc3c7 !important;
            border: 1px solid #4a6572 !important;
            border-radius: 3px !important;
        }

        .light-mode .menu-btn:hover {
            background: #3d566e !important;
            border-color: #5d6d7e !important;
            color: #ecf0f1 !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„æŒ‰é’®æ¿€æ´»çŠ¶æ€ */
        .light-mode .menu-btn.active {
            background: #2980b9 !important;
            border-color: #2980b9 !important;
            color: white !important;
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.5) !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„èœå•åˆ‡æ¢æŒ‰é’®æ ·å¼ */
        .light-mode .menu-toggle-btn {
            background: #ecf0f1;
            color: #2c3e50;
            border: 1px solid #bdc3c7;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .light-mode .menu-toggle-btn:hover {
            background: #d5dbdb;
            border-color: #95a5a6;
            color: #2c3e50;
        }

        .light-mode .menu-toggle-btn.active {
            background: #2980b9;
            border-color: #2980b9;
            color: white;
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.5);
        }

        /* === ç™½å¤©æ¨¡å¼ä¸‹çš„ä¾§è¾¹æ æ ·å¼ === */

        /* ä¾§è¾¹æ å®¹å™¨ */
        .light-mode .side-menu-overlay {
            background: #ffffff;
            border-right: 2px solid #d5dbdb;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .light-mode .side-menu-overlay::after {
            color: #2c3e50;
        }

        /* èœå•å¤´éƒ¨ */
        .light-mode .side-menu-header {
            background: #2c3e50;
            border-bottom: 1px solid #bdc3c7;
        }

        .light-mode .side-menu-header h3 {
            color: #ecf0f1;
        }

        /* èœå•é¡¹ */
        .light-mode .side-menu-item {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            color: #2c3e50;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .light-mode .side-menu-item:hover {
            background: #d5dbdb;
            border-color: #95a5a6;
            color: #2c3e50;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .light-mode .side-menu-item.active {
            background: #2980b9;
            border-color: #2980b9;
            color: white;
            box-shadow: 0 0 15px rgba(41, 128, 185, 0.5);
        }

        /* å¡ç‰‡ - ç‰¢æˆ¿é£æ ¼ */
        .light-mode .card {
            background: #ffffff !important;
            border: 2px solid #d5dbdb !important;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08) !important;
            border-radius: 8px !important;
        }

        .light-mode .card::after {
            color: #2c3e50 !important;
        }

        /* åŒºåŸŸæ ‡é¢˜ - ç›‘ç‹±æ ‡è¯†é£æ ¼ */
        .light-mode .section-header {
            color: #2c3e50 !important;
            font-weight: 600;
        }

        .light-mode .section-header:hover {
            color: #34495e !important;
        }

        .light-mode .collapse-icon {
            color: #2c3e50 !important;
        }

        /* å­åŒºåŸŸ - ç›‘ç‹±åˆ†åŒºé£æ ¼ */
        .light-mode .sub-section {
            background: #f8f9f9 !important;
            border-left: 4px solid #95a5a6 !important;
        }

        .light-mode .sub-title {
            color: #2c3e50 !important;
            font-weight: 600;
        }

        /* å†…å®¹åŒºåŸŸ */
        .light-mode .section-content,
        .light-mode .modal-body,
        .light-mode .result-item,
        .light-mode .item-subtitle,
        .light-mode .custom-tip,
        .light-mode .slider-labels,
        .light-mode .reward-label {
            color: #566573 !important;
        }

        /* è¾“å…¥æ¡† - ç›‘ç‹±è¡¨æ ¼é£æ ¼ */
        .light-mode input,
        .light-mode .resource-input-vertical input,
        .light-mode .character-development-controls input {
            color: #2c3e50 !important;
            background: #fdfefe !important;
            border: 1px solid #d5dbdb !important;
            border-radius: 2px !important;
        }

        .light-mode .slider-value {
            color: #2980b9 !important;
            font-weight: 600;
        }

        /* æŒ‰é’®ç»„ - ç›‘ç‹±æ§åˆ¶é¢æ¿é£æ ¼ */
        .light-mode .training-btn, 
        .light-mode .dispatch-btn,
        .light-mode .main-story-btn,
        .light-mode .ex-btn,
        .light-mode .memory-storm-btn,
        .light-mode .pollution-nest-btn,
        .light-mode .cleanup-operation-btn,
        .light-mode .palma-ruins-btn,
        .light-mode .target-btn,
        .light-mode .rating-btn,
        .light-mode .zero-mirror-btn,
        .light-mode .skin-btn,
        .light-mode .character-dev-btn,
        .light-mode .character-development-btn {
            background: #ecf0f1 !important;
            border: 2px solid #bdc3c7 !important;
            color: #2c3e50 !important;
            border-radius: 3px !important;
        }

        .light-mode .training-btn:hover, 
        .light-mode .dispatch-btn:hover,
        .light-mode .main-story-btn:hover,
        .light-mode .ex-btn:hover,
        .light-mode .memory-storm-btn:hover,
        .light-mode .pollution-nest-btn:hover,
        .light-mode .cleanup-operation-btn:hover,
        .light-mode .palma-ruins-btn:hover,
        .light-mode .target-btn:hover,
        .light-mode .rating-btn:hover,
        .light-mode .zero-mirror-btn:hover,
        .light-mode .skin-btn:hover,
        .light-mode .character-dev-btn:hover,
        .light-mode .character-development-btn:hover {
            border-color: #95a5a6 !important;
            background: #d5dbdb !important;
            color: #2c3e50 !important;
        }

        .light-mode .training-btn.active, 
        .light-mode .dispatch-btn.active,
        .light-mode .main-story-btn.active,
        .light-mode .ex-btn.active,
        .light-mode .memory-storm-btn.active,
        .light-mode .pollution-nest-btn.active,
        .light-mode .cleanup-operation-btn.active,
        .light-mode .palma-ruins-btn.active,
        .light-mode .target-btn.active,
        .light-mode .rating-btn.active,
        .light-mode .zero-mirror-btn.active,
        .light-mode .character-dev-btn.active,
        .light-mode .character-development-btn.active {
            border-color: #2980b9 !important;
            background: #2980b9 !important;
            color: white !important;
        }

        /* å¼€å…³å’Œæ»‘å— */
        .light-mode .switch-group .switch-label {
            color: #566573 !important;
        }

        .light-mode .switch-group .switch-label.active {
            color: #2980b9 !important;
        }

        .light-mode .slider {
            background-color: #bdc3c7 !important;
        }

        .light-mode input:checked + .slider {
            background-color: #2980b9 !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„å¼€å…³æ ‡ç­¾ */
        .light-mode .claimed-switch-label {
            color: #566573;
        }

        /* æ¨¡æ€æ¡† */
        .light-mode .modal-content {
            background: #ffffff !important;
            border: 2px solid #d5dbdb !important;
        }

        .light-mode .modal-header {
            background: #2c3e50 !important;
        }

        .light-mode .modal-title {
            color: #ecf0f1 !important;
        }

        .light-mode .modal-section {
            background: #f8f9f9 !important;
            border-left: 4px solid #95a5a6 !important;
        }

        /* æ»šåŠ¨æ¡ */
        .light-mode .modal-body::-webkit-scrollbar-track {
            background: #ecf0f1 !important;
        }

        .light-mode .modal-body::-webkit-scrollbar-thumb {
            background: #95a5a6 !important;
        }

        /* ç‰¹æ®Šæ¨¡å— */
        .light-mode .summary-section {
            background: #f8f9f9 !important;
            border-left: 4px solid #2980b9 !important;
        }

        .light-mode .summary-label {
            color: #2c3e50 !important;
        }

        .light-mode .summary-value {
            color: #2980b9 !important;
        }

        .light-mode .shop-section {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
        }

        /* ç¡®ä¿æ‰€æœ‰æ–‡æœ¬é¢œè‰²ä¸€è‡´ */
        .light-mode .section-content { color: #566573 !important; }
        .light-mode .modal-body { color: #566573 !important; }
        .light-mode .result-item { color: #566573 !important; }
        .light-mode input { color: #2c3e50 !important; }

        /* ä¿®å¤æ‰€æœ‰èƒŒæ™¯è‰² */
        .light-mode .nightmare-score {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
        }

        .light-mode .action-summary .summary-header,
        .light-mode .permanent-activity .summary-header {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
        }

        .light-mode .data-gap-subsection {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
        }

        /* ä¿®å¤å†…è”æ ·å¼ - è¡ŒåŠ¨çºªè¦å¤´éƒ¨ */
        .action-summary-header {
            background: #2a2a2a !important;
            padding: 12px 15px !important;
            border-radius: 8px !important;
            border: 1px solid #444444 !important;
            margin-bottom: 15px !important;
        }

        .summary-header-inner {
            display: flex !important;
            align-items: center !important;
            gap: 15px !important;
        }

        .action-summary-text {
            font-size: 16px !important;
            font-weight: bold !important;
            color: #FF4500 !important;
            flex: 1 !important;
        }

        .action-summary-crystal {
            font-size: 14px !important;
            font-weight: bold !important;
            color: #1890ff !important;
            white-space: nowrap !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„è¡ŒåŠ¨çºªè¦æ ·å¼ */
        .light-mode .action-summary-header {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
        }

        .light-mode .action-summary-text {
            color: #2c3e50 !important;
        }

        .light-mode .action-summary-crystal {
            color: #2980b9 !important;
        }

        /* ä¿®å¤è®°å¿†å¤ç°æ¨¡å—çš„æ–‡å­—é¢œè‰² - ç™½å¤©æ¨¡å¼ */
        .light-mode .permanent-activity .summary-header {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
        }

        .light-mode .permanent-activity .summary-text {
            color: #2c3e50 !important;
            font-weight: 600 !important;
        }

        .light-mode .permanent-activity .summary-crystal {
            color: #2980b9 !important;
            font-weight: 600 !important;
        }

        /* ä¿®å¤è®°å¿†å¤ç°æ»‘å—ç›¸å…³æ–‡å­— */
        .light-mode .permanent-activity .slider-labels {
            color: #566573 !important;
        }

        .light-mode .permanent-activity .slider-value {
            color: #2980b9 !important;
            font-weight: 600 !important;
        }

        /* ä¿®å¤è®°å¿†å¤ç°æ ‡é¢˜ */
        .light-mode .permanent-activity .sub-title {
            color: #2c3e50 !important;
            font-weight: 600 !important;
        }

        /* ç»Ÿä¸€ä¿®å¤æ‰€æœ‰æ»‘å—æŒ‰é’®çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .score-slider {
            background: #f8f9f9 !important;
        }

        .light-mode .score-slider::-webkit-slider-track {
            background: #bdc3c7 !important;
        }

        .light-mode .score-slider::-moz-range-track {
            background: #bdc3c7 !important;
        }

        .light-mode .score-slider::-webkit-slider-thumb {
            background: #2980b9 !important;
            border: 2px solid #3498db !important;
        }

        .light-mode .score-slider::-moz-range-thumb {
            background: #2980b9 !important;
            border: 2px solid #3498db !important;
        }

        .light-mode .inspection-slider {
            background: #f8f9f9 !important;
        }

        .light-mode .inspection-slider::-webkit-slider-track {
            background: #bdc3c7 !important;
        }

        .light-mode .inspection-slider::-moz-range-track {
            background: #bdc3c7 !important;
        }

        .light-mode .inspection-slider::-webkit-slider-thumb {
            background: #2980b9 !important;
            border: 2px solid #3498db !important;
        }

        .light-mode .inspection-slider::-moz-range-thumb {
            background: #2980b9 !important;
            border: 2px solid #3498db !important;
        }

        /* ç»Ÿä¸€ä¿®å¤æ‰€æœ‰èµ„æºæ˜¾ç¤ºé¡¹çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .resource-input-vertical {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .skin-item.compact {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .character-development-input {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .data-gap-subsection {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .accumulation-item {
            background: #f8f9f9 !important;
            border-radius: 5px !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .nightmare-score {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .shop-section {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        /* ä¿®å¤è¾“å…¥æ¡†åœ¨ç™½å¤©æ¨¡å¼ä¸‹çš„æ ·å¼ */
        .light-mode .resource-input-vertical input,
        .light-mode .character-development-controls input,
        .light-mode input[type="number"] {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
            color: #2c3e50 !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        /* ä¿®å¤æŒ‰é’®åœ¨ç™½å¤©æ¨¡å¼ä¸‹çš„èƒŒæ™¯ */
        .light-mode .skin-btn,
        .light-mode .character-dev-btn,
        .light-mode .certification-btn {
            background: #ecf0f1 !important;
            border: 1px solid #bdc3c7 !important;
            color: #2c3e50 !important;
        }

        .light-mode .skin-btn:hover,
        .light-mode .character-dev-btn:hover,
        .light-mode .certification-btn:hover {
            background: #d5dbdb !important;
            border-color: #95a5a6 !important;
        }

        /* ç»Ÿä¸€ä¿®å¤æ‰€æœ‰èµ„æºæ˜¾ç¤ºé¡¹çš„å­—ä½“é¢œè‰² - ç™½å¤©æ¨¡å¼ */
        .light-mode .resource-input-vertical label,
        .light-mode .skin-item.compact .skin-price,
        .light-mode .character-development-label,
        .light-mode .character-development-value,
        .light-mode .data-gap-title,
        .light-mode .accumulation-item .item-title,
        .light-mode .accumulation-item .item-value,
        .light-mode .accumulation-item .item-subtitle,
        .light-mode .nightmare-score .score-title,
        .light-mode .shop-section .shop-title,
        .light-mode .sub-title,
        .light-mode .data-gap-title,
        .light-mode .slider-value,
        .light-mode .reward-label,
        .light-mode .reward-value {
            color: #2c3e50 !important;
        }

        /* ä¿®å¤ç‰¹å®šé«˜äº®é¢œè‰²çš„æ–‡å­— */
        .light-mode .summary-value,
        .light-mode .item-value,
        .light-mode .character-development-value,
        .light-mode .skin-count,
        .light-mode .slider-value {
            color: #2980b9 !important;
        }

        .light-mode .sub-title,
        .light-mode .data-gap-title,
        .light-mode .shop-title,
        .light-mode .score-title {
            color: #2c3e50 !important;
            font-weight: 600 !important;
        }

        /* ä¿®å¤æè¿°æ€§æ–‡å­—çš„æµ…è‰² */
        .light-mode .item-subtitle,
        .light-mode .custom-tip,
        .light-mode .slider-labels,
        .light-mode .reward-label {
            color: #566573 !important;
        }

        /* ä¿®å¤èµ„æºè½¬æ¢æ–‡å­—çš„é¢œè‰² */
        .light-mode .resource-conversion {
            color: #95a5a6 !important;
        }

        /* ä¿®å¤å¼€å…³æ ‡ç­¾çš„é¢œè‰² */
        .light-mode .switch-label {
            color: #566573 !important;
        }

        .light-mode .switch-label.active {
            color: #2980b9 !important;
            font-weight: bold !important;
        }

        .light-mode .switch-label.inactive {
            color: #95a5a6 !important;
        }

        /* ä¿®å¤é¥¼çŠ¶å›¾æ¨¡å—çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .pie-chart-section {
            background: #ffffff !important;
            border: 2px solid #d5dbdb !important;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08) !important;
        }

        .light-mode .pie-chart-section h3 {
            color: #2c3e50 !important;
        }

        .light-mode .pie-legend {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .legend-text {
            color: #2c3e50 !important;
        }

        .light-mode .legend-total {
            color: #2c3e50 !important;
            border-top-color: #d5dbdb !important;
        }

        /* ä¿®å¤é¥¼çŠ¶å›¾æç¤ºæ¡†çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .pie-tooltip {
            background: rgba(255, 255, 255, 0.95) !important;
            color: #2c3e50 !important;
            border: 1px solid #2980b9 !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15) !important;
        }

        .light-mode .tooltip-details {
            color: #2980b9 !important;
        }

        /* ä¿®å¤é¥¼çŠ¶å›¾å¼•å¯¼çº¿å’Œæ ‡ç­¾ */
        .light-mode .pie-chart-section canvas {
            filter: none !important;
        }

        /* ä¿®å¤é¥¼çŠ¶å›¾æ‰€åœ¨å¡ç‰‡çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .time-section.card {
            background: #ffffff !important;
            border: 2px solid #d5dbdb !important;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08) !important;
        }

        .light-mode .time-section.card::after {
            color: #2c3e50 !important;
        }

        /* ä¿®å¤æ—¶é—´é€‰é¡¹çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .time-option {
            background: #f8f9f9 !important;
            border: 2px solid #d5dbdb !important;
            color: #566573 !important;
        }

        .light-mode .time-option.active {
            border-color: #2980b9 !important;
            background: #e8f4fd !important;
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.2) !important;
        }

        .light-mode .time-title {
            color: #2c3e50 !important;
        }

        .light-mode .time-days {
            color: #2980b9 !important;
        }

        .light-mode .time-date {
            color: #566573 !important;
        }

        /* ä¿®å¤å¼€å…³ç»„çš„ç™½å¤©æ¨¡å¼ */
        .light-mode .switch-group .switch-label {
            color: #566573 !important;
        }

        .light-mode .switch-group .switch-label.active {
            color: #2980b9 !important;
            font-weight: bold !important;
        }

        /* ä¿®å¤é¥¼çŠ¶å›¾åŒºåŸŸçš„æ–‡å­—é¢œè‰² */
        .light-mode .section-header {
            color: #2c3e50 !important;
        }

        .light-mode .collapse-icon {
            color: #2c3e50 !important;
        }

        /* ä¿®å¤å¼‚æ–¹æ™¶ä¿®æ­£ç™½å¤©æ¨¡å¼å­—ä½“é¢œè‰² */
        .light-mode .custom-adjust .resource-input label {
            color: #2c3e50 !important;
        }

        /* ç™½å¤©æ¨¡å¼æ ·å¼ */
        .light-mode .page-header {
            background: #ffffff;          /* é¡µé¢æ ‡é¢˜åŒºåŸŸèƒŒæ™¯å˜ç™½è‰² */
            border: 2px solid #d5dbdb;    /* è¾¹æ¡†å˜ä¸ºæµ…ç°è‰² */
        }

        .light-mode .analysis-content {
            background: #ffffff;          /* å†…å®¹åŒºåŸŸèƒŒæ™¯å˜ç™½è‰² */
            border: 2px solid #d5dbdb;    /* è¾¹æ¡†å˜ä¸ºæµ…ç°è‰² */
        }

        .light-mode .coming-soon h3 {
            color: #2c3e50;              /* å ä½æ ‡é¢˜æ–‡å­—å˜æ·±è“è‰² */
        }

        .light-mode .coming-soon p {
            color: #566573;              /* å ä½æè¿°æ–‡å­—å˜ä¸­ç°è‰² */
        }

        .light-mode .page-header h1 {
            color: #2c3e50;              /* é¡µé¢ä¸»æ ‡é¢˜å˜æ·±è“è‰² */
        }

        .light-mode .page-header p {
            color: #566573;              /* é¡µé¢æè¿°æ–‡å­—å˜ä¸­ç°è‰² */
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„æ’åºæŒ‰é’®æ ·å¼ */
        .light-mode .sort-btn {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            color: #2c3e50;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .light-mode .sort-btn:hover {
            border-color: #95a5a6;
            background: #d5dbdb;
            color: #2c3e50;
        }

        .light-mode .sort-btn.active {
            border-color: #2980b9;
            background: #2980b9;
            color: white;
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.5);
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„ç¤¼åŒ…å®¹å™¨æ ·å¼ */
        .light-mode .package-section {
            background: #ffffff !important;
            border: 2px solid #d5dbdb !important;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08) !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„å›¾è¡¨æ ‡ç­¾ */
        .light-mode .chart-label {
            color: #2c3e50;
        }

        /* === ç™½å¤©æ¨¡å¼ - ç¤¼åŒ…è¯¦æƒ…åŒºåŸŸæ ·å¼ === */
        /* è¯¦æƒ…åŒºåŸŸï¼šæµ…è‰²åŠé€æ˜èƒŒæ™¯ï¼Œæ·±è‰²ç»†è¾¹æ¡† */
        .light-mode .package-detail {
            background: #ffffff;
            border: 2px solid #d5dbdb;
            border-top: none;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        .light-mode .package-detail::before {
            background: linear-gradient(90deg, 
                transparent, 
                #2980b9 20%, 
                #2980b9 80%, 
                transparent
            );
        }

        /* è¯¦æƒ…æ ‡é¢˜ï¼šæ·±è“è‰²æ–‡å­—ï¼Œç¬¦åˆç™½å¤©æ¨¡å¼é˜…è¯»ä¹ æƒ¯ */
        .light-mode .detail-title {
            color: #2c3e50;
        }

        /* è¡¨å¤´è¡Œï¼šæ·±è“è‰²æ–‡å­—ï¼Œä¿æŒæ¸…æ™°å¯è¯» */
        .light-mode .detail-row.header-row {
            color: #2c3e50;
        }

        /* è¯¦æƒ…è¡Œåˆ†éš”çº¿ï¼šæ·±è‰²åŠé€æ˜è¾¹æ¡† */
        .light-mode .detail-row {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* === ç™½å¤©æ¨¡å¼ - é¡µé¢æ•´ä½“æ ·å¼ === */
        /* é¡µé¢æ ‡é¢˜åŒºåŸŸï¼šçº¯ç™½èƒŒæ™¯ï¼Œæµ…ç°è‰²è¾¹æ¡† */
        .light-mode .page-header {
            background: #ffffff;
            border: 2px solid #d5dbdb;
        }

        /* åˆ†æå†…å®¹åŒºåŸŸï¼šçº¯ç™½èƒŒæ™¯ï¼Œç»Ÿä¸€è¾¹æ¡†é£æ ¼ */
        .light-mode .analysis-content {
            background: #ffffff;
            border: 2px solid #d5dbdb;
        }

        /* åˆ†åŒºæ ‡é¢˜ï¼šæ·±è“è‰²æ–‡å­—ï¼Œè“è‰²ä¸‹åˆ’çº¿ */
        .light-mode .section-title {
            color: #2c3e50;
            border-bottom-color: #2980b9;
        }

        /* === ç™½å¤©æ¨¡å¼ - ç¤¼åŒ…å¡ç‰‡æ ·å¼ === */
        /* ç¤¼åŒ…å¡ç‰‡ï¼šæµ…ç°èƒŒæ™¯ï¼Œä¸­æ€§è¾¹æ¡† */
        .light-mode .package-card {
            background: #f8f9f9;
            border: 2px solid #d5dbdb;
        }

        /* ç¤¼åŒ…å›¾ç‰‡è¾¹æ¡†ï¼šç¨æ·±çš„ä¸­æ€§ç°è‰² */
        .light-mode .package-image {
            border: 2px solid #bdc3c7;
        }

        /* ç¤¼åŒ…åç§°ï¼šæ·±è“è‰²ï¼Œä¿æŒä¸“ä¸šæ„Ÿ */
        .light-mode .package-name {
            color: #2c3e50;
        }

        /* === ç™½å¤©æ¨¡å¼ - æ–‡å­—å’Œæ ‡ç­¾æ ·å¼ === */
        /* ç»Ÿè®¡æ ‡ç­¾ï¼šä¸­ç°è‰²ï¼Œæ¬¡çº§ä¿¡æ¯ */
        .light-mode .stat-label {
            color: #566573;
        }

        /* ç»Ÿè®¡æ•°å€¼ï¼šè“è‰²ï¼Œçªå‡ºé‡è¦æ•°æ® */
        .light-mode .stat-value {
            color: #2980b9;
        }

        /* ä»·æ ¼æ ‡ç­¾ï¼šè“è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­— */
        .light-mode .price-tag {
            background: #2980b9;
        }

        /* å›¾è¡¨æ ‡ç­¾ï¼šæ·±è“è‰²ï¼Œç¡®ä¿å¯è¯»æ€§ */
        .light-mode .chart-label {
            color: #2c3e50;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„å¼¹çª—æ ·å¼ */
        /* é®ç½©å±‚èƒŒæ™¯è°ƒæ•´ */
        .light-mode .modal-overlay {
            background: rgba(0, 0, 0, 0.5) !important;
        }

        /* å¼¹çª—å†…å®¹å®¹å™¨æ ·å¼ */
        .light-mode .modal-content {
            background: #ffffff !important;
            border: 2px solid #d5dbdb !important;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15) !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹å¼¹çª—åˆ—è¡¨æ–‡å­—é¢œè‰² */
        .light-mode .modal-list li {
            color: #2c3e50 !important;
        }

        /* å¼¹çª—åŒºåŸŸæ ‡é¢˜é¢œè‰² */
        .light-mode .modal-section-title {
            color: #2c3e50 !important;
        }

        /* é«˜äº®æ–‡å­—é¢œè‰² */
        .light-mode .modal-highlight {
            color: #2980b9 !important;
        }

        /* æ®µè½æ–‡å­—é¢œè‰² */
        .light-mode .modal-body p {
            color: #566573 !important;
        }

        /* å¼¹çª—å¤´éƒ¨æ ·å¼ */
        .light-mode .modal-header {
            background: #2c3e50 !important;
            border-bottom: 1px solid #bdc3c7 !important;
        }

        /* å¼¹çª—ä¸»ä½“å†…å®¹åŒºåŸŸ */
        .light-mode .modal-body {
            background: #ffffff !important;
            color: #566573 !important;
            scrollbar-color: #2980b9 #ecf0f1 !important;
        }

        /* å¼¹çª—åº•éƒ¨æ ·å¼ */
        .light-mode .modal-footer {
            background: #2c3e50 !important;
            border-top: 1px solid #bdc3c7 !important;
        }

        /* å¼¹çª—æ ‡é¢˜æ–‡å­—é¢œè‰² */
        .light-mode .modal-title {
            color: #ecf0f1 !important;
        }

        /* è”ç³»æ–¹å¼æ–‡å­—é¢œè‰² */
        .light-mode .modal-contact {
            color: #ecf0f1 !important;
        }

        /* === ç™½å¤©æ¨¡å¼ä¸‹çš„æ»šåŠ¨æ¡æ ·å¼ === */
        /* ç™½å¤©æ¨¡å¼ä¸‹çš„æ»šåŠ¨æ¡æ ·å¼ */
        .light-mode .modal-body::-webkit-scrollbar-track {
            background: #ecf0f1 !important;
            box-shadow: inset 0 0 3px rgba(0,0,0,0.1) !important;
        }

        /* ç™½å¤©æ¨¡å¼æ»šåŠ¨æ¡æ»‘å— */
        .light-mode .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #2980b9, #3498db) !important;
            border: 2px solid #ecf0f1 !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
        }

        /* ç™½å¤©æ¨¡å¼æ»‘å—æ‚¬åœ */
        .light-mode .modal-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #3498db, #5dade2) !important;
            box-shadow: 0 0 8px rgba(41, 128, 185, 0.5) !important;
        }

        /* ç™½å¤©æ¨¡å¼æ»‘å—æ¿€æ´» */
        .light-mode .modal-body::-webkit-scrollbar-thumb:active {
            background: linear-gradient(135deg, #5dade2, #85c1e9) !important;
        }

        /* ç™½å¤©æ¨¡å¼æ»šåŠ¨æ¡è§’è½ */
        .light-mode .modal-body::-webkit-scrollbar-corner {
            background: #ecf0f1 !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„æ™¶æºç‰¹ä¾›æŒ‰é’® */
        .light-mode .crystal-supply-btn.active {
            border-color: #FFD700 !important;
            background: linear-gradient(135deg, #2980b9, #3498db) !important;
            color: white !important;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5) !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„æ™¶æºç‰¹ä¾›è¾“å…¥æ¡†æ ·å¼ */
        .light-mode .non-first-crystal-supply-input {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
            color: #2c3e50 !important;
        }

        /* ç™½å¤©æ¨¡å¼ä¸‹çš„è¯´æ˜è¡Œæ ·å¼ */
        .light-mode .explanation-row {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
        }

        .light-mode .explanation-text {
            color: #2c3e50 !important;
            font-weight: 500;
        }

        /* ç›‘å¯Ÿå¯†ä»¤ç™½å¤©æ¨¡å¼æ ·å¼ */
        .light-mode .inspection-period-btn {
            background: #ecf0f1 !important;
            border: 2px solid #bdc3c7 !important;
            color: #2c3e50 !important;
            border-radius: 3px !important;
        }

        .light-mode .inspection-period-btn:hover {
            border-color: #95a5a6 !important;
            background: #d5dbdb !important;
            color: #2c3e50 !important;
        }

        .light-mode .inspection-period-btn.active {
            border-color: #2980b9 !important;
            background: #2980b9 !important;
            color: white !important;
            box-shadow: 0 0 10px rgba(41, 128, 185, 0.5) !important;
        }

        .light-mode .inspection-slider-container {
            background: #f8f9f9 !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .inspection-slider-container .slider-labels {
            color: #566573 !important;
        }

        .light-mode .inspection-slider-container .slider-value {
            color: #2980b9 !important;
        }

        .light-mode .reward-info {
            background: #ffffff !important;
            border: 1px solid #d5dbdb !important;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
        }

        .light-mode .reward-label {
            color: #2c3e50 !important;
        }

        .light-mode .reward-value {
            color: #2980b9 !important;
        }

        .light-mode .reward-value.claimed {
            color: #95a5a6 !important;
        }

        /* ç›‘å¯Ÿå¯†ä»¤æ»‘å—ç™½å¤©æ¨¡å¼ */
        .light-mode .inspection-slider {
            background: #f8f9f9 !important;
        }

        .light-mode .inspection-slider::-webkit-slider-track {
            background: #bdc3c7 !important;
        }

        .light-mode .inspection-slider::-moz-range-track {
            background: #bdc3c7 !important;
        }

        .light-mode .inspection-slider::-webkit-slider-thumb {
            background: #2980b9 !important;
            border: 2px solid #3498db !important;
        }

        .light-mode .inspection-slider::-moz-range-thumb {
            background: #2980b9 !important;
            border: 2px solid #3498db !important;
        }

        /* ç›‘å¯Ÿå¯†ä»¤æ»‘å—ç¦ç”¨çŠ¶æ€ç™½å¤©æ¨¡å¼ */
        .light-mode .inspection-slider:disabled {
            opacity: 0.5 !important;
        }

        .light-mode .inspection-slider:disabled::-webkit-slider-thumb {
            background: #95a5a6 !important;
            border: 2px solid #bdc3c7 !important;
        }

        .light-mode .inspection-slider:disabled::-moz-range-thumb {
            background: #95a5a6 !important;
            border: 2px solid #bdc3c7 !important;
        }

        /* ==================== ç§»åŠ¨ç«¯é€‚é… ==================== */

        /* === ä¾§è¾¹æ ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* ç§»åŠ¨ç«¯ä¾§è¾¹èœå•æ”¹ä¸ºè¦†ç›–æ¨¡å¼ */
            .side-menu-overlay {
                width: 250px;
                top: 0;
                z-index: 1001; /* æé«˜å±‚çº§ç¡®ä¿åœ¨å†…å®¹ä¹‹ä¸Š */
                /* ç§»é™¤transformåŠ¨ç”»ï¼Œä½¿ç”¨è¦†ç›–æ•ˆæœ */
            }
            
            /* ç§»åŠ¨ç«¯é¡µé¢åŒ…è£…å™¨ä¸éœ€è¦ç§»åŠ¨ */
            .page-wrapper.with-sidebar {
                margin-left: 0 !important;
            }
            
            /* èœå•å¤´éƒ¨å†…è¾¹è·è°ƒæ•´ */
            .side-menu-header {
                padding: 15px;
            }
            
            .side-menu-header h3 {
                font-size: 16px;
            }
            
            /* èœå•å†…å®¹åŒºåŸŸå†…è¾¹è·è°ƒæ•´ */
            .side-menu-content {
                padding: 15px;
                gap: 10px;
            }
            
            /* èœå•é¡¹æ ·å¼è°ƒæ•´ */
            .side-menu-item {
                padding: 14px 16px;
                font-size: 14px;
            }
            
            /* ç¼©å°é”é“¾è£…é¥° */
            .side-menu-overlay::after {
                font-size: 14px;
                top: -8px;
                right: 8px;
            }
        }

        @media (max-width: 480px) {
            .side-menu-overlay {
                width: 220px;
            }
            
            .side-menu-item {
                padding: 12px 14px;
                font-size: 13px;
            }
            
            .side-menu-content {
                padding: 12px;
                gap: 8px;
            }
        }

        /* === é¡¶éƒ¨èœå•æ ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* é¡¶éƒ¨èœå•æ ç§»åŠ¨ç«¯é€‚é… */
            .top-menu-bar {
                padding: 10px 15px;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 10000;
            }
            
            .menu-title {
                font-size: 20px;
                position: static;
                transform: none;
                text-align: center;
                flex: 1;
            }
            
            .menu-right {
                gap: 10px;
            }
            
            .menu-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        /* === è®¡ç®—å™¨é¡µé¢ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .gacha-calculator {
                margin-top: 60px;
                padding: 10px;
                background: transparent;
            }
            
            .calculator-layout {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .sticky-panel {
                position: sticky;
                top: 70px; /* ç§»åŠ¨ç«¯ä¹Ÿå¢åŠ é¡¶éƒ¨è·ç¦» */
                z-index: 100;
                background: #2a2a2a;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                margin-bottom: 15px;
            }
            
            .card {
                padding: 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            h2 {
                font-size: 16px;
            }
        }

        /* === èµ„æºè¾“å…¥ç»„ä»¶ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .resource-vertical {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 8px;
                margin-top: 10px;
            }
            
            .resource-input-vertical {
                flex-direction: column;
                align-items: center;  /* æ”¹ä¸ºå±…ä¸­å¯¹é½ */
                text-align: center;   /* æ·»åŠ æ–‡æœ¬å±…ä¸­ */
                gap: 8px;
                padding: 8px;         /* æ·»åŠ å†…è¾¹è· */
            }
            
            .resource-input-vertical label {
                min-width: auto;
                justify-content: center;  /* æ ‡ç­¾å†…å®¹å±…ä¸­ */
                gap: 4px;
            }
            
            .resource-input-vertical input {
                width: 100%;
                max-width: 100px;     /* ç¨å¾®ç¼©å°å®½åº¦ */
                text-align: center;   /* è¾“å…¥æ¡†æ–‡å­—å±…ä¸­ */
            }
            
            .resource-input {
                flex-direction: column !important;
                align-items: center !important;  /* æ”¹ä¸ºå±…ä¸­å¯¹é½ */
                gap: 8px !important;
                text-align: center;   /* æ·»åŠ æ–‡æœ¬å±…ä¸­ */
            }
            
            .resource-input label {
                min-width: auto !important;
                margin-bottom: 5px !important;
                justify-content: center !important;  /* æ ‡ç­¾å†…å®¹å±…ä¸­ */
            }
            
            .resource-input input {
                width: 100% !important;
                max-width: 120px !important;
                text-align: center !important;  /* è¾“å…¥æ¡†æ–‡å­—å±…ä¸­ */
            }

            /* å¼‚æ–¹æ™¶ä¿®æ­£ä¿æŒå·¦å¯¹é½ */
            .custom-adjust .resource-input {
                flex-direction: row !important;  /* ä¿æŒæ°´å¹³æ’åˆ— */
                align-items: center !important;
                gap: 10px !important;
                text-align: left !important;  /* å·¦å¯¹é½ */
            }
            
            .custom-adjust .resource-input label {
                min-width: 140px !important;
                margin-bottom: 0 !important;
                justify-content: flex-start !important;  /* å·¦å¯¹é½ */
            }
            
            .custom-adjust .resource-input input {
                width: auto !important;
                max-width: 120px !important;
                text-align: center !important;
            }
        }

        @media (max-width: 480px) {
            /* === å½“å‰èµ„æºæ¨¡å—ç§»åŠ¨ç«¯é€‚é… === */
            
            /* å½“å‰åº“å­˜ï¼šå¼€å…³ä¸æ ‡é¢˜æ˜¾ç¤ºåœ¨1è¡Œ */
            .sub-title-wrapper {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 15px;
                flex-wrap: nowrap;
            }

            .sub-title-wrapper .sub-title {
                margin-bottom: 0;
                flex-shrink: 0;
                white-space: nowrap;
            }

            .sub-title-wrapper .switch-group {
                margin: 0;
                flex-shrink: 0;
            }
            
            /* å¼‚æ–¹æ™¶ã€ç’€ç’¨æ™¶æºå’Œæœç´¢ä»¤çš„è¾“å…¥æ¡†3ä¸ªéƒ½åœ¨1è¡Œ */
            .resource-vertical {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 8px;
                margin-top: 10px;
            }
            
            .resource-input-vertical {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 6px;
                gap: 6px;
                height: auto;
                min-height: auto;
            }
            
            .resource-input-vertical label {
                min-width: auto;
                justify-content: center;
                font-size: 12px;
                gap: 4px;
            }
            
            .resource-input-vertical input {
                width: 70px;
                max-width: 70px;
                padding: 6px;
                font-size: 14px;
            }
            
            /* çš®è‚¤é¢„ç•™çº¢æ™¶ï¼šä¸‰ä¸ª+-æŒ‰é’®æ˜¾ç¤ºåœ¨1è¡Œï¼Œè¶…è¿‡3ä¸ªçš„æŒ‰é’®æ˜¾ç¤ºåœ¨ç¬¬2è¡Œ */
            .skin-reserve-row {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
            }
            
            .skin-item.compact {
                padding: 8px 6px;
            }
            
            .skin-info .skin-price {
                font-size: 11px;
                white-space: nowrap;
            }
            
            .skin-controls {
                gap: 6px;
            }
            
            .skin-btn {
                width: 26px;
                height: 26px;
                font-size: 14px;
            }
            
            .skin-count {
                font-size: 12px;
                min-width: 35px;
            }

            /* å°å±å¹•å¼‚æ–¹æ™¶ä¿®æ­£è¾“å…¥æ¡†é€‚é… */
            .custom-adjust .resource-input input {
                max-width: 100px !important;
                font-size: 14px !important;
            }
            
            .custom-adjust .resource-input label {
                font-size: 14px !important;
            }
        }

        /* === è¶…å°å±å¹•é€‚é… === */
        @media (max-width: 430px) {
            .resource-vertical {
                grid-template-columns: 1fr 1fr 1fr;
                gap: 4px !important;
            }
            
            .resource-input-vertical {
                padding: 4px !important;
                gap: 4px !important;
            }
            
            .resource-input-vertical label {
                font-size: 11px !important;
            }
            
            .resource-input-vertical input {
                width: 60px !important;
                max-width: 60px !important;
                padding: 4px !important;
                font-size: 13px !important;
            }
            
            .sub-title-wrapper .sub-title {
                font-size: 14px !important;
                max-width: 50% !important;
            }
            
            .switch-group .switch-label {
                font-size: 11px !important;
            }
            
            /* çš®è‚¤é¢„ç•™åŒºåŸŸåœ¨è¶…å°å±å¹•é€‚é… */
            .skin-reserve-row {
                grid-template-columns: 1fr 1fr 1fr !important;
                gap: 4px !important;
            }
            
            .skin-item.compact {
                padding: 6px 4px !important;
            }
            
            .skin-info .skin-price {
                font-size: 10px !important;
            }
            
            .skin-controls {
                gap: 4px !important;
            }
            
            .skin-btn {
                width: 22px !important;
                height: 22px !important;
                font-size: 12px !important;
            }
            
            .skin-count {
                font-size: 11px !important;
                min-width: 30px !important;
            }
            
            /* å¼‚æ–¹æ™¶ä¿®æ­£è¾“å…¥æ¡†é€‚é… */
            .custom-adjust .resource-input input {
                max-width: 90px !important;
                font-size: 13px !important;
            }
            
            .custom-adjust .resource-input label {
                font-size: 13px !important;
                min-width: 120px !important;
            }
        }

        /* === è§’è‰²å…»æˆæ¨¡å—ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .character-development-input {
                flex-direction: row;
                align-items: center;
                gap: 10px;
                padding: 10px;
            }

            .character-development-label {
                display: flex;
                align-items: center;
                gap: 4px;
                flex: 1;
                flex-wrap: wrap;
            }

            .character-development-value {
                margin-left: 4px;
                white-space: nowrap;
            }

            .character-development-controls {
                align-self: center;
                flex-shrink: 0;
            }

            .character-development-controls input {
                width: 65px;
            }
        }

        @media (max-width: 480px) {
            .character-development-input {
                padding: 8px 10px;
                gap: 8px;
            }

            .character-development-label {
                font-size: 13px;
                gap: 3px;
            }

            .character-development-value {
                font-size: 13px;
                margin-left: 3px;
            }

            .character-development-controls input {
                width: 60px;
                padding: 6px;
                font-size: 13px;
            }
        }

        /* === å„ç§æŒ‰é’®ç»„ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* æ´¾é£å£°æœ›æŒ‰é’® */
            .dispatch-columns {
                grid-template-columns: 1fr 1fr;
            }

            .dispatch-btn {
                font-size: 11px;
                padding: 8px 6px;
            }
            
            /* ä¸»çº¿å‰§æƒ…æŒ‰é’® */
            .main-story-columns {
                grid-template-columns: 1fr 1fr;
            }

            .main-story-btn {
                font-size: 11px;
                padding: 8px 6px;
            }
            
            /* ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰æŒ‰é’® */
            .ex-columns {
                grid-template-columns: 1fr 1fr;
            }

            .ex-btn {
                font-size: 11px;
                padding: 8px 6px;
            }
            
            /* ä¸‰åˆ—ç½‘æ ¼æŒ‰é’®ç»„ */
            .memory-storm-buttons,
            .pollution-nest-buttons,
            .cleanup-operation-buttons {
                grid-template-columns: 1fr 1fr;
            }

            .memory-storm-btn,
            .pollution-nest-btn,
            .cleanup-operation-btn {
                font-size: 12px;
                padding: 8px 6px;
            }
            
            /* å¸•å°”é©¬åºŸå¢ŸæŒ‰é’® */
            .palma-ruins-row {
                grid-template-columns: 1fr 1fr;
            }

            .palma-ruins-btn {
                font-size: 12px;
                padding: 8px 6px;
            }
            
            /* é›¶é•œç³»ç»ŸæŒ‰é’® */
            .zero-mirror-columns {
                grid-template-columns: 1fr 1fr;
            }

            .zero-mirror-btn {
                font-size: 11px;
                padding: 8px 6px;
            }
            
            .target-buttons {
                grid-template-columns: 1fr;
            }
            
            .rating-buttons {
                grid-template-columns: 1fr;
            }
            
            .target-btn, .rating-btn {
                font-size: 12px;
                padding: 8px 6px;
            }
        }

        @media (max-width: 480px) {
            .dispatch-btn {
                font-size: 10px;
                padding: 6px 4px;
            }
            
            .main-story-btn {
                font-size: 10px;
                padding: 6px 4px;
            }
            
            .ex-btn {
                font-size: 10px;
                padding: 6px 4px;
            }
            
            .memory-storm-btn,
            .pollution-nest-btn,
            .cleanup-operation-btn,
            .palma-ruins-btn {
                font-size: 11px;
                padding: 6px 4px;
            }
            
            .zero-mirror-btn {
                font-size: 10px;
                padding: 6px 4px;
            }
            
            .target-btn, .rating-btn {
                font-size: 11px;
                padding: 6px 4px;
            }
        }

        /* === æ—¥å¸¸ç§¯ç´¯é¡¹ç›®ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* æ—¥å¸¸ç§¯ç´¯æ¨¡å—ï¼šé‡æ–°è®¾è®¡å¸ƒå±€ */
            .accumulation-item {
                display: flex;
                align-items: center;
                justify-content: flex-start; /* æ”¹ä¸ºå·¦å¯¹é½ */
                flex-wrap: nowrap;
                gap: 10px;
                min-width: 0;
            }
            
            .accumulation-item .item-info {
                flex: 1;
                display: flex;
                align-items: center;
                gap: 8px;
                margin-bottom: 0;
                min-width: 0;
                overflow: hidden;
                justify-content: flex-start; /* ç¡®ä¿å†…å®¹å·¦å¯¹é½ */
            }
            
            .accumulation-item .item-title {
                min-width: auto;
                white-space: nowrap;
                flex-shrink: 0;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .accumulation-item .item-value {
                margin-left: 0; /* ç§»é™¤autoï¼Œæ”¹ä¸ºå›ºå®šé—´è· */
                white-space: nowrap;
                flex-shrink: 0;
                overflow: hidden;
                text-overflow: ellipsis;
                /* æ·»åŠ ä¸æ–‡æœ¬çš„é—´è· */
                margin-left: 8px;
            }
            
            .accumulation-item .switch-group.small {
                margin: 0;
                flex-shrink: 0;
                min-width: fit-content;
                /* ç¡®ä¿å¼€å…³åœ¨å³ä¾§ */
                margin-left: auto;
            }

            /* å¤šé¡¹åˆé‡‘å…‘æ¢çš„è¡Œå¸ƒå±€ */
            .accumulation-item .item-row {
                display: flex;
                align-items: center;
                justify-content: space-between;
                width: 100%;
            }
            
            /* å·¦ä¾§å†…å®¹ */
            .accumulation-item .item-info {
                display: flex;
                align-items: center;
                gap: 8px;
                flex-shrink: 0;
            }
            
            /* å³ä¾§è¾“å…¥æ¡†é å³ */
            .accumulation-item .certification-controls {
                margin-left: auto;
                flex-shrink: 0;
            }
            
            /* è¾“å…¥æ¡†å®½åº¦ */
            .accumulation-item .certification-controls input {
                width: 80px;
                padding: 6px 8px;
            }            
        }

        @media (max-width: 480px) {
            /* æ—¥å¸¸ç§¯ç´¯æ¨¡å—ï¼šå°å±å¹•è¿›ä¸€æ­¥ä¼˜åŒ– */
            .accumulation-item {
                gap: 6px;
            }
            
            .accumulation-item .item-info {
                gap: 4px;
                flex: 1; /* ç¡®ä¿ä¿¡æ¯åŒºåŸŸå æ®å‰©ä½™ç©ºé—´ */
            }
            
            .accumulation-item .item-title {
                font-size: 12px;
                max-width: 120px;
            }
            
            .accumulation-item .item-value {
                font-size: 12px;
                max-width: 80px;
                margin-left: 4px; /* å°å±å¹•å‡å°‘é—´è· */
            }
            
            .switch-group.small .switch-label {
                font-size: 10px;
            }

            /* å¤šé¡¹åˆé‡‘è¾“å…¥æ¡†æ›´çª„ */
            .accumulation-item .certification-controls input {
                width: 70px;
                padding: 4px 6px;
                font-size: 12px;
            }
            
            .accumulation-item .item-info {
                gap: 4px;
            }            
        }

        /* === æš—åŸŸå¼€å…³æ ·å¼ === */        
        /* æ ‡é¢˜ä¸å¼€å…³åŒè¡Œå¸ƒå±€ */
        .sub-title-with-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 8px 0;
        }

        .sub-title-with-switch .sub-title {
            margin: 0;
            display: flex;
            align-items: center;
        }

        /* æ ‡é¢˜å¼€å…³ç»„ - ä¸ä¸‹æ–¹å¼€å…³ç²¾ç¡®å¯¹é½ */
        .title-switch-group,
        .item-switch-group {
            display: flex;
            align-items: center;
            min-width: 120px; /* ç¡®ä¿æ‰€æœ‰å¼€å…³ç»„ç›¸åŒå®½åº¦ */
            justify-content: flex-end;
        }

        /* ç¡®ä¿æ‰€æœ‰å¼€å…³ç»„å†…éƒ¨å¯¹é½ */
        .title-switch-group .switch-group,
        .item-switch-group .switch-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0;
        }

        /* æš—åŸŸé¡¹ç›®å¸ƒå±€ */
        .dark-zone-section .accumulation-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .sub-title-with-switch {
                align-items: center;
            }
            
            .title-switch-group,
            .item-switch-group {
                min-width: 110px;
            }
        }

        @media (max-width: 480px) {
            .title-switch-group,
            .item-switch-group {
                min-width: 100px;
            }
            
            .title-switch-group .switch-label,
            .item-switch-group .switch-label {
                font-size: 12px;
            }
        }

        /* === æ—¶é—´é€‰é¡¹ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .time-options {
                flex-direction: row;
                gap: 8px;
            }

            .time-option {
                padding: 10px;
            }

            .time-title {
                font-size: 13px;
            }

            .time-date {
                font-size: 11px;
            }

            .time-days {
                font-size: 13px;
            }

            .time-weeks {
                font-size: 11px;
            }
        }

        /* === è®¤è¯æ§åˆ¶å’Œè®­ç»ƒæŒ‰é’®ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            
            /* ä¸“é—¨é’ˆå¯¹æ´»åŠ¨æ¨¡å—ä¸­çš„å¤åˆ»æŒ‰é’®è°ƒæ•´ */
            .accumulation-item .training-buttons {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                margin-top: 10px;
            }
            
            .accumulation-item .training-btn {
                font-size: 12px;
                padding: 10px 6px;
                min-height: auto;
                white-space: normal;
                line-height: 1.3;
            }
        }

        @media (max-width: 480px) {
            /* ä¸“é—¨é’ˆå¯¹æ´»åŠ¨æ¨¡å—ä¸­çš„å¤åˆ»æŒ‰é’®è°ƒæ•´ */
            .accumulation-item .training-buttons {
                grid-template-columns: 1fr 1fr;
                gap: 6px;
                margin-top: 8px;
            }
            
            .accumulation-item .training-btn {
                font-size: 11px;
                padding: 8px 4px;
                min-height: auto;
                white-space: normal;
                line-height: 1.2;
            }
            
            /* è°ƒæ•´å¤åˆ»æŒ‰é’®ä¸­çš„å›¾æ ‡å¤§å° */
            .accumulation-item .training-btn .resource-icon {
                width: 16px;
                height: 16px;
            }
        }

        /* === ç»“æœå±•ç¤ºç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .summary-section {
                padding: 10px;
            }
            
            .summary-item {
                font-size: 14px;
            }
            
            .result-item.simple {
                font-size: 16px;
            }
            
            .result-item.highlight {
                font-size: 18px;
            }
        }

        @media (max-width: 480px) {
            .summary-item {
                font-size: 13px;
            }
            
            .resource-input-vertical label {
                font-size: 13px;
            }
            
            .sub-section {
                padding: 10px;
            }
        }

        /* === èµ„æºå›¾æ ‡ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .resource-icon {
                width: 22px;
                height: 22px;
            }
            
            .resource-icon.small {
                width: 18px;
                height: 18px;
            }
        }

        @media (max-width: 480px) {
            .resource-icon {
                width: 18px;
                height: 18px;
            }
            
            .resource-icon.small {
                width: 16px;
                height: 16px;
            }
        }

        /* === é¥¼çŠ¶å›¾ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* é¥¼çŠ¶å›¾768pxé€‚é…æ ·å¼ - ä¿®æ”¹å›¾ä¾‹ä¸º2åˆ—æ˜¾ç¤ºå¹¶æ”¾å¤§å­—ä½“ */
            .pie-chart-container {
                flex-direction: column !important;
                gap: 15px !important;
                align-items: center !important;
            }

            .pie-canvas-wrapper {
                width: 100% !important;
                height: 200px !important;
            }

            .pie-legend {
                width: 100% !important;
                max-height: 180px !important; /* å¢åŠ é«˜åº¦é€‚åº”æ›´å¤§å­—ä½“ */
                margin-top: 10px !important;
                justify-content: flex-start !important;
                padding: 12px !important; /* å¢åŠ å†…è¾¹è· */
            }

            .pie-canvas {
                width: 100% !important;
                height: 100% !important;
            }

            /* å›¾ä¾‹é¡¹æ”¹ä¸º2åˆ—ç½‘æ ¼å¸ƒå±€ */
            .legend-items {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* 2åˆ—å¸ƒå±€ */
                gap: 10px !important; /* å¢åŠ é—´è· */
            }

            .legend-item {
                margin-bottom: 8px !important; /* å¢åŠ é—´è· */
                display: flex !important;
                align-items: center !important;
                min-height: 20px !important; /* ç¡®ä¿æœ‰è¶³å¤Ÿé«˜åº¦ */
            }

            .legend-text {
                font-size: 13px !important; /* æ”¾å¤§å­—ä½“ */
                line-height: 1.3 !important; /* å¢åŠ è¡Œé«˜ */
                font-weight: 500 !important; /* ç¨å¾®åŠ ç²— */
            }

            .legend-color {
                width: 14px !important; /* å¢å¤§é¢œè‰²å— */
                height: 14px !important; /* å¢å¤§é¢œè‰²å— */
                margin-right: 8px !important; /* å¢åŠ å³è¾¹è· */
            }
        }

        @media (max-width: 480px) {
            /* é¥¼çŠ¶å›¾480pxé€‚é…æ ·å¼ */
            .pie-chart-section {
                padding: 8px !important;
                min-height: 250px !important;
            }

            .pie-chart-section h3 {
                font-size: 14px !important;
                margin-bottom: 8px !important;
            }

            .pie-canvas-wrapper {
                height: 180px !important;
            }

            /* å°å±å¹•é¥¼çŠ¶å›¾å›¾ä¾‹ä¼˜åŒ– */
            .pie-legend {
                max-height: 160px !important; /* é€‚å½“å¢åŠ é«˜åº¦ */
                padding: 8px !important; /* å¢åŠ å†…è¾¹è· */
            }

            .legend-items {
                grid-template-columns: 1fr 1fr !important; /* ä¿æŒ2åˆ—å¸ƒå±€ */
                gap: 6px !important; /* é€‚å½“é—´è· */
            }

            .legend-item {
                margin-bottom: 4px !important;
                padding: 2px 4px !important; /* å¢åŠ å†…è¾¹è· */
            }

            .legend-text {
                font-size: 11px !important; /* æ¯”åŸæ¥å¤§ï¼Œä½†æ¯”768pxçš„å° */
                line-height: 1.2 !important;
            }

            .legend-color {
                width: 12px !important;
                height: 12px !important;
                margin-right: 6px !important;
            }
            
            .legend-total {
                font-size: 12px !important; /* æ”¾å¤§å­—ä½“ */
                margin-top: 12px !important; /* å¢åŠ ä¸Šè¾¹è· */
                padding-top: 8px !important; /* å¢åŠ ä¸Šå†…è¾¹è· */
                font-weight: bold !important; /* åŠ ç²— */
                grid-column: 1 / -1 !important; /* è·¨ä¸¤åˆ—æ˜¾ç¤º */
                text-align: center !important; /* å±…ä¸­å¯¹é½ */
            }
        }

        @media (max-width: 360px) {
            .pie-chart-container {
                flex-direction: column !important;
                gap: 10px !important;
            }
        }

        /* === æ™¶æºç‰¹ä¾›ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .crystal-supply-buttons {
                grid-template-columns: 1fr !important;
                gap: 8px !important;
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box !important;
                min-width: 0 !important;
            }
            
            /* å¤æ°ªé‡‘æ¨¡å—çˆ¶å®¹å™¨ */
            .potential-section.card .section-content {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: hidden !important;
                /* å…³é”®ï¼šé˜²æ­¢å†…å®¹æº¢å‡ºå½±å“å…¶ä»–æ¨¡å— */
                contain: layout !important;
            }

            /* ç¡®ä¿æ‰€æœ‰æ°ªé‡‘å­æ¨¡å—ä¸æº¢å‡º */
            .recharge .sub-section {
                max-width: 100% !important;
                overflow: hidden !important;
            }            

            .crystal-supply-btn-wrapper {
                max-width: 100% !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }
            
            .training-btn.crystal-supply-btn {
                min-width: 0 !important;
                flex: 1 !important;
                max-width: calc(100% - 70px) !important; /* ä¸ºè¾“å…¥æ¡†ç•™å‡ºç©ºé—´ */
            }
            
            /* æ™¶æºç‰¹ä¾›æŒ‰é’®ç§»åŠ¨ç«¯é€‚é… */
            .crystal-supply-left,
            .crystal-supply-right {
                min-width: 0 !important;
                flex-shrink: 1 !important;
            }
            
            .crystal-supply-left .price-tag,
            .crystal-supply-right span {
                font-size: 11px !important;
                white-space: nowrap !important;
            }
            
            /* åªè°ƒæ•´ä»·æ ¼å­—ä½“å¤§å°ï¼Œä¿æŒåŸæœ‰å¸ƒå±€ */
            .crystal-supply-btn-wrapper > div > div:last-child > div:last-child {
                font-size: 11px !important;
                margin-top: 4px !important;
                line-height: 1.2 !important;
            }
            
            /* ä¿®å¤æ°ªé‡‘èµ„æºæ¨¡å—åœ¨ç§»åŠ¨ç«¯å˜å®½çš„é—®é¢˜ */
            .crystal-supply-btn-wrapper > div {
                max-width: 100% !important;
                width: 100% !important;
                box-sizing: border-box !important;
                display: flex !important;
                align-items: stretch !important;
                flex-wrap: nowrap !important;
            }
            
            /* ç¡®ä¿è¾“å…¥æ¡†å®¹å™¨å›ºå®šå®½åº¦ */
            .crystal-supply-btn-wrapper > div > div:last-child {
                min-width: 60px !important;
                max-width: 60px !important;
                flex-shrink: 0 !important;
            }
            
            /* é˜²æ­¢flexå­å…ƒç´ æº¢å‡º */
            .crystal-supply-btn-wrapper > div > * {
                flex-shrink: 1 !important;
                min-width: 0 !important;
            }
        }

        @media (max-width: 480px) {
            .crystal-supply-buttons {
                gap: 6px !important;
            }
            
            .crystal-supply-btn-wrapper > div {
                gap: 6px !important;
            }
            
            .training-btn.crystal-supply-btn {
                padding: 10px 6px !important;
            }
            
            .crystal-supply-left .price-tag,
            .crystal-supply-right span {
                font-size: 10px !important;
            }
            
            /* è¾“å…¥æ¡†åœ¨å°å±å¹•ä¸Šç¨å¾®è°ƒå° */
            .crystal-supply-btn-wrapper input[type="number"] {
                width: 45px !important;
                padding: 6px 4px !important; /* ä¿æŒåŸæœ‰padding */
                font-size: 13px !important;
            }
            
            .crystal-supply-btn-wrapper > div > div:last-child {
                min-width: 55px !important;
            }
            
            /* å°å±å¹•ä»·æ ¼å­—ä½“ç¨å¾®ç¼©å° */
            .crystal-supply-btn-wrapper > div > div:last-child > div:last-child {
                font-size: 10px !important;
            }      

            /* ä¿®å¤å°å±å¹•ä¸Šæ°ªé‡‘èµ„æºæ¨¡å—çš„å¸ƒå±€ */
            .crystal-supply-btn-wrapper > div {
                flex-wrap: nowrap !important;
                justify-content: space-between !important;
                gap: 6px !important;
            }
            
            .training-btn.crystal-supply-btn {
                min-width: 0 !important;
                flex: 1 !important;
                max-width: calc(100% - 66px) !important;
                padding: 10px 6px !important;
            }
            
            .crystal-supply-btn-wrapper > div > div:last-child {
                min-width: 60px !important;
                max-width: 60px !important;
                flex-shrink: 0 !important;
            }
            
            /* å¼ºåˆ¶é™åˆ¶æ–‡æœ¬ä¸æ¢è¡Œ */
            .crystal-supply-left .price-tag,
            .crystal-supply-right span {
                font-size: 10px !important;
                white-space: nowrap !important;
                overflow: hidden !important;
                text-overflow: ellipsis !important;
            }
            
            /* ç¡®ä¿æŒ‰é’®å†…å®¹ä¸æº¢å‡º */
            .training-btn.crystal-supply-btn {
                white-space: nowrap !important;
                overflow: hidden !important;
            }
        }

        /* === è¶…å°å±å¹•é€‚é… === */
        @media (max-width: 430px) {
            .crystal-supply-buttons {
                gap: 4px !important;
            }
            
            .crystal-supply-btn-wrapper > div {
                gap: 4px !important;
            }
            
            .training-btn.crystal-supply-btn {
                padding: 8px 4px !important;
                font-size: 12px !important;
            }
            
            .crystal-supply-left .price-tag,
            .crystal-supply-right span {
                font-size: 9px !important;
            }
            
            /* è¾“å…¥æ¡†åœ¨è¶…å°å±å¹•ä¸Šè¿›ä¸€æ­¥ç¼©å° */
            .crystal-supply-btn-wrapper input[type="number"] {
                width: 40px !important;
                padding: 4px 2px !important;
                font-size: 12px !important;
            }
            
            .crystal-supply-btn-wrapper > div > div:last-child {
                min-width: 50px !important;
                max-width: 50px !important;
            }
            
            /* è¶…å°å±å¹•ä»·æ ¼å­—ä½“è¿›ä¸€æ­¥ç¼©å° */
            .crystal-supply-btn-wrapper > div > div:last-child > div:last-child {
                font-size: 9px !important;
            }
            
            .training-btn.crystal-supply-btn {
                max-width: calc(100% - 54px) !important;
                padding: 8px 4px !important;
            }
            
            /* èµ„æºå›¾æ ‡åœ¨è¶…å°å±å¹•ä¸Šç¼©å° */
            .crystal-supply-btn-wrapper .resource-icon {
                width: 16px !important;
                height: 16px !important;
            }
            
            /* ç¡®ä¿æ‰€æœ‰æ–‡æœ¬å†…å®¹ä¸æ¢è¡Œä¸”ä¸æº¢å‡º */
            .crystal-supply-left,
            .crystal-supply-right {
                overflow: hidden !important;
                text-overflow: ellipsis !important;
            }
            
            /* å¼ºåˆ¶æŒ‰é’®å†…å®¹å•è¡Œæ˜¾ç¤º */
            .training-btn.crystal-supply-btn > div {
                display: flex !important;
                align-items: center !important;
                gap: 2px !important;
                overflow: hidden !important;
            }
            
            /* ä»·æ ¼æ ‡ç­¾è¿›ä¸€æ­¥ä¼˜åŒ– */
            .price-tag {
                font-size: 8px !important;
                padding: 1px 4px !important;
            }
        }

        /* === ç¤¼åŒ…æ€§ä»·æ¯”é¡µé¢ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* ç¤¼åŒ…æ€§ä»·æ¯”é¡µé¢æ•´ä½“è°ƒæ•´ */
            .value-analysis-page {
                padding: 10px;
                margin-top: 60px;
            }
            
            /* é¡µé¢æ ‡é¢˜åŒºåŸŸè°ƒæ•´ */
            .page-header {
                padding: 15px;
                margin-bottom: 20px;
            }
            
            /* é¡µé¢ä¸»æ ‡é¢˜å­—ä½“å¤§å°è°ƒæ•´ */
            .page-header h1 {
                font-size: 24px;
            }
            
            .analysis-content {
                padding: 30px 15px;
            }
            
            .coming-soon {
                padding: 40px 15px;
            }
            
            .coming-soon h3 {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            /* === é¡µé¢æ•´ä½“å¸ƒå±€è°ƒæ•´ === */
            .value-analysis-page {
                padding: 5px;
                margin-top: 55px;
            }
            
            .page-header {
                padding: 10px;
                margin-bottom: 15px;
            }
            
            .page-header h1 {
                font-size: 18px;
            }
            
            .page-header p {
                font-size: 12px;
            }
            
            .analysis-content {
                padding: 12px 8px;
            }
            
            /* === ç¤¼åŒ…å®¹å™¨åŒºåŸŸ === */
            .package-section {
                padding: 15px 0;
                margin: 0 auto 20px;
                width: 100%;
                box-sizing: border-box;
            }
            
            /* === æ’åºæ§åˆ¶åŒºåŸŸ - ç¡®ä¿ä¸ç¤¼åŒ…å¡ç‰‡å®½åº¦ä¸€è‡´ === */
            .sort-controls-container {
                margin-bottom: 12px;
                padding: 0 8px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .sort-buttons {
                gap: 3px;
                width: 100%;
                padding: 0;
                margin: 0;
            }
            
            .sort-btn {
                padding: 4px 5px;
                font-size: 9px;
                min-height: 30px;
                line-height: 1.2;
            }
            
            /* === ç¤¼åŒ…ç½‘æ ¼å’Œå¡ç‰‡å¸ƒå±€ - å…³é”®ä¿®æ”¹ === */
            .package-grid {
                grid-template-columns: 1fr;
                gap: 6px;
                padding: 0 8px;
                width: 100%;
                max-width: 100%;
                min-width: 0;
                box-sizing: border-box;
            }
            
            .package-container {
                margin-bottom: 6px;
                width: 100%;
                box-sizing: border-box;
                overflow: hidden;
                padding: 0;
            }
            
            /* ç¤¼åŒ…å¡ç‰‡ä¿æŒæ°´å¹³æ’åˆ— */
            .package-card {
                flex-direction: row;
                padding: 8px;
                gap: 4px;
                align-items: center;
                width: 100%;
                box-sizing: border-box;
                margin: 0;
                min-width: 0;
                justify-content: space-between;
                overflow: hidden;
            }
            
            /* === ç¤¼åŒ…å›¾ç‰‡åŒºåŸŸ === */
            .package-image {
                width: 70px;
                height: 70px;
                flex-shrink: 0;
                min-width: 0;
            }
            
            /* === ç¤¼åŒ…ä¿¡æ¯åŒºåŸŸ === */
            .package-info {
                align-items: flex-start;
                text-align: left;
                gap: 6px;
                flex: 1;
                min-width: 0;
                overflow: hidden;
                margin-right: 0;
                padding-right: 0;
            }
            
            .package-stats {
                align-items: flex-start;
                gap: 4px;
                margin: 0;
                padding: 0;
            }
            
            .package-name {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .stat-item {
                gap: 4px;
                line-height: 1.2;
                margin: 0;
            }
            
            .stat-value {
                font-size: 11px;
                white-space: nowrap;
            }
            
            .stat-label {
                font-size: 10px;
                white-space: nowrap;
            }
            
            .price-tag-container {
                margin-top: 4px;
            }
            
            .price-tag {
                font-size: 10px;
                padding: 2px 5px;
                white-space: nowrap;
            }
            
            /* === æ¡å½¢å›¾åŒºåŸŸ === */
            .package-chart {
                flex-shrink: 1;
                gap: 10px;
                padding: 0;
                margin: 0;
                min-width: 0;
                margin-left: 0;
                padding-left: 0;
            }
            
            .chart-item {
                justify-content: space-between;
                gap: 4px;
                line-height: 1.2;
            }
            
            .chart-label {
                font-size: 9px;
                width: 32px;
                text-align: left;
                white-space: nowrap;
            }
            
            .chart-bar-container {
                height: 14px;
                min-width: 55px;
            }
            
            .chart-bar {
                min-width: 20px;
            }
            
            .chart-percentage {
                font-size: 8px;
                margin-left: 2px;
                white-space: nowrap;
            }
            
            /* === è¯¦æƒ…åŒºåŸŸ === */
            .package-detail {
                width: calc(100% - 16px);
                margin: 0 auto;
                padding: 10px 6px 6px;
                box-sizing: border-box;
            }
            
            .package-detail::before {
                left: 8px;
                right: 8px;
            }
            
            .detail-content {
                gap: 4px;
            }
            
            .detail-header {
                margin-bottom: 8px;
            }
            
            .detail-title {
                font-size: 11px;
            }
            
            .detail-row {
                padding: 4px 0;
                font-size: 10px;
                line-height: 1.2;
            }
            
            .detail-row.header-row {
                font-size: 9px;
            }
            
            .col-name {
                flex: 1.5;
                font-size: 9px;
                gap: 4px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            .col-quantity,
            .col-value,
            .col-percentage {
                flex: 1;
                font-size: 9px;
                white-space: nowrap;
            }
            
            .item-icon {
                width: 12px;
                height: 12px;
                flex-shrink: 0;
            }
            
            /* === åˆ†åŒºæ ‡é¢˜ === */
            .section-title {
                font-size: 14px;
                margin-bottom: 10px;
                padding-bottom: 5px;
                padding: 0 8px;
            }
        }

        /* === è¶…å°å±å¹•é€‚é… === */
        @media (max-width: 430px) {
            .package-card {
                padding: 6px;
                gap: 4px;
            }
            
            /* ç¼©å°å›¾ç‰‡åŒºåŸŸ */
            .package-image {
                width: 50px;
                height: 50px;
                min-width: 50px;
            }
            
            /* ç¼©å°ä¿¡æ¯åŒºåŸŸ */
            .package-info {
                gap: 4px;
                min-width: 0;
                flex: 1;
            }
            
            .package-stats {
                gap: 2px;
            }
            
            .package-name {
                font-size: 11px;
            }
            
            .stat-item {
                gap: 3px;
            }
            
            .stat-value {
                font-size: 10px;
            }
            
            .stat-label {
                font-size: 9px;
            }
            
            .price-tag {
                font-size: 9px;
                padding: 1px 4px;
            }
            
            /* å¤§å¹…ç¼©å°æ¡å½¢å›¾åŒºåŸŸ */
            .package-chart {
                gap: 4px;
                min-width: 80px;
                max-width: 80px;
                flex-shrink: 0;
            }
            
            .chart-item {
                gap: 3px;
            }
            
            .chart-label {
                font-size: 8px;
                width: 25px;
            }
            
            .chart-bar-container {
                height: 12px;
                min-width: 40px;
            }
            
            .chart-bar {
                min-width: 15px;
            }
            
            .chart-percentage {
                font-size: 7px;
                margin-left: 2px;
                min-width: 18px;
            }
        }

        /* === æ’åºæ§åˆ¶ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .sort-controls-container {
                padding: 0 15px;
                margin-bottom: 15px;
            }
            
            .sort-buttons {
                gap: 8px; /* ç¼©å°é—´è· */
                display: grid;
                grid-template-columns: 1fr 1fr 1fr; /* æ”¹ä¸º3åˆ—ç½‘æ ¼å¸ƒå±€ */
                width: 100%;
            }
            
            .sort-btn {
                padding: 8px 10px; /* ç¼©å°å†…è¾¹è· */
                font-size: 12px; /* ç¼©å°å­—ä½“ */
                min-height: 40px; /* è®¾ç½®æœ€å°é«˜åº¦ */
                white-space: nowrap; /* é˜²æ­¢æ–‡å­—æ¢è¡Œ */
                overflow: hidden;
                text-overflow: ellipsis;
                text-align: center;
                width: 100%; /* ç¡®ä¿å¡«æ»¡ç½‘æ ¼å•å…ƒæ ¼ */
            }
            
            .package-grid {
                grid-template-columns: 1fr;
                padding: 0 15px;
                gap: 10px;
            }
        }    

        @media (max-width: 480px) {
            .sort-buttons {
                gap: 6px;
            }
            
            .sort-btn {
                padding: 6px 8px;
                font-size: 11px;
                min-height: 36px;
            }
        }

        @media (max-width: 360px) {
            .sort-buttons {
                gap: 4px;
            }
            
            .sort-btn {
                padding: 5px 6px;
                font-size: 10px;
                min-height: 34px;
            }
        }

        @media (max-width: 320px) {
            .sort-buttons {
                gap: 3px;
            }
            
            .sort-btn {
                padding: 4px 5px;
                font-size: 9px;
                min-height: 32px;
                letter-spacing: -0.5px;
            }
        }

        /* === å¼¹çª—æ¨¡æ€æ¡†ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            /* é˜²æ­¢ç§»åŠ¨ç«¯å¸ƒå±€æº¢å‡º */            
            .potential-section.card {
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box !important;
                overflow: hidden !important;
            }
            
            .section-content {
                width: 100% !important; /* å†…å®¹åŒºåŸŸå…¨å®½ */
                max-width: 100% !important; /* é˜²æ­¢è¶…å‡ºå®¹å™¨ */
                box-sizing: border-box !important; /* ç»Ÿä¸€çš„ç›’æ¨¡å‹ */
            }
            
            /* ç¡®ä¿æ‰€æœ‰å­å…ƒç´ ä¸è¶…å‡ºå®¹å™¨ */
            .section-content > * {
                max-width: 100% !important;
                box-sizing: border-box !important;
            }

            /* å¼¹çª—å®¹å™¨ç§»åŠ¨ç«¯é€‚é… */
            .modal-content {
                width: 95%;
                max-height: 85vh;
                margin: 10px;
            }
            
            /* å¼¹çª—å¤´éƒ¨ç§»åŠ¨ç«¯ä¼˜åŒ– */
            .modal-header {
                padding: 15px;
            }
            
            /* å¼¹çª—ä¸»ä½“å†…å®¹ç§»åŠ¨ç«¯ä¼˜åŒ– */
            .modal-body {
                padding: 15px;
            }
            
            /* å¼¹çª—æ ‡é¢˜å­—ä½“å¤§å°è°ƒæ•´ */
            .modal-title {
                font-size: 18px;
            }
            
            .modal-section {
                padding: 12px;
                margin-bottom: 15px;
            }
        }

        @media (max-width: 480px) {
            .modal-content {
                max-height: 75vh;
                width: 90%;
                margin: 5px;
            }
            
            .modal-body {
                max-height: calc(75vh - 110px);
                padding: 12px;
            }
            
            .modal-header {
                padding: 12px 15px;
            }
            
            .modal-title {
                font-size: 16px;
            }
            
            .modal-close {
                width: 28px;
                height: 28px;
                font-size: 20px;
            }
        }

        @media (max-width: 430px) {
            .modal-content {
                max-height: 65vh;
                width: 90%;
                margin: 2px;
            }
            
            .modal-body {
                max-height: calc(65vh - 100px);
                padding: 10px;
            }
            
            .modal-header {
                padding: 10px 12px;
            }
            
            .modal-title {
                font-size: 15px;
            }
            
            /* ç¡®ä¿å…³é—­æŒ‰é’®å§‹ç»ˆå¯è§ */
            .modal-close {
                position: relative;
                z-index: 11;
            }
        }

        /* === ç›‘å¯Ÿå¯†ä»¤ç§»åŠ¨ç«¯é€‚é… === */
        @media (max-width: 768px) {
            .inspection-period-btn {
                font-size: 12px;
                padding: 8px 6px;
            }
        }

        /* === è¶…å°å±å¹•ç‰¹æ®Šé€‚é… === */
        @media (max-width: 480px) {
            .gacha-calculator {
                padding: 5px;
                margin-top: 55px;
                background: transparent;
            }
            
            .sticky-panel {
                top: 65px; /* æ›´å°å±å¹•è°ƒæ•´é¡¶éƒ¨è·ç¦» */
                max-height: calc(100vh - 75px);
            }
            
            .card {
                padding: 10px;
            }
            
            .time-title {
                font-size: 12px;
            }
            
            .time-date {
                font-size: 10px;
            }
            
            .time-days {
                font-size: 12px;
            }
            
            .time-weeks {
                font-size: 10px;
            }
            
            .time-option {
                padding: 8px;
            }

            .resource-input input {
                width: 100%;
            }
            
            .switch-group {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body class="light-mode">
    
    <div id="app">
        <div class="page-wrapper" :class="{ 'with-sidebar': showSideMenu }" @click="handlePageClick">
            <!-- é¡¶éƒ¨èœå•æ  -->
            <div class="top-menu-bar">
                <!-- æ–°å¢ä¸‰æ¡æ èœå•æŒ‰é’® -->
                <button class="menu-toggle-btn" @click="toggleSideMenu" :class="{ active: showSideMenu }">
                    â˜°
                </button>
                <div class="menu-title"><img :src="hlIcon" class="resource-icon" alt="æµ·æ‹‰">æµ·æ‹‰çš„é’±åŒ…</div>
                <div class="menu-right">
                    <button class="menu-btn" 
                            :class="{ active: showModal && currentModal === 'info' }" 
                            @click="showWebpageInfo">è¯´æ˜</button>
                    <button class="menu-btn" 
                            :class="{ active: showModal && currentModal === 'feedback' }" 
                            @click="showFeedback">åé¦ˆ</button>
                    <button class="menu-btn theme-toggle" @click="toggleTheme" :title="isDarkMode ? 'åˆ‡æ¢åˆ°ç™½å¤©æ¨¡å¼' : 'åˆ‡æ¢åˆ°å¤œæ™šæ¨¡å¼'">
                        {{ isDarkMode ? 'ğŸŒ™' : 'â˜€ï¸' }}
                    </button>
                </div>
            </div>

            <!-- ä¾§è¾¹èœå•æ  -->
            <div v-if="showSideMenu" class="side-menu-overlay">
                <div class="side-menu">
                    <div class="side-menu-header">
                        <h3>é¡µé¢å¯¼èˆª</h3>
                    </div>
                    <div class="side-menu-content">
                        <button class="side-menu-item" @click="switchPage('calculator')" :class="{ active: currentPage === 'calculator' }">
                            ğŸ“Š æ”’æŠ½è®¡ç®—å™¨
                        </button>
                        <button class="side-menu-item" @click="switchPage('valueAnalysis')" :class="{ active: currentPage === 'valueAnalysis' }">
                            ğŸ’° ç¤¼åŒ…æ€§ä»·æ¯”
                        </button>
                    </div>
                </div>    
            </div>
            
            <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
            <div class="main-container">            
                <!-- ç»Ÿä¸€å¼¹çª— -->
                <div v-if="showModal" class="modal-overlay" @click.self="closeModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">{{ currentModal === 'info' ? 'ğŸ“– ç½‘é¡µè¯´æ˜' : 'ğŸ’¬ åé¦ˆä¸æ›´æ–°' }}</h3>
                            <button class="modal-close" @click="closeModal">Ã—</button>
                        </div>
                        
                        <div class="modal-body">
                            <!-- è¯´æ˜å¼¹çª—å†…å®¹ -->
                            <div v-if="currentModal === 'info'">
                                <div class="modal-section">
                                    <div class="modal-section-title">ğŸ“± å·¥å…·ç®€ä»‹</div>
                                    <p>è¿™æ˜¯ä¸€ä¸ª<strong class="modal-highlight">æ— æœŸè¿·é€”æŠ½å¡èµ„æºè®¡ç®—å™¨</strong>ï¼Œå¯ä»¥å¸®åŠ©ä½ ç§‘å­¦è§„åˆ’æŠ½å¡èµ„æºï¼Œé¿å…èµ„æºæµªè´¹</p>
                                </div>
                                
                                <div class="modal-section">
                                    <div class="modal-section-title">ğŸš€ ä½¿ç”¨æŒ‡å—</div>
                                    <ol class="modal-list">
                                        <li>åœ¨<strong class="modal-highlight">ã€Œå½“å‰èµ„æºã€</strong>æ¨¡å—è¾“å…¥ä½ ç°æœ‰çš„æŠ½å¡èµ„æº</li>
                                        <li>æ ¹æ®å®é™…æƒ…å†µåœ¨<strong class="modal-highlight">å„ä¸ªæ¨¡å—</strong>ä¸­è®¾ç½®ç›¸å…³å‚æ•°</li>
                                        <li>æŸ¥çœ‹<strong class="modal-highlight">é¡¶éƒ¨æ€»è®¡</strong>äº†è§£å¯è·å¾—çš„æ€»æŠ½æ•°</li>
                                        <li>é€šè¿‡<strong class="modal-highlight">é¥¼çŠ¶å›¾åˆ†æ</strong>äº†è§£å„æ¨¡å—èµ„æºå æ¯”</li>
                                        <li>åˆç†è§„åˆ’ä½ çš„æŠ½å¡ç­–ç•¥ï¼</li>
                                    </ol>
                                </div>

                                <div class="modal-section">
                                    <div class="modal-section-title">âš¡ ä¸»è¦åŠŸèƒ½</div>
                                    <ul class="modal-list">
                                        <li>ğŸ’ <strong>å½“å‰èµ„æºç®¡ç†</strong> - è®°å½•å¼‚æ–¹æ™¶ã€ç’€ç’¨æ™¶æºã€æœç´¢ä»¤ç­‰</li>
                                        <li>ğŸ“ˆ <strong>æ—¥å¸¸ç§¯ç´¯è®¡ç®—</strong> - è‡ªåŠ¨è®¡ç®—æ—¥å¸¸ã€å‘¨å¸¸ã€æœˆå¸¸å¥–åŠ±</li>
                                        <li>ğŸ¯ <strong>æ´»åŠ¨èµ„æºä¼°ç®—</strong> - ä¼°ç®—æ´»åŠ¨å¯è·å¾—æŠ½å¡èµ„æº</li>
                                        <li>ğŸ”® <strong>æ½œåœ¨èµ„æºç»Ÿè®¡</strong> - ç»Ÿè®¡ä¸»çº¿å…³å¡ç­‰æ½œåœ¨èµ„æº</li>
                                        <li>ğŸ’° <strong>æ°ªé‡‘èµ„æºè§„åˆ’</strong> - è§„åˆ’æœˆå¡ã€ç¤¼åŒ…ç­‰ä»˜è´¹å†…å®¹</li>
                                    </ul>
                                </div>

                                <div class="modal-section">
                                    <div class="modal-section-title">âš ï¸ æ³¨æ„äº‹é¡¹</div>
                                    <ul class="modal-list">
                                        <li>éƒ¨åˆ†æ´»åŠ¨èµ„æºä¸º<strong class="modal-highlight">ä¼°ç®—å€¼</strong>ï¼Œå®é™…ä»¥æ¸¸æˆå†…ä¸ºå‡†</li>
                                        <li>æ•°æ®ä¼š<strong class="modal-highlight">è‡ªåŠ¨ä¿å­˜</strong>åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­</li>
                                    </ul>
                                </div>                        
                                
                            </div>

                            <!-- åé¦ˆå¼¹çª—å†…å®¹ -->
                            <div v-else-if="currentModal === 'feedback'">
                                <div class="modal-section">
                                    <div class="modal-section-title">ğŸ› é—®é¢˜åé¦ˆ</div>
                                    <p>å¦‚æœå±€é•¿åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°<strong class="modal-highlight">ä»»ä½•é—®é¢˜æˆ–å‘ç°BUG</strong>éå¸¸æ¬¢è¿å±€é•¿é€šè¿‡ä»¥ä¸‹æ¸ é“åé¦ˆï¼š</p>
                                    <ul class="modal-list">
                                        <li>ğŸ–¥ï¸ é€šè¿‡Bç«™åå°ç§ä¿¡@æ˜¯é†‰æŸ“å“¦</li>
                                        <li>ğŸ‘¥ åŠ å…¥Qç¾¤è”ç³»ï¼š1049297956</li>
                                        <li>ğŸ“§ é‚®ä»¶åé¦ˆ2309141313@qq.com</li>
                                    </ul>
                                </div>
                                
                                <div class="modal-section">
                                    <div class="modal-section-title">âš¡ æ›´æ–°æ—¥å¿—</div>
                                    <ul class="modal-list">
                                        <li><strong class="modal-highlight">25.11.02</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ”’æŠ½æ¨¡æ‹Ÿå™¨<strong class="modal-highlight">æ­£å¼ä¸Šçº¿</strong>
                                        </li>
                                        <li><strong class="modal-highlight">25.11.03</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">ç›‘ç®¡æ”¶èœã€å¤šé¡¹åˆé‡‘å…‘æ¢ã€è®°å¿†å¤ç°ã€æ¢¦å¢ƒ&äººæ ¼è‰²è°±ã€é›¶å¢ƒç³»ç»Ÿã€ç°çƒ¬ä¹‹æ½®-é‡å¡‘ã€æ´¾é£åŒºåŸŸå£°æœ›ã€è¯´æ˜&åé¦ˆã€æ—¥å¤œæ¨¡å¼åˆ‡æ¢</strong>åŠŸèƒ½
                                        </li>   
                                        <li><strong class="modal-highlight">25.11.04</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">ç›‘å¯Ÿå¯†ä»¤æ¯æœŸç­‰çº§é€‰æ‹©</strong>åŠŸèƒ½
                                        </li>  
                                        <li><strong class="modal-highlight">25.11.05</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">æ™¶æºç‰¹ä¾›</strong>æ¨¡å—
                                        </li>  
                                        <li><strong class="modal-highlight">25.11.06</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">å¸¸é©»&é™æ—¶ç¤¼åŒ…</strong>æ¨¡å—
                                        </li>
                                        <li><strong class="modal-highlight">25.11.07</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">æ—§æ¡ˆå½’æ¡£å¤„</strong>æ¨¡å—<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¿®æ­£<strong class="modal-highlight">å¤§é‡è®¡ç®—BUG</strong>
                                        </li>       
                                        <li><strong class="modal-highlight">25.11.11</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¼˜åŒ–<strong class="modal-highlight">ç”¨æˆ·ä½“éªŒ</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¿®æ­£<strong class="modal-highlight">å°‘é‡è®¡ç®—BUG</strong>
                                        </li>  
                                        <li><strong class="modal-highlight">25.11.17</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">æ—¶å°šå·¡å›åº†å…¸ï¼ˆä»˜è´¹&éä»˜è´¹ï¼‰ã€å…¬ä¼šæˆ˜ã€ç»å¯†è¡ŒåŠ¨</strong>å¥–åŠ±è®¡ç®—<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¿®æ­£<strong class="modal-highlight">å°‘é‡è®¡ç®—BUG</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ—¶å°šå·¡å›åº†å…¸ï¼ˆä»˜è´¹ï¼‰å¯ä»¥æ­£å¸¸å½±å“çš®è‚¤é¢„ç•™çº¢æ™¶æ•°é‡ï¼ˆæ­£ç¡®æ‰£å‡300ï¼‰
                                        </li>
                                        <li><strong class="modal-highlight">25.11.22</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ–°å¢<strong class="modal-highlight">ç¤¼åŒ…æ€§ä»·æ¯”</strong>é¡µé¢<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨å¯ä»¥ä½¿ç”¨å·¦ä¾§èœå•æ åœ¨ã€Œæ”’æŠ½è®¡ç®—å™¨ã€ä¸ã€Œç¤¼åŒ…æ€§ä»·æ¯”ã€é¡µé¢æ¥å›åˆ‡æ¢<br>                                          
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¿®æ­£<strong class="modal-highlight">å¤§é‡è®¡ç®—BUG</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¼˜åŒ–<strong class="modal-highlight">ç§»åŠ¨ç«¯æ˜¾ç¤º</strong><br>                                            
                                        </li> 
                                        <li><strong class="modal-highlight">25.11.22</strong><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¼˜åŒ–é¡µé¢å›¾ç‰‡<strong class="modal-highlight">åŠ è½½é€Ÿåº¦</strong><br>                                        
                                        </li>                                                                                                                                                                                                                                                                                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="modal-footer">
                            <div class="modal-contact">
                                {{ currentModal === 'info' ? 'ç¥å±€é•¿åè¿ä¸‰é‡‘ï¼ ğŸ‰' : 'æ„Ÿè°¢å±€é•¿çš„ä½¿ç”¨ä¸æ”¯æŒï¼ â¤ï¸' }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ”’æŠ½è®¡ç®—å™¨é¡µé¢ -->
                <div v-if="currentPage === 'calculator'">
                    <div class="gacha-calculator">
                        <div class="calculator-layout">
                            <!-- å·¦ä¾§ï¼šæ€»è®¡æ¨¡å— -->
                            <div class="left-panel sticky-panel">
                                <div class="time-section card">
                                    <h2 @click="toggleSection('pullSummary')" class="section-header">
                                    ğŸ“Š å…±è®¡ {{ totalModulePulls }} æŠ½ ğŸ’° æ°ªé‡‘ {{ totalRechargeCost }} ï¿¥
                                    <span class="collapse-icon">{{ sections.pullSummary ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    
                                    <!-- èµ„æºä¿¡æ¯ - å§‹ç»ˆæ˜¾ç¤º -->
                                    <div class="sub-section" style="display: flex; justify-content: space-around; align-items: center; gap: 15px;">
                                        <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                            <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                            <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                                <span class="summary-value">{{ totalAllCrystal }}</span>
                                                <div style="font-size: 12px; color: #666;">({{ Math.floor(totalAllCrystal / 180) }})</div>
                                            </div>
                                        </div>
                                        <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                            <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                            <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                                <span class="summary-value">{{ totalAllPremiumCrystal }}</span>
                                                <div style="font-size: 12px; color: #666;">({{ Math.floor(totalAllPremiumCrystal / 180) }})</div>
                                            </div>
                                        </div>
                                        <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                            <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                                <span class="summary-value">{{ totalAllTickets }}</span>
                                                <div style="font-size: 12px; color: #666;">({{ totalAllTickets }})</div>
                                            </div>
                                        </div>
                                        <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                            <img :src="limitedCouponIcon" class="resource-icon" alt="é™å®šåˆ¸">
                                            <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                                <span class="summary-value">{{ totalAllLimitedCoupons }}</span>
                                                <div style="font-size: 12px; color: #666;">({{ totalAllLimitedCoupons }})</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- è¯¦ç»†å†…å®¹ - å¯æŠ˜å  -->
                                    <div v-if="sections.pullSummary" class="section-content">
                                        <!-- å¡æ± æ—¶é—´å†…å®¹ -->
                                        <div class="switch-group">
                                            <span class="switch-label" :class="{ active: !calculateToPoolEnd, inactive: calculateToPoolEnd }">è®¡ç®—åˆ°å¡æ± å¼€æ”¾å½“å¤©</span>
                                            <label class="switch">
                                                <input type="checkbox" v-model="calculateToPoolEnd">
                                                <span class="slider"></span>
                                            </label>
                                            <span class="switch-label" :class="{ active: calculateToPoolEnd, inactive: !calculateToPoolEnd }">è®¡ç®—åˆ°å¡æ± ç»“æŸå½“å¤©</span>
                                        </div>
                                        
                                        <!-- æ–°å¢é¥¼çŠ¶å›¾ -->
                                        <div class="pie-chart-section">
                                            <h3 style="text-align: center; margin-bottom: 15px; color: #FF6B6B;">å„æ¨¡å—æŠ½æ•°å æ¯”</h3>
                                            
                                            <div class="pie-chart-container">
                                                <!-- é¥¼çŠ¶å›¾å®¹å™¨ -->
                                                <div class="pie-canvas-wrapper">
                                                    <canvas 
                                                        ref="pieChart" 
                                                        @mousemove="handlePieChartMouseMove"
                                                        @mouseleave="handlePieChartMouseLeave"
                                                        @touchstart="handlePieChartTouchStart"
                                                        @touchmove="handlePieChartTouchMove"
                                                        @touchend="handlePieChartTouchEnd"
                                                        class="pie-canvas"
                                                    ></canvas>
                                                    
                                                    <!-- æ‚¬åœæç¤ºæ¡† -->
                                                    <div v-if="hoveredPieModule" class="pie-tooltip">
                                                        <div>{{ hoveredPieModule.name }}</div>
                                                        <div class="tooltip-details">
                                                            {{ hoveredPieModule.pulls }}æŠ½ ({{ hoveredPieModule.percentage }}%)
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <!-- å›¾ä¾‹ - å“åº”å¼å¸ƒå±€ -->
                                                <div class="pie-legend">
                                                    <div class="legend-items">
                                                        <div v-for="(module, index) in pieChartData" :key="module.name" class="legend-item">
                                                            <div class="legend-color" :style="{ backgroundColor: module.color }"></div>
                                                            <span class="legend-text">
                                                                {{ module.name }}: {{ module.pulls }}æŠ½ ({{ module.percentage }}%)
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="time-options">
                                            <div class="time-option" 
                                                :class="{ active: selectedTime === 'nextVersion' }"
                                                @click="selectedTime = 'nextVersion'">
                                                <div class="time-header">
                                                    <div class="time-title">æ­§è¡Œè‡³ç ´æ™“</div>
                                                    <div class="time-days">å€’è®¡æ—¶ {{ calculateDisplayDays('nextVersion') }} å¤©</div>
                                                </div>
                                                <div class="time-date">{{ formattedNextVersionDate }}</div>
                                            </div>

                                            <div class="time-option" 
                                                :class="{ active: selectedTime === 'newYear' }"
                                                @click="selectedTime = 'newYear'">
                                                <div class="time-header">
                                                    <div class="time-title">æ–°å¹´ç‰ˆæœ¬</div>
                                                    <div class="time-days">å€’è®¡æ—¶ {{ calculateDisplayDays('newYear') }} å¤©</div>
                                                </div>
                                                <div class="time-date">{{ formattedNewYearDate }}</div>
                                            </div>
                                        </div>                            
                                    </div>                        
                                </div>
                            </div>

                            <!-- å³ä¾§ï¼šæ˜ç»†æ¨¡å— -->
                            <div class="right-panel">
                                <!-- å½“å‰èµ„æº -->
                                <div class="input-section card">
                                    <h2 @click="toggleSection('resources')" class="section-header">
                                        ğŸ’ å½“å‰èµ„æº
                                        <span class="collapse-icon">{{ sections.resources ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    <!-- å­æ¨¡å— -->
                                    <div v-if="sections.resources" class="section-content">
                                        <!-- å½“å‰åº“å­˜ -->
                                        <div class="sub-section">
                                            <!-- æ–°å¢åŒ…è£…å™¨ -->
                                            <div class="sub-title-wrapper">
                                                <h3 class="sub-title">å½“å‰åº“å­˜</h3>
                                                <!-- ä½¿ç”¨ç’€ç’¨æ™¶æºå¼€å…³ç§»å…¥å½“å‰åº“å­˜ -->
                                                <div class="switch-group">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="usePremiumCrystal">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">ä½¿ç”¨ç’€ç’¨æ™¶æºæŠ½å¡</span>
                                                </div>
                                            </div>
                                            <div class="resource-vertical">
                                                <div class="resource-input-vertical">
                                                    <label>
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> å¼‚æ–¹æ™¶ï¼š
                                                    </label>
                                                    <input type="number" v-model.number="resources.crystal" placeholder="" min="0" step="1" 
                                                        @input="validateInputDelayed('crystal')" 
                                                        @focus="clearIfZero('crystal')" 
                                                        @blur="setDefaultIfEmpty('crystal')">
                                                </div>
                                                <div class="resource-input-vertical">
                                                    <label>
                                                        <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº"> ç’€ç’¨æ™¶æºï¼š
                                                    </label>
                                                    <input type="number" v-model.number="resources.premiumCrystal" placeholder="" min="0" step="1" 
                                                        @input="validateInputDelayed('premiumCrystal')" 
                                                        @focus="clearIfZero('premiumCrystal')" 
                                                        @blur="setDefaultIfEmpty('premiumCrystal')">
                                                </div>
                                                <div class="resource-input-vertical">
                                                    <label>
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> æœç´¢ä»¤ï¼š
                                                    </label>
                                                    <input type="number" v-model.number="resources.tickets" placeholder="" min="0" step="1" 
                                                        @input="validateInputDelayed('tickets')" 
                                                        @focus="clearIfZero('tickets')" 
                                                        @blur="setDefaultIfEmpty('tickets')">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- çš®è‚¤é¢„ç•™çº¢æ™¶ -->
                                        <div class="sub-section" :class="{ 'disabled-section': !usePremiumCrystal }">
                                            <h3 class="sub-title">çš®è‚¤é¢„ç•™çº¢æ™¶</h3>
                                            <div class="skin-reserve-row">
                                                <div class="skin-item compact">
                                                    <div class="skin-info">
                                                        <span class="skin-price">âœ§âœ§880<img :src="redCrystalIcon" class="resource-icon small" alt="çº¢æ™¶"></span>
                                                    </div>
                                                    <div class="skin-controls">
                                                        <button class="skin-btn" @click="adjustSkinCount(880, -1)" :disabled="!usePremiumCrystal">âˆ’</button>
                                                        <span class="skin-count">{{ skinReserve.skin880 }} ä¸ª</span>
                                                        <button class="skin-btn" @click="adjustSkinCount(880, 1)" :disabled="!usePremiumCrystal">+</button>
                                                    </div>
                                                </div>
                                                <div class="skin-item compact">
                                                    <div class="skin-info">
                                                        <span class="skin-price">âœ§âœ§âœ§1280<img :src="redCrystalIcon" class="resource-icon small" alt="çº¢æ™¶"></span>
                                                    </div>
                                                    <div class="skin-controls">
                                                        <button class="skin-btn" @click="adjustSkinCount(1280, -1)" :disabled="!usePremiumCrystal">âˆ’</button>
                                                        <span class="skin-count">{{ skinReserve.skin1280 }} ä¸ª</span>
                                                        <button class="skin-btn" @click="adjustSkinCount(1280, 1)" :disabled="!usePremiumCrystal">+</button>
                                                    </div>
                                                </div>
                                                <div class="skin-item compact">
                                                    <div class="skin-info">
                                                        <span class="skin-price">âœ§âœ§âœ§âœ§2580<img :src="redCrystalIcon" class="resource-icon small" alt="çº¢æ™¶"></span>
                                                    </div>
                                                    <div class="skin-controls">
                                                        <button class="skin-btn" @click="adjustSkinCount(2580, -1)" :disabled="!usePremiumCrystal">âˆ’</button>
                                                        <span class="skin-count">{{ skinReserve.skin2580 }} ä¸ª</span>
                                                        <button class="skin-btn" @click="adjustSkinCount(2580, 1)" :disabled="!usePremiumCrystal">+</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- è‡ªå®šä¹‰ä¿®æ­£ -->
                                        <div class="custom-adjust">
                                            <div class="resource-input">
                                                <label style="min-width: 140px; flex-shrink: 0;">
                                                    <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">å¼‚æ–¹æ™¶ä¿®æ­£ï¼š
                                                </label>
                                                <input type="number" v-model.number="customAdjustment" placeholder="0" style="max-width: 120px;" 
                                                    @input="validateCustomAdjustment"
                                                    @focus="clearCustomAdjustmentIfZero" 
                                                    @blur="setCustomAdjustmentDefaultIfEmpty">
                                            </div>
                                            <div class="custom-tip">
                                                ä¾‹å¦‚å…³å¡æœªæ‰“æ»¡ã€ç»™å¤åˆ»æ± é¢„ç•™ã€å…¶å®ƒå¼‚æ–¹æ™¶æ¥æºç­‰ï¼Œå¯å¡«è´Ÿæ•°ï¼ˆæœ€å¤šæ‰£å‡å½“å‰åº“å­˜ï¼‰
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- æ—¥å¸¸ç§¯ç´¯ -->
                                <div class="daily-section card">
                                    <h2 @click="toggleSection('daily')" class="section-header">
                                        ğŸ“ˆ æ—¥å¸¸ç§¯ç´¯ï¼ˆæ›´æ›¿ï¼‰
                                        <span class="collapse-icon">{{ sections.daily ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    <!-- å­æ¨¡å— -->
                                    <div v-if="sections.daily" class="section-content">
                                        <!-- æ´»è·ƒå¥–åŠ± -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ´»è·ƒå¥–åŠ±</h3>
                                            <!-- æ—¥å¸¸æ´»è·ƒ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">æ—¥å¸¸{{ selectedDays }}å¤©ï¼š</span>
                                                    <span class="item-value"><img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dailyActiveTotal }} </span>
                                                </div>
                                            </div>

                                            <!-- å‘¨å¸¸æ´»è·ƒ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">å‘¨å¸¸{{ remainingWeeklyCount }}å‘¨ï¼š</span>
                                                    <span class="item-value"><img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ weeklyActiveReward }} </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="weeklyCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬å‘¨å·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- æ¯å‘¨åˆ†äº« -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">åˆ†äº«{{ remainingShareWeeks }}å‘¨ï¼š</span>
                                                    <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ remainingShareTotal }} </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="dailyShareCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬å‘¨å·²åˆ†äº«</span>
                                                </div>
                                            </div>

                                            <!-- æƒ…ç»ªæ£€æµ‹ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">æƒ…ç»ªæ£€æµ‹{{ emotionDetectionCompleted ? (remainingMonths - 1) : remainingMonths }}æœˆï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">{{ totalEmotionDetection }} <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">{{ totalEmotionDetectionTickets }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="emotionDetectionCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœˆå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- ç­¾åˆ°å¥–åŠ± -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">ç­¾åˆ°å¥–åŠ±{{ signInRewardCompleted ? (remainingMonths - 1) : remainingMonths }}æœˆï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">{{ totalSignInReward }} <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">{{ totalSignInRewardTickets }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="signInRewardCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœˆå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- ç›‘ç®¡æ”¶èœ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">ç›‘ç®¡æ”¶èœï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">{{ supervisionHarvestCrystal }}
                                                    </span>
                                                </div>
                                            </div>

                                            <!-- å¤šé¡¹åˆé‡‘å…‘æ¢ -->
                                            <div class="accumulation-item">
                                                <!-- ç¬¬ä¸€è¡Œï¼šå·¦ä¾§æ–‡æœ¬ï¼Œå³ä¾§å¼€å…³ -->
                                                <div class="item-row">
                                                    <div class="item-info">
                                                        <span class="item-title">å¤šé¡¹åˆé‡‘å…‘æ¢ï¼š</span>
                                                        <span class="item-value">
                                                            <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">{{ alloyExchangeCrystal }}
                                                        </span>
                                                    </div>
                                                </div>
                                                <!-- ç¬¬äºŒè¡Œï¼šè¾“å…¥æ¡†å±…ä¸­å¯¹é½ -->
                                                <div class="item-row">
                                                    <div class="certification-controls">
                                                        <div style="display: flex; align-items: center; gap: 8px; justify-content: center; width: 100%;">
                                                            <input 
                                                                type="number" 
                                                                v-model.number="alloyCount" 
                                                                placeholder="0" 
                                                                min="0" 
                                                                step="1" 
                                                                @input="validateAlloyInput"
                                                                @focus="clearAlloyIfZero()"
                                                                @blur="setAlloyDefaultIfEmpty()"
                                                                style="width: 80px; padding: 8px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);"
                                                            >
                                                            <img :src="alloyIcon" class="resource-icon" alt="å¤šé¡¹åˆé‡‘">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- åŸºç¡€æ—¶å°šå·¡å›åº†å…¸ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">æ—¶å°šå·¡å›åº†å…¸{{ fashionTourCompleted ? (fashionTourPeriods - 1) : fashionTourPeriods }}æœŸï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ totalFashionTourTickets }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="fashionTourCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬å‘¨å·²é¢†å–</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ç›‘å¯Ÿå¯†ä»¤ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">ç›‘å¯Ÿå¯†ä»¤</h3>
                                            <div class="inspection-order-buttons">
                                                <div v-for="period in inspectionPeriods" :key="period.id" class="inspection-period-btn-wrapper">
                                                    <button 
                                                        class="inspection-period-btn" 
                                                        :class="{ active: selectedInspectionPeriod === period.id }"
                                                        @click="selectInspectionPeriod(period.id)">
                                                        {{ period.startDate }}åˆ°{{ period.endDate }} <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">{{ calculateCurrentPeriodTickets(inspectionLevels[period.id]) }}
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <!-- æ»‘å—å®¹å™¨-->
                                            <div class="inspection-slider-container" v-if="selectedInspectionPeriod">
                                                <div class="slider-labels">
                                                    <span>0çº§</span>
                                                    <span>55çº§</span>
                                                </div>
                                                <input 
                                                    type="range" 
                                                    v-model.number="inspectionLevels[selectedInspectionPeriod]" 
                                                    @input="snapInspectionLevel(selectedInspectionPeriod)"
                                                    min="0" 
                                                    max="55"
                                                    step="1"
                                                    class="inspection-slider"
                                                >
                                                <div class="slider-value">
                                                    å½“å‰ç­‰çº§: {{ inspectionLevels[selectedInspectionPeriod] }}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- å•†åº—å…‘æ¢ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">å•†åº—å…‘æ¢</h3>

                                            <!-- è¿½è¸ªè®¤è¯-å¸¸è§„ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">è¿½è¸ªè®¤è¯-å¸¸è§„{{ trackingExchanged ? (remainingMonths - 1) : remainingMonths }}æœˆï¼š</span>
                                                    <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ totalTrackingExchange }}</span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="trackingExchanged">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœˆå·²å…‘æ¢</span>
                                                </div>
                                            </div>

                                            <!-- è¿½è¸ªè®¤è¯-æœºå¯† -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">è¿½è¸ªè®¤è¯-æœºå¯†ï¼š</span>
                                                    <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ totalTrackingCertificationTickets }}</span>
                                                </div>
                                                <div class="certification-controls">
                                                    <div style="display: flex; align-items: center; gap: 8px;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="trackingCertificationCount" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            step="1" 
                                                            @input="validateCertificationInput"
                                                            @focus="clearCertificationIfZero()"
                                                            @blur="setCertificationDefaultIfEmpty()"
                                                            style="width: 80px; padding: 8px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);"
                                                        >
                                                        <img :src="yellowTicketIcon" class="resource-icon" alt="é»„ç¥¨">
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- å‹æƒ…å…‘æ¢ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">å‹æƒ…å…‘æ¢{{ friendshipExchanged ? (remainingMonths - 1) : remainingMonths }}æœˆï¼š</span>
                                                    <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ totalFriendshipExchange }}</span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="friendshipExchanged">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœˆå·²å…‘æ¢</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ç ´ç¢é˜²çº¿ -->
                                        <div class="sub-section">
                                            <div class="sub-title-with-switch">
                                                <h3 class="sub-title">ç ´ç¢é˜²çº¿-æš—åŸŸ</h3>
                                                <div class="title-switch-group">
                                                    <div class="switch-group small">
                                                        <label class="switch">
                                                            <input type="checkbox" v-model="darkZoneSweepOnly">
                                                            <span class="slider"></span>
                                                        </label>
                                                        <span class="switch-label">æœ¬å‘¨ä»…æ‰«è¡</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dark-zone-section">
                                                <!-- æš—åŸŸ-æ›´æ›¿ -->
                                                <div class="accumulation-item">
                                                    <div class="item-info">
                                                        <span class="item-title">æš—åŸŸ{{ remainingDarkZoneWeeks }}å‘¨ï¼š</span>
                                                        <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ totalDarkZone }}</span>
                                                    </div>
                                                    <div class="item-switch-group">
                                                        <div class="switch-group small">
                                                            <label class="switch">
                                                                <input type="checkbox" v-model="darkZoneCompleted">
                                                                <span class="slider"></span>
                                                            </label>
                                                            <span class="switch-label">æœ¬å‘¨å·²å®Œæˆ</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- æš—åŸŸ-é¦–é€š -->
                                                <div class="accumulation-item">
                                                    <div class="item-info">
                                                        <span class="item-title">é¦–é€šå¥–åŠ±{{ darkZoneFirstCompleted ? (darkZoneFirstPeriods - 1) : darkZoneFirstPeriods }}æœŸï¼š</span>
                                                        <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ totalDarkZoneFirst }}</span>
                                                    </div>
                                                    <div class="item-switch-group">
                                                        <div class="switch-group small">
                                                            <label class="switch">
                                                                <input type="checkbox" v-model="darkZoneFirstCompleted">
                                                                <span class="slider"></span>
                                                            </label>
                                                            <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- æ•°æ®é—´éš™ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ•°æ®é—´éš™</h3>
                                            <div style="font-size: 12px; color: #666; margin-top: 5px; font-style: italic;">
                                                &nbsp;&nbsp;æ¯èµ›å­£åˆ†ä¸Šä¸‹åŠèµ›å­£ï¼Œåˆ†åˆ«ä¸º1æœŸ<br>
                                            </div>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">æ•°æ®é—´éš™{{ dataGapCompleted ? (dataGapPeriods - 1) : dataGapPeriods }}æœŸï¼š</span>
                                                    <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ totalDataGapCrystal }}</span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="dataGapCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ç‹‚å„ç‰¹è®­ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">ç‹‚å„ç‰¹è®­</h3>
                                            <div style="font-size: 12px; color: #666; margin-top: 5px; font-style: italic;">
                                                &nbsp;&nbsp;æ— å‡†ç¡®æ’æœŸï¼Œä»…æ˜¾ç¤ºæœ¬æœŸ<br>
                                                &nbsp;
                                            </div>
                                            <div class="training-buttons">
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: trainingModes.steady }"
                                                    @click="toggleTrainingMode('steady')">
                                                    å¹³ç¨³<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">100<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                </button>
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: trainingModes.fluctuating }"
                                                    @click="toggleTrainingMode('fluctuating')">
                                                    æ³¢åŠ¨<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">200<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">2
                                                </button>
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: trainingModes.outOfControl }"
                                                    @click="toggleTrainingMode('outOfControl')">
                                                    å¤±æ§<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">200
                                                </button>
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: trainingModes.crazy }"
                                                    @click="toggleTrainingMode('crazy')">
                                                    ç–¯ç‹‚<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">60
                                                </button>
                                            </div>
                                        </div>

                                        <!-- æ— å°½æ¢¦é­‡-æ›´æ›¿ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ— å°½æ¢¦é­‡-æ›´æ›¿</h3>
                                            <div style="font-size: 12px; color: #666; margin-top: 5px; font-style: italic;">
                                                &nbsp;&nbsp;æ— å‡†ç¡®æ’æœŸï¼Œä»…æ˜¾ç¤ºæœ¬æœŸ<br>
                                            </div>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">ç¥¸æµ·ä¹‹å„ï¼š</span>
                                                    <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ nightmareSeaReward }}</span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="nightmareSeaCompleted">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- æ½œåœ¨èµ„æº -->
                                <div class="potential-section card">
                                    <h2 @click="toggleSection('potential')" class="section-header">
                                        ğŸ”® æ½œåœ¨èµ„æºï¼ˆå¸¸é©»ï¼‰
                                        <span class="collapse-icon">{{ sections.potential ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    <!-- å­æ¨¡å— -->
                                    <div v-if="sections.potential" class="section-content">
                                        <!-- ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰</h3>
                                            <div class="main-story-buttons">
                                                <div class="main-story-columns">
                                                    <!-- ä¸»çº¿å·¦ä¾§æŒ‰é’® -->
                                                    <div class="main-story-column">
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.chaosBeyondA }"
                                                            @click="toggleMainStory('chaosBeyondA')">
                                                            01æ··æ²Œå½¼å²¸A<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">995<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.chaosBeyondB }"
                                                            @click="toggleMainStory('chaosBeyondB')">
                                                            02æ··æ²Œå½¼å²¸B<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1230<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.unownedCavernA }"
                                                            @click="toggleMainStory('unownedCavernA')">
                                                            03æ— ä¸»åœ°çªŸA<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1175<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.unownedCavernB }"
                                                            @click="toggleMainStory('unownedCavernB')">
                                                            04æ— ä¸»åœ°çªŸB<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1280<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.kiranSquareA }"
                                                            @click="toggleMainStory('kiranSquareA')">
                                                            05å¥‡å…°å¹¿åœºA<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1265<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.kiranSquareB }"
                                                            @click="toggleMainStory('kiranSquareB')">
                                                            06å¥‡å…°å¹¿åœºB<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1230<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.carnivalA }"
                                                            @click="toggleMainStory('carnivalA')">
                                                            07å˜‰å¹´åA<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1230<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.carnivalB }"
                                                            @click="toggleMainStory('carnivalB')">
                                                            08å˜‰å¹´åB<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">935<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.refugeeCampA }"
                                                            @click="toggleMainStory('refugeeCampA')">
                                                            09æµæ°‘å¯¨A<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1125<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                    </div>
                                                    <!-- ä¸»çº¿å³ä¾§æŒ‰é’® -->
                                                    <div class="main-story-column">
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.refugeeCampB }"
                                                            @click="toggleMainStory('refugeeCampB')">
                                                            10æµæ°‘å¯¨B<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1195<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.muddyDarkTrapA }"
                                                            @click="toggleMainStory('muddyDarkTrapA')">
                                                            11æ²‰æµŠæš—é˜±A<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1230<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.muddyDarkTrapB }"
                                                            @click="toggleMainStory('muddyDarkTrapB')">
                                                            12æ²‰æµŠæš—é˜±B<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">605<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.highTowerBlackRing }"
                                                            @click="toggleMainStory('highTowerBlackRing')">
                                                            13é«˜å¡”é»‘ç¯<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1980<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">2
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.darkSurgeA }"
                                                            @click="toggleMainStory('darkSurgeA')">
                                                            N1æš—æ¶ŒA<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1005<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.darkSurgeB }"
                                                            @click="toggleMainStory('darkSurgeB')">
                                                            N2æš—æ¶ŒB<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1005<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.goldFeastA }"
                                                            @click="toggleMainStory('goldFeastA')">
                                                            N3ç¢é‡‘ç››å®´A<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">900<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.goldFeastB }"
                                                            @click="toggleMainStory('goldFeastB')">
                                                            N4ç¢é‡‘ç››å®´B<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">1180<img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">1
                                                        </button>
                                                        <button 
                                                            class="main-story-btn" 
                                                            :class="{ active: mainStory.canFeng }"
                                                            @click="toggleMainStory('canFeng')">
                                                            æ®‹é”‹<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">960
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- è¡ŒåŠ¨çºªè¦ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">è¡ŒåŠ¨çºªè¦</h3>
                                            <div class="action-summary">
                                                <div class="summary-header action-summary-header">
                                                    <div class="summary-header-inner">
                                                        <span class="summary-text action-summary-text">
                                                            {{ actionSummaryText }}
                                                        </span>
                                                        <span class="summary-crystal action-summary-crystal">
                                                            <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ actionSummaryCrystal }}
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="slider-container">
                                                    <input 
                                                        type="range" 
                                                        v-model.number="actionSummaryLevel" 
                                                        min="0" 
                                                        max="19"
                                                        step="1"
                                                        class="score-slider"
                                                    >
                                                    <div class="slider-value">
                                                        å½“å‰çŠ¶æ€: {{ actionSummaryText }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- é›¶é•œç³»ç»Ÿï¼ˆä¸–ç•Œè§‚ï¼‰ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">é›¶é•œç³»ç»Ÿï¼ˆä¸–ç•Œè§‚ï¼‰</h3>
                                            <div class="zero-mirror-buttons">
                                                <div class="zero-mirror-columns">
                                                    <!-- ä¸–ç•Œè§‚å·¦ä¾§æŒ‰é’® -->
                                                    <div class="zero-mirror-column">
                                                        <!-- å…¥å¤œçºªå¹´ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.nightChronicle }"
                                                            @click="toggleZeroMirror('nightChronicle')">
                                                            å…¥å¤œçºªå¹´<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">200
                                                        </button>
                                                        
                                                        <!-- ç‹„æ–¯åŸ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.disCity }"
                                                            @click="toggleZeroMirror('disCity')">
                                                            ç‹„æ–¯åŸ<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">20
                                                        </button>
                                                        
                                                        <!-- è¾›è¿ªåŠ  -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.syndicate }"
                                                            @click="toggleZeroMirror('syndicate')">
                                                            è¾›è¿ªåŠ <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">180
                                                        </button>
                                                        
                                                        <!-- æ–°åŸ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.newCity }"
                                                            @click="toggleZeroMirror('newCity')">
                                                            æ–°åŸ<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">80
                                                        </button>
                                                        
                                                        <!-- é”ˆæ²³ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.rustRiver }"
                                                            @click="toggleZeroMirror('rustRiver')">
                                                            é”ˆæ²³<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">60
                                                        </button>
                                                    </div>
                                                    <!-- ä¸–ç•Œè§‚å³ä¾§æŒ‰é’® -->
                                                    <div class="zero-mirror-column">
                                                        <!-- å¤–é‚¦ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.foreignLand }"
                                                            @click="toggleZeroMirror('foreignLand')">
                                                            å¤–é‚¦<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">120
                                                        </button>
                                                        
                                                        <!-- å†…æµ· -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.innerSea }"
                                                            @click="toggleZeroMirror('innerSea')">
                                                            å†…æµ·<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">80
                                                        </button>
                                                        
                                                        <!-- ä¸Šåº­ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.upperCourt }"
                                                            @click="toggleZeroMirror('upperCourt')">
                                                            ä¸Šåº­<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">0
                                                        </button>
                                                        
                                                        <!-- ç‹‚å„ -->
                                                        <button 
                                                            class="zero-mirror-btn" 
                                                            :class="{ active: zeroMirror.madEvil }"
                                                            @click="toggleZeroMirror('madEvil')">
                                                            ç‹‚å„<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">320
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- å¸¸é©»æ´»åŠ¨ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">å¸¸é©»æ´»åŠ¨</h3>
                                            <div class="permanent-activity">
                                                <!-- è®°å¿†å¤ç° -->
                                                <div class="summary-header" style="background: #2a2a2a; padding: 12px 15px; border-radius: 8px; border: 1px solid #e1e5e9; margin-bottom: 15px;">
                                                    <div style="display: flex; align-items: center; gap: 15px;">
                                                        <span class="summary-text" style="font-size: 16px; font-weight: bold; color: #FF4500; flex: 1;">
                                                            è®°å¿†å¤ç°
                                                        </span>
                                                        <span class="summary-crystal" style="font-size: 14px; font-weight: bold; color: #1890ff; white-space: nowrap;">
                                                            <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ memoryReviewCrystal }}
                                                        </span>
                                                    </div>
                                                </div>                                    
                                                <!-- å¼¥åˆé˜ˆå€¼æ»‘å— -->
                                                <div class="slider-container" style="margin-top: 15px;">
                                                    <div class="slider-labels">
                                                        <span>0</span>
                                                        <span>10000</span>
                                                    </div>
                                                    <input 
                                                        type="range" 
                                                        v-model.number="memoryReviewThreshold" 
                                                        min="0" 
                                                        max="10000"
                                                        step="1000"
                                                        class="score-slider"
                                                    >
                                                    <div class="slider-value">
                                                        å¼¥åˆé˜ˆå€¼: {{ memoryReviewThreshold }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- æ—§æ¡ˆå½’æ¡£å¤„ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ—§æ¡ˆå½’æ¡£å¤„</h3>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">æœªå…‘æ¢æœç´¢ä»¤ï¼š</span>
                                                    <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ oldCaseArchiveTickets }}</span>
                                                </div>
                                                <div class="certification-controls">
                                                    <div style="display: flex; align-items: center; gap: 8px;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="oldCaseArchiveCount" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            step="1" 
                                                            @input="validateOldCaseArchiveInput"
                                                            @focus="oldCaseArchiveCount = clearIfZero(oldCaseArchiveCount)"
                                                            @blur="oldCaseArchiveCount = setDefaultIfEmpty(oldCaseArchiveCount)"
                                                            style="width: 70px; padding: 8px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰</h3>
                                            <div class="ex-buttons">
                                                <div class="ex-columns">
                                                    <!-- EXå·¦ä¾§æŒ‰é’® -->
                                                    <div class="ex-column">
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.chaosBeyond }"
                                                            @click="toggleDarkShadowEx('chaosBeyond')">
                                                            EX01æ··æ²Œå½¼å²¸Â·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">720
                                                        </button>
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.unownedCavern }"
                                                            @click="toggleDarkShadowEx('unownedCavern')">
                                                            EX02æ— ä¸»åœ°çªŸÂ·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">720
                                                        </button>
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.kiranSquare }"
                                                            @click="toggleDarkShadowEx('kiranSquare')">
                                                            EX03å¥‡å…°å¹¿åœºÂ·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">590
                                                        </button>
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.carnival }"
                                                            @click="toggleDarkShadowEx('carnival')">
                                                            EX04å˜‰å¹´åÂ·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">650
                                                        </button>
                                                    </div>
                                                    <!-- EXå³ä¾§æŒ‰é’® -->
                                                    <div class="ex-column">
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.highTowerBlackRing }"
                                                            @click="toggleDarkShadowEx('highTowerBlackRing')">
                                                            EX05é«˜å¡”é»‘ç¯Â·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">650
                                                        </button>
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.luxuryFeastFog }"
                                                            @click="toggleDarkShadowEx('luxuryFeastFog')">
                                                            EX06å¥¢å®´æµ“é›¾Â·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">650
                                                        </button>
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.drowningRainCity }"
                                                            @click="toggleDarkShadowEx('drowningRainCity')">
                                                            EX07æººé›¨å‚åŸÂ·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">650
                                                        </button>
                                                        <button 
                                                            class="ex-btn" 
                                                            :class="{ active: darkShadowEx.goldFeast }"
                                                            @click="toggleDarkShadowEx('goldFeast')">
                                                            EX08ç¢é‡‘ç››å®´Â·æš—å½±<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">650
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- è®°å¿†é£æš´ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">è®°å¿†é£æš´</h3>
                                            <div class="memory-storm-buttons">
                                                <button 
                                                    class="memory-storm-btn" 
                                                    :class="{ active: memoryStorm.memoryAnomaly }"
                                                    @click="toggleMemoryStorm('memoryAnomaly')">
                                                    è®°å¿†ç•¸ç‚¹<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">350
                                                </button>
                                                <button 
                                                    class="memory-storm-btn" 
                                                    :class="{ active: memoryStorm.impressionAnomaly }"
                                                    @click="toggleMemoryStorm('impressionAnomaly')">
                                                    å°è±¡ç•¸ç‚¹<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">350
                                                </button>
                                                <button 
                                                    class="memory-storm-btn" 
                                                    :class="{ active: memoryStorm.echoAnomaly }"
                                                    @click="toggleMemoryStorm('echoAnomaly')">
                                                    æ®‹å“ç•¸ç‚¹<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">350
                                                </button>
                                            </div>
                                        </div>

                                        <!-- æ±¡æŸ“ä¹‹å·¢ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ±¡æŸ“ä¹‹å·¢</h3>
                                            <div class="pollution-nest-buttons">
                                                <button 
                                                    class="pollution-nest-btn" 
                                                    :class="{ active: pollutionNest.forbiddenZoneProbe }"
                                                    @click="togglePollutionNest('forbiddenZoneProbe')">
                                                    ç¦åŒºæ¢æŸ¥<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">350
                                                </button>
                                                <button 
                                                    class="pollution-nest-btn" 
                                                    :class="{ active: pollutionNest.extremeDomainSearch }"
                                                    @click="togglePollutionNest('extremeDomainSearch')">
                                                    æåŸŸæœå¯»<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">210
                                                </button>
                                            </div>
                                        </div>

                                        <!-- æ¸…å‰¿è¡ŒåŠ¨ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ¸…å‰¿è¡ŒåŠ¨</h3>
                                            <div class="cleanup-operation-buttons">
                                                <button 
                                                    class="cleanup-operation-btn" 
                                                    :class="{ active: cleanupOperation.goldRush }"
                                                    @click="toggleCleanupOperation('goldRush')">
                                                    æ·˜é‡‘ç‹‚çƒ­<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">350
                                                </button>
                                                <button 
                                                    class="cleanup-operation-btn" 
                                                    :class="{ active: cleanupOperation.ominousSeed }"
                                                    @click="toggleCleanupOperation('ominousSeed')">
                                                    æ¶å…†ä¹‹ç§<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">350
                                                </button>
                                            </div>
                                        </div>

                                        <!-- å¸•å°”é©¬åºŸå¢Ÿ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">å¸•å°”é©¬åºŸå¢Ÿ</h3>
                                            <div class="palma-ruins-buttons">
                                                <div class="palma-ruins-row">
                                                    <button 
                                                        class="palma-ruins-btn" 
                                                        :class="{ active: palmaRuins.tenacious }"
                                                        @click="togglePalmaRuins('tenacious')">
                                                        åšéŸ§<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">280
                                                    </button>
                                                    <button 
                                                        class="palma-ruins-btn" 
                                                        :class="{ active: palmaRuins.berserk }"
                                                        @click="togglePalmaRuins('berserk')">
                                                        ç‹‚æš´<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">280
                                                    </button>
                                                </div>
                                                <div class="palma-ruins-row">
                                                    <button 
                                                        class="palma-ruins-btn" 
                                                        :class="{ active: palmaRuins.mysterious }"
                                                        @click="togglePalmaRuins('mysterious')">
                                                        è¯¡ç§˜<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">280
                                                    </button>
                                                    <button 
                                                        class="palma-ruins-btn" 
                                                        :class="{ active: palmaRuins.precise }"
                                                        @click="togglePalmaRuins('precise')">
                                                        ç²¾å‡†<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">280
                                                    </button>
                                                </div>
                                                <div class="palma-ruins-row">
                                                    <button 
                                                        class="palma-ruins-btn" 
                                                        :class="{ active: palmaRuins.supernatural }"
                                                        @click="togglePalmaRuins('supernatural')">
                                                        å¼‚èƒ½<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">280
                                                    </button>
                                                    <button 
                                                        class="palma-ruins-btn" 
                                                        :class="{ active: palmaRuins.inspiration }"
                                                        @click="togglePalmaRuins('inspiration')">
                                                        å¯è¿ª<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">280
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- æ´¾é£å£°æœ› -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ´¾é£å£°æœ›</h3>
                                            <div class="dispatch-reputation">
                                                <!-- æŒ‰é’®åŒºåŸŸ -->
                                                <div class="dispatch-buttons">
                                                    <div class="dispatch-columns">
                                                        <div class="dispatch-column">
                                                            <button 
                                                                class="dispatch-btn" 
                                                                :class="{ active: selectedDispatchArea === 'syndicate' }"
                                                                @click="selectDispatchArea('syndicate')">
                                                                è¾›è¿ªåŠ <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dispatchReputation.syndicate.crystal }}
                                                            </button>
                                                            <button 
                                                                class="dispatch-btn" 
                                                                :class="{ active: selectedDispatchArea === 'newCity' }"
                                                                @click="selectDispatchArea('newCity')">
                                                                æ–°åŸ<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dispatchReputation.newCity.crystal }}
                                                            </button>
                                                        </div>
                                                        <div class="dispatch-column">
                                                            <button 
                                                                class="dispatch-btn" 
                                                                :class="{ active: selectedDispatchArea === 'innerBay' }"
                                                                @click="selectDispatchArea('innerBay')">
                                                                é‡Œæ¹¾<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dispatchReputation.innerBay.crystal }}
                                                            </button>
                                                            <button 
                                                                class="dispatch-btn" 
                                                                :class="{ active: selectedDispatchArea === 'sandSea' }"
                                                                @click="selectDispatchArea('sandSea')">
                                                                ç ‚æµ·<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dispatchReputation.sandSea.crystal }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>                                    
                                                <!-- æ»‘å—åŒºåŸŸ -->
                                                <div class="slider-container" style="margin-top: 15px;">
                                                    <div class="slider-labels">
                                                        <span>0</span>
                                                        <span>10000</span>
                                                    </div>
                                                    <input 
                                                        type="range" 
                                                        v-model.number="dispatchReputation[selectedDispatchArea].level" 
                                                        min="0" 
                                                        max="10000"
                                                        step="1000"
                                                        class="score-slider"
                                                        list="dispatch-levels"
                                                        @input="snapDispatchLevel"
                                                    >
                                                    <datalist id="dispatch-levels">
                                                        <option value="0">0</option>
                                                        <option value="1000">1000</option>
                                                        <option value="3000">3000</option>
                                                        <option value="6000">6000</option>
                                                        <option value="10000">10000</option>
                                                    </datalist>
                                                    <div class="slider-value">
                                                        {{ getDispatchAreaName(selectedDispatchArea) }}å£°æœ›: {{ dispatchReputation[selectedDispatchArea].level }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- è§’è‰²å…»æˆ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">è§’è‰²å…»æˆ</h3>
                                            <!-- 3é˜¶ -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœª3é˜¶è§’è‰²æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ characterDevelopment.tier3 * 180 }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="characterDevelopment.tier3" placeholder="0" min="0" step="1" @input="validateCharacterDevInput('tier3')" @focus="clearCharacterDevIfZero('tier3')" @blur="setCharacterDevDefaultIfEmpty('tier3')">
                                                </div>
                                            </div>
                                            <!-- æ··å“Â·ç‹‚ -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªæ»¡æ··å“ç‹‚çº§è§’è‰²æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ characterDevelopment.maxReverbS * 210 }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="characterDevelopment.maxReverbS" placeholder="0" min="0" step="1" @input="validateCharacterDevInput('maxReverbS')" @focus="clearCharacterDevIfZero('maxReverbS')" @blur="setCharacterDevDefaultIfEmpty('maxReverbS')">
                                                </div>
                                            </div>
                                            <!-- æ··å“Â·å± -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªæ»¡æ··å“å±çº§è§’è‰²æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ characterDevelopment.maxReverbA * 60 }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="characterDevelopment.maxReverbA" placeholder="0" min="0" step="1" @input="validateCharacterDevInput('maxReverbA')" @focus="clearCharacterDevIfZero('maxReverbA')" @blur="setCharacterDevDefaultIfEmpty('maxReverbA')">
                                                </div>
                                            </div>
                                            <!-- æ··å“Â·æ™® -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªæ»¡æ··å“æ™®çº§è§’è‰²æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ characterDevelopment.maxReverbB * 20 }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="characterDevelopment.maxReverbB" placeholder="0" min="0" step="1" @input="validateCharacterDevInput('maxReverbB')" @focus="clearCharacterDevIfZero('maxReverbB')" @blur="setCharacterDevDefaultIfEmpty('maxReverbB')">
                                                </div>
                                            </div>
                                            <!-- å®¡æŸ¥Â·ç‹‚ -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªå®¡æŸ¥ç‹‚çº§è§’è‰²æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ characterDevelopment.reviewS * 200 }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="characterDevelopment.reviewS" placeholder="0" min="0" step="1" @input="validateCharacterDevInput('reviewS')" @focus="clearCharacterDevIfZero('reviewS')" @blur="setCharacterDevDefaultIfEmpty('reviewS')">
                                                </div>
                                            </div>
                                            <!-- å®¡æŸ¥Â·å± -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªå®¡æŸ¥å±çº§è§’è‰²æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ characterDevelopment.reviewA * 150 }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="characterDevelopment.reviewA" placeholder="0" min="0" step="1" @input="validateCharacterDevInput('reviewA')" @focus="clearCharacterDevIfZero('reviewA')" @blur="setCharacterDevDefaultIfEmpty('reviewA')">
                                                </div>
                                            </div>
                                            <!-- å®¡æŸ¥Â·æµ·æ‹‰ -->                                
                                            <button 
                                                class="character-development-btn" 
                                                :class="{ active: characterDevelopment.haylaReviewed }"
                                                @click="toggleHaylaReview">
                                                {{ characterDevelopment.haylaReviewed ? 'å·²å®¡æŸ¥æµ·æ‹‰ï¼' : 'æœªå®¡æŸ¥æµ·æ‹‰ï¼' }}
                                            </button>
                                        </div>

                                        <!-- æ¢¦å¢ƒ&äººæ ¼è‰²è°± -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ¢¦å¢ƒ&äººæ ¼è‰²è°±</h3>                                
                                            <!-- çª¥å¿ƒ -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªå®Œæˆçª¥å¿ƒæ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dreamInsightCrystal }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="dreamInsightCount" placeholder="0" min="0" step="1" @input="validateDreamInput('dreamInsightCount')" @focus="clearDreamIfZero('dreamInsightCount')" @blur="setDreamDefaultIfEmpty('dreamInsightCount')">
                                                </div>
                                            </div>
                                            <!-- æº¯æ—¶ -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªå®Œæˆæº¯æ—¶æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ dreamRetrospectCrystal }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="dreamRetrospectCount" placeholder="0" min="0" step="1" @input="validateDreamInput('dreamRetrospectCount')" @focus="clearDreamIfZero('dreamRetrospectCount')" @blur="setDreamDefaultIfEmpty('dreamRetrospectCount')">
                                                </div>
                                            </div>
                                            <!-- äººæ ¼è‰²è°± -->
                                            <div class="character-development-input">
                                                <span class="character-development-label">
                                                    æœªå®Œæˆäººæ ¼è‰²è°±æ•°é‡ï¼š
                                                    <span class="character-development-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ personalitySpectrumCrystal }}
                                                    </span>
                                                </span>
                                                <div class="character-development-controls">
                                                    <input type="number" v-model.number="personalitySpectrumCount" placeholder="0" min="0" step="1" @input="validateDreamInput('personalitySpectrumCount')" @focus="clearDreamIfZero('personalitySpectrumCount')" @blur="setDreamDefaultIfEmpty('personalitySpectrumCount')">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- æ— å°½æ¢¦é­‡-å¸¸é©» -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ— å°½æ¢¦é­‡-å¸¸é©»</h3>                                
                                            <!-- ç§¯åˆ†å¥–åŠ± -->
                                            <div class="nightmare-score">
                                                <h4 class="score-title">
                                                    ç§¯åˆ†å¥–åŠ± 
                                                    <span style="font-size: 14px; font-weight: normal; margin-left: 10px;">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ nightmareRemainingCrystal }} 
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ nightmareRemainingTickets }}
                                                    </span>
                                                </h4>
                                                <div class="slider-container">
                                                    <div class="slider-labels">
                                                        <span>0</span>
                                                        <span>60000</span>
                                                    </div>
                                                    <input 
                                                        type="range" 
                                                        v-model.number="nightmareScore" 
                                                        min="0" 
                                                        max="60000" 
                                                        step="1000"
                                                        class="score-slider"
                                                    >
                                                    <div class="slider-value">
                                                        å½“å‰ç§¯åˆ†: {{ nightmareScore }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ç°çƒ¬ä¹‹æ½®-é‡å¡‘ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">ç°çƒ¬ä¹‹æ½®-é‡å¡‘</h3>
                                            <div class="training-buttons">
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: ashTide.ashApostle }"
                                                    @click="toggleAshTide('ashApostle')">
                                                    ç°çƒ¬ä½¿å¾’<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">180
                                                </button>
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: ashTide.disasterLocust }"
                                                    @click="toggleAshTide('disasterLocust')">
                                                    ç¾è—ä½¿å¾’<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">180
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- æ´»åŠ¨ï¼ˆä¼°ç®—ï¼‰ -->
                                <div class="potential-section card">
                                    <h2 @click="toggleSection('activities')" class="section-header">
                                        ğŸ¯ æ´»åŠ¨èµ„æºï¼ˆâš ï¸ä¼°ç®—ï¼‰
                                        <span class="collapse-icon">{{ sections.activities ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    <div v-if="sections.activities" class="section-content">
                                        <!-- æ´»åŠ¨è¯´æ˜ -->
                                        <div style="font-size: 12px; color: #666; margin-top: 5px; font-style: italic;">
                                            &nbsp;&nbsp;æ— å‡†ç¡®æ’æœŸï¼Œä»…ä¼°ç®—æ´»åŠ¨ä¸å¤åˆ»å¥–åŠ±ï¼Œå¯è‡ªè¡Œå¢å‡<br>
                                        </div>

                                        <!-- åŠ¨æ€æ´»åŠ¨æ¨¡å— -->
                                        <div v-for="activity in displayActivities" :key="activity.title" class="sub-section">
                                            <h3 class="sub-title">{{ activity.title }}</h3>
                                            <!-- æœ¬æœŸæ´»åŠ¨ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">æ´»åŠ¨å¥–åŠ±ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> 
                                                        {{ activityCompleted[activity.title] ? 0 : (activity.title === 'å¦„å¤œè¿·ç« ' ? 1070 : (activity.title === 'æ­§è¡Œè‡³ç ´æ™“' ? 2000 : 1000)) }}
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> 
                                                        {{ activityCompleted[activity.title] ? 0 : (activity.title === 'æ­§è¡Œè‡³ç ´æ™“' ? 5 : 3) }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="activityCompleted[activity.title]"
                                                            @change="toggleActivityCompletion(activity.title)">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>
                                            
                                            <!-- ç»å¯†è¡ŒåŠ¨å¥–åŠ±ï¼ˆä»…é™æ­§è¡Œè‡³ç ´æ™“ï¼‰ -->
                                            <div class="accumulation-item" v-if="activity.title === 'æ­§è¡Œè‡³ç ´æ™“'">
                                                <div class="item-info">
                                                    <span class="item-title">ç»å¯†è¡ŒåŠ¨ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> 
                                                        {{ activitySecretOperationCompleted[activity.title] ? 0 : 200 }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="activitySecretOperationCompleted[activity.title]"
                                                            @change="toggleActivitySecretOperationCompletion(activity.title)">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- å…¬ä¼šæˆ˜å¥–åŠ±ï¼ˆä»…é™æ­§è¡Œè‡³ç ´æ™“ï¼‰ -->
                                            <div class="accumulation-item" v-if="activity.title === 'æ­§è¡Œè‡³ç ´æ™“'">
                                                <div class="item-info">
                                                    <span class="item-title">å…¬ä¼šæˆ˜å¥–åŠ±ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> 
                                                        {{ activityGuildWarCompleted[activity.title] ? 0 : 1100 }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="activityGuildWarCompleted[activity.title]"
                                                            @change="toggleActivityGuildWarCompletion(activity.title)">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- å¤åˆ»æ´»åŠ¨ -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">{{ activity.title === 'å¦„å¤œè¿·ç« ' ? 'æ— åŒªä¹‹åœ°' : 'å¤åˆ»æ´»åŠ¨' }}ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> 
                                                        {{ !activityRerunMode[activity.title] ? (activity.title === 'å¦„å¤œè¿·ç« ' ? 660 : 600) : 0 }}
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> 
                                                        {{ !activityRerunMode[activity.title] ? 1 : 0 }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="activityRerunMode[activity.title]">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- è¯¡å¢ƒä½™éŸ³ -->
                                            <div class="accumulation-item" v-if="activity.title === 'å¦„å¤œè¿·ç« '">
                                                <div class="item-info">
                                                    <span class="item-title">è¯¡å¢ƒä½™éŸ³ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ !remainingEchoActive ? 900 : 0 }}
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ !remainingEchoActive ? 1 : 0 }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="remainingEchoActive">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- ç¢æ™¶ä¹‹æ¢¦ -->
                                            <div class="accumulation-item" v-if="activity.title === 'å¦„å¤œè¿·ç« '">
                                                <div class="item-info">
                                                    <span class="item-title">ç¢æ™¶ä¹‹æ¢¦ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ !crystalDreamActive ? 360 : 0 }}
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ !crystalDreamActive ? 1 : 0 }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="crystalDreamActive">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>

                                            <!-- å®¡æŸ¥å¥–åŠ± -->
                                            <div class="accumulation-item">                            
                                                <div class="item-info">
                                                    <span class="item-title">å®¡æŸ¥å¥–åŠ±ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> 
                                                        {{ activityReviewCompleted[activity.title] ? 0 : (activity.title === 'æ–°å¹´æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰' ? 550 : 350) }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="activityReviewCompleted[activity.title]"
                                                            @change="toggleActivityReviewCompletion(activity.title)">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>
                                            <!-- è¯•ç”¨å¥–åŠ± -->
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">è§’è‰²è¯•ç”¨ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> 
                                                        {{ activityTrialCompleted[activity.title] ? 0 : (activity.title === 'æ­§è¡Œè‡³ç ´æ™“' || activity.title === 'æ–°å¹´æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰' ? 70 : 40) }}
                                                    </span>
                                                </div>
                                                <div class="switch-group small">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="activityTrialCompleted[activity.title]"
                                                            @change="toggleActivityTrialCompletion(activity.title)">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label">æœ¬æœŸå·²å®Œæˆ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- æ°ªé‡‘èµ„æº -->
                                <div class="potential-section card">
                                    <h2 @click="toggleSection('recharge')" class="section-header">
                                        ğŸ’° æ°ªé‡‘èµ„æº
                                        <span class="collapse-icon">{{ sections.recharge ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    <div v-if="sections.recharge" class="section-content">
                                        <!-- æ°ªé‡‘è¯´æ˜ -->
                                        <div class="explanation-row" style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px; padding: 10px; border-radius: 6px; border: 1px solid #444444;">
                                            <span class="explanation-text" style="font-size: 13px;">æ ‡ç­¾å†…æ•°å­—ä¸ºæ¯æŠ½ä»·æ ¼ï¼Œä¾‹ï¼š
                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                2.57
                                            </span>
                                                &nbsp;&nbsp;è¡¨ç¤ºä¸ºæ¯æŠ½2.57å…ƒ</span>
                                        </div>

                                        <!-- é»‘é’¥è´µå®¾ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title" style="display: flex; align-items: center; gap: 10px;">
                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                    2.57
                                                </span>
                                                é»‘é’¥è´µå®¾ï¼ˆå°æœˆå¡ï¼‰
                                            </h3>
                                            
                                            <div class="resource-input-vertical" style="margin-bottom: 15px;">
                                                <label style="min-width: 200px; display: flex; align-items: center; gap: 5px;">
                                                    é¢å¤–è´­ä¹°
                                                    <button class="skin-btn" @click="adjustMonthlyCard(-1)">âˆ’</button>
                                                    <span class="skin-count" style="min-width: 40px; text-align: center;">{{ monthlyCardCount }}</span>
                                                    <button class="skin-btn" @click="adjustMonthlyCard(1)">+</button>
                                                    å¼ æœˆå¡(è´Ÿæ•°ä»£è¡¨å·²æå‰è´­ä¹°)ï¼š
                                                </label>
                                            </div>
                                            
                                            <div style="font-size: 12px; color: #666; margin-bottom: 15px;">
                                                é¢å¤–è´­ä¹°ä¸€å¼ æœˆå¡å¯æå‰æ‹¿åˆ°300ç’€ç’¨æ™¶æºï¼Œå·²æå‰è´­ä¹°åˆ™åªèƒ½æ‹¿åˆ°æ¯æ—¥60å¼‚æ–¹æ™¶ï¼Œä¸è®¡ç®—30RMB
                                            </div>
                                            
                                            <!-- æœˆå¡å¥–åŠ±æŒ‰é’® -->
                                            <button 
                                                class="training-btn" 
                                                :class="{ active: monthlyCardActive }"
                                                @click="toggleMonthlyCard"
                                                style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                                é»‘é’¥è´µå®¾ 
                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº"> {{ monthlyCardPremiumCrystal }} 
                                                <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ monthlyCardCrystal }}
                                            </button>
                                        </div>

                                        <!-- é«˜çº§ç›‘å¯Ÿå¯†ä»¤ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title" style="display: flex; align-items: center; gap: 10px;">
                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                    6.24
                                                </span>
                                                é«˜çº§ç›‘å¯Ÿå¯†ä»¤ï¼ˆå¤§æœˆå¡ï¼‰
                                            </h3>
                                            <!-- é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœŸæ•° -->
                                            <div class="inspection-order-buttons">
                                                <div v-for="period in inspectionPeriods" :key="period.id" class="inspection-period-btn-wrapper">
                                                    <button 
                                                        class="inspection-period-btn" 
                                                        :class="{ active: (rechargeInspectionLevels[period.id] || 0) > 0 }"
                                                        @click="selectRechargeInspectionPeriod(period.id)">
                                                        {{ period.startDate }}åˆ°{{ period.endDate }} 
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">{{ calculateRechargePeriodCrystal(rechargeInspectionLevels[period.id] || 0) }}
                                                        <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">{{ calculateRechargePeriodTickets(rechargeInspectionLevels[period.id] || 0) }}
                                                    </button>
                                                </div>
                                            </div>                                
                                            <!-- é«˜çº§ç›‘å¯Ÿå¯†ä»¤æ»‘å—å®¹å™¨ -->
                                            <div class="inspection-slider-container" v-if="selectedRechargeInspectionPeriod">
                                                <div class="slider-labels">
                                                    <span>0çº§</span>
                                                    <span>55çº§</span>
                                                </div>
                                                <input 
                                                    type="range" 
                                                    v-model.number="rechargeInspectionLevels[selectedRechargeInspectionPeriod]" 
                                                    min="0" 
                                                    max="55"
                                                    step="1"
                                                    class="inspection-slider"
                                                    @input="snapRechargeInspectionLevel(selectedRechargeInspectionPeriod)"
                                                >
                                                <div class="slider-value">
                                                    {{ getSelectedRechargePeriodText() }} å½“å‰ç­‰çº§: {{ rechargeInspectionLevels[selectedRechargeInspectionPeriod] || 0 }}
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ç‹„æ–¯ç›ˆæ»¡é’µ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title" style="display: flex; justify-content: space-between; align-items: center;">
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                        1.64
                                                    </span>
                                                    <span>ç‹„æ–¯ç›ˆæ»¡é’µ</span>
                                                </div>
                                                <div class="switch-group" style="margin: 0;">
                                                    <span class="switch-label" :class="{ active: !disiPrePurchased, inactive: disiPrePurchased }">æœªé¢„å…ˆè´­ä¹°</span>
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="disiPrePurchased" :disabled="!disiActive">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label" :class="{ active: disiPrePurchased, inactive: !disiPrePurchased }">å·²é¢„å…ˆè´­ä¹°</span>
                                                </div>
                                            </h3>
                                            
                                            <button 
                                                class="training-btn" 
                                                :class="{ active: disiActive }"
                                                @click="toggleDisi"
                                                style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                                ç‹„æ–¯ç›ˆæ»¡é’µ
                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº"> {{ disiPremiumCrystal }} 
                                                <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"> {{ disiRewardTotal }}
                                            </button>
                                            
                                            <div class="slider-container">
                                                <div class="slider-labels">
                                                    <span>0çº§</span>
                                                    <span>50çº§</span>
                                                </div>
                                                <input 
                                                    type="range" 
                                                    v-model.number="disiLevel" 
                                                    min="0" 
                                                    max="50"
                                                    step="1"
                                                    class="inspection-slider"
                                                    list="disi-levels"
                                                    @input="snapDisiLevel"
                                                    :disabled="!disiActive"
                                                >
                                                <datalist id="disi-levels">
                                                    <option value="0">0</option>
                                                    <option value="5">5</option>
                                                    <option value="10">10</option>
                                                    <option value="15">15</option>
                                                    <option value="20">20</option>
                                                    <option value="25">25</option>
                                                    <option value="30">30</option>
                                                    <option value="35">35</option>
                                                    <option value="40">40</option>
                                                    <option value="42">42</option>
                                                    <option value="44">44</option>
                                                    <option value="46">46</option>
                                                    <option value="48">48</option>
                                                    <option value="50">50</option>
                                                </datalist>
                                                <div class="slider-value">
                                                    å½“å‰ç­‰çº§: {{ disiLevel }}
                                                </div>
                                            </div>
                                        </div>

                                        <!-- è¯¡ç‘çå®é¦† -->
                                        <div class="sub-section">
                                            <h3 class="sub-title" style="display: flex; justify-content: space-between; align-items: center;">
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                        8.8
                                                    </span>
                                                    <span>è¯¡ç‘çå®é¦†</span>
                                                </div>
                                                <div class="switch-group" style="margin: 0;">
                                                    <span class="switch-label" :class="{ active: !treasurePrePurchased, inactive: treasurePrePurchased }">æœªé¢„å…ˆè´­ä¹°</span>
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="treasurePrePurchased" :disabled="!treasureActive">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label" :class="{ active: treasurePrePurchased, inactive: !treasurePrePurchased }">å·²é¢„å…ˆè´­ä¹°</span>
                                                </div>
                                            </h3>
                                            
                                            <button 
                                                class="training-btn" 
                                                :class="{ active: treasureActive }"
                                                @click="toggleTreasure"
                                                style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                                è¯¡ç‘çå®é¦† 
                                                <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ treasureTickets }}
                                            </button>
                                        </div>

                                        <!-- ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title" style="display: flex; justify-content: space-between; align-items: center;">
                                                <div style="display: flex; align-items: center; gap: 10px;">
                                                    <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                        6.21
                                                    </span>
                                                    <span>ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸</span>
                                                </div>
                                                <!-- æ–°å¢é¢„è´­ä¹°å¼€å…³ -->
                                                <div class="switch-group" style="margin: 0;">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="specialFashionTour.prePurchased" :disabled="!specialFashionTour.active">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label" :class="{ active: specialFashionTour.prePurchased, inactive: !specialFashionTour.prePurchased }">å·²é¢„å…ˆè´­ä¹°</span>
                                                </div>
                                            </h3>
                                            
                                            <!-- æŒ‰é’®å’Œä¼˜æƒ æ¬¡æ•°è°ƒèŠ‚åœ¨åŒä¸€è¡Œ -->
                                            <div style="display: flex; align-items: center; gap: 15px; width: 100%; margin: 0 0 15px 0;">
                                                <button 
                                                    class="training-btn" 
                                                    :class="{ active: specialFashionTour.active }"
                                                    @click="toggleSpecialFashionTour"
                                                    style="flex: 1; min-width: 0;">
                                                    æ—¶å°šå·¡å›åº†å…¸ 
                                                    <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº"> {{ specialFashionTourPremiumCrystal }} 
                                                    <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤"> {{ specialFashionTourTickets }}
                                                </button>
                                                
                                                <!-- ä¼˜æƒ æ¬¡æ•°è°ƒèŠ‚åœ¨æŒ‰é’®å³ä¾§ -->
                                                <div style="display: flex; align-items: center; gap: 8px; flex-shrink: 0;">
                                                    <span style="font-size: 12px; color: #CCCCCC; white-space: nowrap;">ä¼˜æƒ :</span>
                                                    <input 
                                                        type="number" 
                                                        v-model.number="specialFashionTour.maxDiscounts" 
                                                        @input="validateDiscountCount"
                                                        @focus="clearDiscountIfZero"
                                                        @blur="setDiscountDefaultIfEmpty"
                                                        min="0" 
                                                        max="4"
                                                        style="width: 35px; padding: 4px; border: 1px solid #555555; border-radius: 4px; text-align: center; background: #333333; color: #FFFFFF; font-size: 14px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);">
                                                    <span style="font-size: 11px; color: #999; white-space: nowrap;">æ¬¡</span>
                                                </div>
                                            </div>

                                            <!-- ä¼˜æƒ ä½¿ç”¨æƒ…å†µå’Œæœç´¢ä»¤å¼€å…³åœ¨åŒä¸€è¡Œ -->
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; width: 100%;">
                                                <!-- å·¦ä¾§ï¼šä¼˜æƒ ä½¿ç”¨æƒ…å†µï¼ˆä¸æŒ‰é’®å·¦å¯¹é½ï¼‰ -->
                                                <div style="font-size: 12px; color: #666;">
                                                    ä¼˜æƒ æœ€å¤š4æ¬¡ï¼Œå·²ç”¨{{ specialFashionTour.usedDiscounts }}æ¬¡ï¼Œå‰©ä½™{{ remainingDiscounts }}æ¬¡
                                                </div>
                                                
                                                <!-- å³ä¾§ï¼šæœç´¢ä»¤æœ¬å‘¨å·²é¢†å–å¼€å…³ -->
                                                <div style="display: flex; align-items: center; gap: 8px;">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="specialFashionTour.completed" :disabled="!specialFashionTour.active">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="switch-label" :class="{ active: specialFashionTour.completed, inactive: !specialFashionTour.completed }">
                                                        æœç´¢ä»¤æœ¬å‘¨å·²é¢†å–
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰</h3>
                                            <div class="crystal-supply-buttons" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                                <div v-for="(button, index) in crystalSupplyButtons" :key="index" 
                                                    class="crystal-supply-btn-wrapper">
                                                    <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                        <button 
                                                            class="training-btn crystal-supply-btn" 
                                                            :class="{ active: button.purchased }"
                                                            @click="toggleCrystalSupplyButton(index)"
                                                            style="display: flex; justify-content: space-between; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                            <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 0;">
                                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                    {{ crystalSupplyUnitPrices[index] }}
                                                                </span>
                                                            </div>
                                                            <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0;">
                                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                                <span style="margin-right: 5px; font-weight: bold; white-space: nowrap;">{{ button.premiumCrystal }}</span>
                                                            </div>
                                                        </button>
                                                        <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                        <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                            <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                                ï¿¥{{ button.price }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰</h3>
                                            <div class="crystal-supply-buttons" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                                <div v-for="(button, index) in nonFirstCrystalSupplyButtons" :key="index" 
                                                    class="crystal-supply-btn-wrapper">
                                                    <div style="display: flex; align-items: center; gap: 8px;max-width: 100%;box-sizing: border-box;">
                                                        <button 
                                                            class="training-btn crystal-supply-btn" 
                                                            :class="{ active: (button.count !== null && button.count !== '' && button.count > 0) }"
                                                            style="display: flex; justify-content: space-between; align-items: center; padding: 12px 8px; flex: 1;">
                                                            <div class="crystal-supply-left" style="display: flex; align-items: center;">
                                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                                                                    {{ nonFirstCrystalSupplyUnitPrices[index] }}
                                                                </span>
                                                            </div>
                                                            <div class="crystal-supply-right" style="display: flex; align-items: center;">
                                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                                <span style="margin-right: 5px; font-weight: bold;">{{ button.premiumCrystal }}</span>
                                                            </div>
                                                        </button>
                                                        <!-- è¾“å…¥æ¡† -->
                                                        <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px;">
                                                            <input 
                                                                type="number" 
                                                                v-model.number="button.count" 
                                                                placeholder="0" 
                                                                min="0" 
                                                                step="1" 
                                                                @input="validateNonFirstCrystalSupplyInput(index)"
                                                                @focus="clearNonFirstCrystalSupplyIfZero(index)"
                                                                @blur="setNonFirstCrystalSupplyDefaultIfEmpty(index)"
                                                                style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                            <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px;">
                                                                ï¿¥{{ button.price }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- å¸¸é©»ç¤¼åŒ… -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">å¸¸é©»ç¤¼åŒ…</h3>
                                            <!-- æ–°äººè¿½è¸ªç¤¼åŒ… === -->                                
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: permanentPackage.active && permanentPackage.price > 0 }"
                                                        @click="togglePermanentPackage"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (permanentPackage.price / ((permanentPackage.premiumCrystal + permanentPackage.tickets * 180) / 180)).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">æ–°äººè¿½è¸ªç¤¼åŒ…</span>
                                                            <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ permanentPackage.premiumCrystal }}</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ permanentPackage.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ permanentPackage.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>
                                            <!-- æ¯å‘¨è¿½è¸ªç¤¼åŒ… === -->  
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: weeklyTrackingPackage.count > 0 && weeklyTrackingPackage.count <= weeklyTrackingPackageMaxCount }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (weeklyTrackingPackage.price / ((weeklyTrackingPackage.crystal + weeklyTrackingPackage.tickets * 180) / 180)).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">æ¯å‘¨è¿½è¸ªç¤¼åŒ…</span>
                                                            <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ weeklyTrackingPackage.crystal }}</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ weeklyTrackingPackage.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="weeklyTrackingPackage.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            :max="weeklyTrackingPackageMaxCount"
                                                            step="1" 
                                                            @input="validateWeeklyTrackingPackageInput"
                                                            @focus="clearWeeklyTrackingPackageIfZero"
                                                            @blur="setWeeklyTrackingPackageDefaultIfEmpty"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ weeklyTrackingPackage.price }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- æœˆåº¦è¿½è¸ªç¤¼åŒ…â…  -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: monthlyTrackingPackage1.count > 0 && monthlyTrackingPackage1.count <= monthlyTrackingPackageMaxCount }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (monthlyTrackingPackage1.price / (monthlyTrackingPackage1.tickets)).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">æœˆåº¦è¿½è¸ªç¤¼åŒ…â… </span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ monthlyTrackingPackage1.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="monthlyTrackingPackage1.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            :max="monthlyTrackingPackageMaxCount"
                                                            step="1" 
                                                            @input="validateMonthlyTrackingPackage1Input"
                                                            @focus="clearMonthlyTrackingPackage1IfZero"
                                                            @blur="setMonthlyTrackingPackage1DefaultIfEmpty"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ monthlyTrackingPackage1.price }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: monthlyTrackingPackage2.count > 0 && monthlyTrackingPackage2.count <= monthlyTrackingPackageMaxCount }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (monthlyTrackingPackage2.price / (monthlyTrackingPackage2.tickets)).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ monthlyTrackingPackage2.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="monthlyTrackingPackage2.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            :max="monthlyTrackingPackageMaxCount"
                                                            step="1" 
                                                            @input="validateMonthlyTrackingPackage2Input"
                                                            @focus="clearMonthlyTrackingPackage2IfZero"
                                                            @blur="setMonthlyTrackingPackage2DefaultIfEmpty"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ monthlyTrackingPackage2.price }}
                                                        </div>
                                                    </div>
                                                </div> 
                                            </div>
                                            <!-- å±€é•¿å°±ä»»ç‰¹ä¾› -->
                                            <div style="display: flex; flex-direction: column; gap: 0px;">
                                                <div v-for="(pkg, index) in directorSupplyPackages" :key="pkg.id" 
                                                    class="crystal-supply-btn-wrapper">
                                                    <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;margin-bottom: 10px;">
                                                        <button 
                                                            class="training-btn crystal-supply-btn" 
                                                            :class="{ active: pkg.active && pkg.price > 0 }"
                                                            @click="toggleDirectorSupplyPackage(index)"
                                                            :disabled="!directorSupplyPackageEnabled[index]"
                                                            style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0; opacity: directorSupplyPackageEnabled[index] ? 1 : 0.5;">
                                                            <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                    {{ (pkg.price / ((pkg.crystal + pkg.tickets * 180) / 180)).toFixed(2) }}
                                                                </span>
                                                            </div>
                                                            <div class="crystal-supply-right" style="display: flex; align-items: center; flex: 1; justify-content: flex-start;">
                                                                <span style="font-weight: bold; white-space: nowrap;">å±€é•¿å°±ä»»ç‰¹ä¾›{{ getRomanNumeral(pkg.id) }}</span>
                                                                <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ pkg.crystal }}</span>
                                                                <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ pkg.tickets }}</span>
                                                            </div>
                                                        </button>
                                                        <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                        <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                            <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                                ï¿¥{{ pkg.price }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- é™æ—¶ç¤¼åŒ… -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">é™æ—¶ç¤¼åŒ…</h3>  
                                            <div style="font-size: 12px; color: #666; margin-bottom: 15px;">
                                                æ³¨æ„ï¼šæ­¤æ¨¡å—ä¸ç»Ÿè®¡â€œç»Ÿåˆåè¿æœç´¢ä»¤â€ä»¥åŠâ€œéƒ½å¸‚æœç´¢ä»¤â€<br>
                                                â€œåŒè½¨æœç´¢ä»¤â€ç»Ÿä¸€æ˜¾ç¤ºä¸ºâ€œé€šç”¨æœç´¢ä»¤â€
                                            </div>
                
                                            <!-- ç›Ÿçº¦åºç« ç³»åˆ— -->
                                            <div v-for="(item, index) in covenantPackages" :key="'covenant' + index" 
                                                class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: item.count > 0 && item.count <= item.maxCount }"
                                                        @click="toggleCovenantPackage(item.id, index)"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ item.tag }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ item.name }}</span>
                                                            <img :src="limitedCouponIcon" class="resource-icon" alt="é™å®šåˆ¸">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ item.limitedCoupons }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† - åªæœ‰ç›Ÿçº¦åºç« â…¥éœ€è¦ -->
                                                    <div v-if="item.name === 'ç›Ÿçº¦åºç« â…¥'" style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="item.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            max="2"
                                                            step="1" 
                                                            @input="validateLimitedPackageInput('limitedPackageCovenant6')"
                                                            @focus="clearLimitedPackageIfZero('limitedPackageCovenant6')"
                                                            @blur="setLimitedPackageDefaultIfEmpty('limitedPackageCovenant6')"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ item.price }}
                                                        </div>
                                                    </div>
                                                    <div v-else style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ item.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- ç™½é¸½å·¡ç¤¼ç³»åˆ—ï¼ˆäº’æ–¥é€‰æ‹©ï¼‰ -->
                                            <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px;"
                                                class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div v-for="(item, index) in dovePackages" :key="'dove' + index" 
                                                    style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: item.active }"
                                                        @click="toggleLimitedPackage(item.id)"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ item.tag }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ item.name }}</span>
                                                            <template v-if="item.tickets > 0">
                                                                <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.tickets }}</span>
                                                            </template>
                                                            <template v-if="item.limitedCoupons > 0">
                                                                <img :src="limitedCouponIcon" class="resource-icon" alt="é™å®šåˆ¸">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.limitedCoupons }}</span>
                                                            </template>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ item.price }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- å•ä¸ªç¤¼åŒ… -->
                                            <div v-for="(item, index) in singlePackages" :key="'single' + index" 
                                                class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: item.active }"
                                                        @click="toggleLimitedPackage(item.id)"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ item.tag }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ item.name }}</span>
                                                            <template v-if="item.crystal > 0">
                                                                <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.crystal }}</span>
                                                            </template>
                                                            <template v-if="item.premiumCrystal > 0">
                                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.premiumCrystal }}</span>
                                                            </template>
                                                            <template v-if="item.tickets > 0">
                                                                <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.tickets }}</span>
                                                            </template>
                                                            <template v-if="item.limitedCoupons > 0">
                                                                <img :src="limitedCouponIcon" class="resource-icon" alt="é™å®šåˆ¸">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.limitedCoupons }}</span>
                                                            </template>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ item.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- ç‰¹ä¾›ç³»åˆ—å’Œç»„åˆè´­ä¹° -->
                                            <div style="display: flex; flex-direction: column; gap: 0px; margin-bottom: 10px;">
                                                <!-- ç»„åˆè´­ä¹° -->
                                                <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                    <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                        <button 
                                                            class="training-btn crystal-supply-btn" 
                                                            :class="{ active: limitedPackageCombo.active }"
                                                            @click="toggleComboPackage()"
                                                            style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                            <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                    5.06
                                                                </span>
                                                            </div>
                                                            <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                                <span style="font-weight: bold; white-space: nowrap;">ç»„åˆè´­ä¹°</span>
                                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                                <span style="font-weight: bold; white-space: nowrap;">180</span>
                                                                <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                                <span style="font-weight: bold; white-space: nowrap;">100</span>
                                                                <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                                <span style="font-weight: bold; white-space: nowrap;">2</span>
                                                            </div>
                                                        </button>
                                                        <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                        <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                            <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                                ï¿¥18
                                                            </div>
                                                        </div>
                                                    </div>    
                                                </div>

                                                <!-- ç‰¹ä¾›ç³»åˆ— -->
                                                <div v-for="(item, index) in supplyPackages" :key="'supply' + index" 
                                                    class="crystal-supply-btn-wrapper" 
                                                    :style="{ marginBottom: index === supplyPackages.length - 1 ? '0px' : '10px' }">
                                                    <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                        <button 
                                                            class="training-btn crystal-supply-btn" 
                                                            :class="{ active: item.active && !limitedPackageCombo.active }"
                                                            @click="toggleLimitedPackage(item.id)"
                                                            :disabled="limitedPackageCombo.active"
                                                            style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0; opacity: limitedPackageCombo.active ? 0.5 : 1;">
                                                            <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                    {{ item.tag }}
                                                                </span>
                                                            </div>
                                                            <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.name }}</span>
                                                                <template v-if="item.crystal > 0">
                                                                    <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                                    <span style="font-weight: bold; white-space: nowrap;">{{ item.crystal }}</span>
                                                                </template>
                                                                <template v-if="item.premiumCrystal > 0">
                                                                    <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                                    <span style="font-weight: bold; white-space: nowrap;">{{ item.premiumCrystal }}</span>
                                                                </template>
                                                                <template v-if="item.tickets > 0">
                                                                    <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                                    <span style="font-weight: bold; white-space: nowrap;">{{ item.tickets }}</span>
                                                                </template>
                                                            </div>
                                                        </button>
                                                        <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                        <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                            <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                                ï¿¥{{ item.price }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- è·ƒå‡è¡¥ç»™ç³»åˆ— -->
                                            <div style="display: flex; flex-direction: column; gap: 0px;">
                                                <div v-for="(item, index) in upgradePackages" :key="'upgrade' + index" 
                                                    class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                    <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                        <button 
                                                            class="training-btn crystal-supply-btn" 
                                                            :class="{ active: item.active }"
                                                            @click="toggleLimitedPackage(item.id)"
                                                            style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                            <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                                <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                    {{ item.tag }}
                                                                </span>
                                                            </div>
                                                            <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.name }}</span>
                                                                <img :src="premiumCrystalIcon" class="resource-icon" alt="ç’€ç’¨æ™¶æº">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.premiumCrystal }}</span>
                                                                <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                                <span style="font-weight: bold; white-space: nowrap;">{{ item.tickets }}</span>
                                                            </div>
                                                        </button>
                                                        <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                        <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                            <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                                ï¿¥{{ item.price }}
                                                            </div>
                                                        </div>
                                                    </div>    
                                                </div>
                                            </div>
                                        </div>

                                        <!-- å¾€æœŸç¤¼åŒ…å‚è€ƒ -->
                                        <div class="sub-section">
                                            <h3 class="sub-title">å¾€æœŸç¤¼åŒ…å‚è€ƒ</h3>
                                            <!-- è’æ—…è¿½è¸ªè¡¥ç»™â…  -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageCycle1.count > 0 && limitedPackageCycle1.count <= 2 }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageCycle1.price / ((limitedPackageCycle1.crystal + limitedPackageCycle1.tickets * 180) / 180)).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">è’æ—…è¿½è¸ªè¡¥ç»™â… </span>
                                                            <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageCycle1.crystal }}</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageCycle1.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="limitedPackageCycle1.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            max="2"
                                                            step="1" 
                                                            @input="validateLimitedPackageInput('limitedPackageCycle1')"
                                                            @focus="clearLimitedPackageIfZero('limitedPackageCycle1')"
                                                            @blur="setLimitedPackageDefaultIfEmpty('limitedPackageCycle1')"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageCycle1.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- è’æ—…è¿½è¸ªè¡¥ç»™â…¡ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageCycle2.count > 0 && limitedPackageCycle2.count <= 2 }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageCycle2.price / limitedPackageCycle2.tickets).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">è’æ—…è¿½è¸ªè¡¥ç»™â…¡</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageCycle2.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="limitedPackageCycle2.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            max="2"
                                                            step="1" 
                                                            @input="validateLimitedPackageInput('limitedPackageCycle2')"
                                                            @focus="clearLimitedPackageIfZero('limitedPackageCycle2')"
                                                            @blur="setLimitedPackageDefaultIfEmpty('limitedPackageCycle2')"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageCycle2.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- è’æ—…è¿½è¸ªè¡¥ç»™â…¢ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageCycle3.count > 0 && limitedPackageCycle3.count <= 2 }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageCycle3.price / limitedPackageCycle3.tickets).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">è’æ—…è¿½è¸ªè¡¥ç»™â…¢</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageCycle3.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="limitedPackageCycle3.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            max="2"
                                                            step="1" 
                                                            @input="validateLimitedPackageInput('limitedPackageCycle3')"
                                                            @focus="clearLimitedPackageIfZero('limitedPackageCycle3')"
                                                            @blur="setLimitedPackageDefaultIfEmpty('limitedPackageCycle3')"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageCycle3.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- è’æ—…è¿½è¸ªè¡¥ç»™â…£ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageCycle4.count > 0 && limitedPackageCycle4.count <= 2 }"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageCycle4.price / limitedPackageCycle4.tickets).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">è’æ—…è¿½è¸ªè¡¥ç»™â…£</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageCycle4.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- è¾“å…¥æ¡† -->
                                                    <div style="display: flex; flex-direction: column; align-items: center; min-width: 60px; flex-shrink: 0;">
                                                        <input 
                                                            type="number" 
                                                            v-model.number="limitedPackageCycle4.count" 
                                                            placeholder="0" 
                                                            min="0" 
                                                            max="2"
                                                            step="1" 
                                                            @input="validateLimitedPackageInput('limitedPackageCycle4')"
                                                            @focus="clearLimitedPackageIfZero('limitedPackageCycle4')"
                                                            @blur="setLimitedPackageDefaultIfEmpty('limitedPackageCycle4')"
                                                            style="width: 50px; padding: 6px 4px; border: 1px solid #555555; border-radius: 5px; text-align: center; background: #333333; color: #FFFFFF; box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); font-size: 14px;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageCycle4.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- ç»°å½±å¤œè¯â…  -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageShadow1.active }"
                                                        @click="toggleLimitedPackage('limitedPackageShadow1')"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageShadow1.price / limitedPackageShadow1.tickets).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">ç»°å½±å¤œè¯â… </span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageShadow1.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageShadow1.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- ç»°å½±å¤œè¯â…¡ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageShadow2.active }"
                                                        @click="toggleLimitedPackage('limitedPackageShadow2')"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageShadow2.price / limitedPackageShadow2.tickets).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">ç»°å½±å¤œè¯â…¡</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageShadow2.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageShadow2.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- ç»°å½±å¤œè¯â…¢ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageShadow3.active }"
                                                        @click="toggleLimitedPackage('limitedPackageShadow3')"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageShadow3.price / limitedPackageShadow3.tickets).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">ç»°å½±å¤œè¯â…¢</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageShadow3.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageShadow3.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- è¯¡äº‹æ–­ç«  -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageMystery.active }"
                                                        @click="toggleLimitedPackage('limitedPackageMystery')"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                {{ (limitedPackageMystery.price / 50).toFixed(2) }}
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">è¯¡äº‹æ–­ç« </span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">{{ limitedPackageMystery.tickets }}</span>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥{{ limitedPackageMystery.price }}
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>

                                            <!-- è’æ—…èµ„æºè¡¥ç»™ -->
                                            <div class="crystal-supply-btn-wrapper" style="margin-bottom: 10px;">
                                                <div style="display: flex; align-items: center; gap: 8px; max-width: 100%; box-sizing: border-box;">
                                                    <button 
                                                        class="training-btn crystal-supply-btn" 
                                                        :class="{ active: limitedPackageTravelSupply.active }"
                                                        @click="toggleLimitedPackage('limitedPackageTravelSupply')"
                                                        style="display: flex; gap: 15px; align-items: center; padding: 12px 8px; flex: 1; min-width: 0;">
                                                        <div class="crystal-supply-left" style="display: flex; align-items: center; min-width: 50px;justify-content: flex-start;">
                                                            <span class="price-tag" style="background: #8B0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; white-space: nowrap;">
                                                                9.00
                                                            </span>
                                                        </div>
                                                        <div class="crystal-supply-right" style="display: flex; align-items: center; min-width: 0; gap: 8px;flex: 1; justify-content: flex-start;">
                                                            <span style="font-weight: bold; white-space: nowrap;">è’æ—…èµ„æºè¡¥ç»™</span>
                                                            <img :src="ticketIcon" class="resource-icon" alt="æœç´¢ä»¤">
                                                            <span style="font-weight: bold; white-space: nowrap;">5</span>
                                                        </div>
                                                    </button>
                                                    <!-- ä»·æ ¼æ˜¾ç¤º -->
                                                    <div style="display: flex; align-items: center; min-width: 60px; flex-shrink: 0; height: 100%;">
                                                        <div style="text-align: center; font-size: 12px; color: #666; white-space: nowrap;">
                                                            ï¿¥45
                                                        </div>
                                                    </div>
                                                </div>    
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- å…¶ä»–èµ„æº -->
                                <div class="potential-section card">
                                    <h2 @click="toggleSection('otherEstimate')" class="section-header">
                                        ğŸ“ å…¶ä»–èµ„æº
                                        <span class="collapse-icon">{{ sections.otherEstimate ? 'âˆ’' : '+' }}</span>
                                    </h2>
                                    <div v-if="sections.otherEstimate" class="section-content">
                                        <!-- å‰ç»å…‘æ¢ç  -->
                                        <div class="sub-section">
                                            <div class="sub-title-wrapper">
                                                <h3 class="sub-title">å‰ç»å…‘æ¢ç </h3>
                                            </div>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">å‰ç»å…‘æ¢ç ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                        {{ previewCodeCrystal }}
                                                    </span>
                                                </div>
                                                <div class="claimed-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="otherEstimateSwitchStates.previewCode">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="claimed-switch-label">æœ¬æœŸå·²é¢†å–</span>
                                                </div>                                                
                                            </div>
                                        </div>
                                        
                                        <!-- ç‰ˆæœ¬ç¦åˆ©ç­¾åˆ°å¥–åŠ± -->
                                        <div class="sub-section">
                                            <div class="sub-title-wrapper">
                                                <h3 class="sub-title">ç­¾åˆ°å¥–åŠ±</h3>
                                            </div>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">ç­¾åˆ°å¥–åŠ±ï¼š</span>
                                                    <span class="item-value">
                                                        <template v-if="signInRewardBaseData.limitedCoupons > 0">
                                                            <img :src="limitedCouponIcon" class="resource-icon" alt="é™å®šåˆ¸">
                                                            {{ signInRewardBaseData.limitedCoupons }}
                                                        </template>
                                                        <template v-else>
                                                            <img :src="limitedCouponIcon" class="resource-icon" alt="é™å®šåˆ¸">0
                                                        </template>
                                                    </span>
                                                </div>
                                                <div class="claimed-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="otherEstimateSwitchStates.signInReward">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="claimed-switch-label">æœ¬æœŸå·²é¢†å–</span>
                                                </div>                                                
                                            </div>
                                        </div>
                                        
                                        <!-- åœæœæ›´æ–° -->
                                        <div class="sub-section">
                                            <div class="sub-title-wrapper">
                                                <h3 class="sub-title">åœæœæ›´æ–°</h3>
                                            </div>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">åœæœæ›´æ–°ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                        {{ maintenanceCrystal }}
                                                    </span>
                                                </div>
                                                <div class="claimed-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="otherEstimateSwitchStates.maintenance">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="claimed-switch-label">æœ¬æœŸå·²é¢†å–</span>
                                                </div>                                                
                                            </div>
                                        </div>
                                        
                                        <!-- åœæœç»´æŠ¤ -->
                                        <div class="sub-section">
                                            <div class="sub-title-wrapper">
                                                <h3 class="sub-title">åœæœç»´æŠ¤</h3>
                                            </div>
                                            <div class="accumulation-item">
                                                <div class="item-info">
                                                    <span class="item-title">åœæœç»´æŠ¤ï¼š</span>
                                                    <span class="item-value">
                                                        <img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶">
                                                        {{ maintenanceRepairCrystal }}
                                                    </span>
                                                </div>
                                                <div class="claimed-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" v-model="otherEstimateSwitchStates.maintenanceRepair">
                                                        <span class="slider"></span>
                                                    </label>
                                                    <span class="claimed-switch-label">æœ¬æœŸå·²é¢†å–</span>
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç¤¼åŒ…æ€§ä»·æ¯”é¡µé¢ -->                
                <div v-else-if="currentPage === 'valueAnalysis'">
                    <div class="value-analysis-page">
                        <!-- åœ¨å”®/å³å°†å¼€å”®çš„ç¤¼åŒ… -->
                        <div class="package-section">
                            <h2 class="section-title">ğŸ›ï¸ åœ¨å”®/å³å°†å¼€å”®çš„ç¤¼åŒ…</h2>
                            
                            <!-- æ’åºæŒ‰é’®åŒºåŸŸ -->
                            <div class="sort-controls-container">
                                <div class="sort-buttons">
                                    <button class="sort-btn" 
                                            :class="{ active: sortType === 'price' }"
                                            @click="sortPackages('price')">
                                        ä»·æ ¼
                                    </button>
                                    <button class="sort-btn" 
                                            :class="{ active: sortType === 'pureGacha' }"
                                            @click="sortPackages('pureGacha')">
                                        æŠ½å¡æ€§ä»·æ¯”
                                    </button>
                                    <button class="sort-btn" 
                                            :class="{ active: sortType === 'material' }"
                                            @click="sortPackages('material')">
                                        ç»¼åˆæ€§ä»·æ¯”
                                    </button>
                                </div>
                            </div>
                            
                            <!-- ç¤¼åŒ…åŒºåŸŸ -->
                            <div class="package-grid">
                                <!-- ä½¿ç”¨v-forå¾ªç¯æ¸²æŸ“æ’åºåçš„ç¤¼åŒ… -->
                                <div v-for="pkg in sortedPackageData" :key="pkg.id" class="package-container">
                                    <!-- åŸæœ‰çš„ç¤¼åŒ…å¡ç‰‡ä»£ç ä¿æŒä¸å˜ -->
                                    <div class="package-card" @click="togglePackageDetail(pkg.id)">
                                        <!-- å·¦ä¾§ï¼šç¤¼åŒ…å›¾ç‰‡ -->
                                        <div class="package-image">
                                            <img :src="pkg.image" :alt="pkg.name" class="package-img" loading="lazy">
                                        </div>
                                        <!-- ä¸­é—´ï¼šæ–‡æœ¬ä¿¡æ¯ -->
                                        <div class="package-info">
                                            <div class="package-stats">
                                                <div class="stat-item">
                                                    <span class="stat-value">{{ pkg.name }}</span>
                                                    <span class="stat-label">{{ pkg.price }}ï¿¥</span>
                                                </div>
                                            </div>
                                            <!-- ä»·æ ¼æ ‡ç­¾ -->
                                            <div class="price-tag-container">
                                                <span class="price-tag">ï¿¥{{ pkg.unitPrice }}/æŠ½</span>
                                            </div>
                                        </div>
                                        <!-- å³ä¾§ï¼šæ¡å½¢å›¾ -->
                                        <div class="package-chart">
                                            <div class="chart-item">
                                                <span class="chart-label">å«ææ–™</span>
                                                <div class="chart-bar-container">
                                                    <div class="chart-bar material-bar" :style="{ width: calculateBarWidth(pkg.chartData.material) + '%', borderRadius: calculateBorderRadius(pkg.chartData.material) }">
                                                        <span class="chart-percentage">{{ pkg.chartData.material }}%</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="chart-item">
                                                <span class="chart-label">çº¯æŠ½å¡</span>
                                                <div class="chart-bar-container">
                                                    <div class="chart-bar pure-gacha-bar" :style="{ width: calculateBarWidth(pkg.chartData.pureGacha) + '%', borderRadius: calculateBorderRadius(pkg.chartData.pureGacha) }">
                                                        <span class="chart-percentage">{{ pkg.chartData.pureGacha }}%</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="chart-item">
                                                <span class="chart-label">648çº¢æ™¶</span>
                                                <div class="chart-bar-container">
                                                    <div class="chart-bar red-crystal-bar" :style="{ width: calculateBarWidth(pkg.chartData.redCrystal) + '%', borderRadius: calculateBorderRadius(pkg.chartData.redCrystal) }">
                                                        <span class="chart-percentage">{{ pkg.chartData.redCrystal }}%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- è¯¦æƒ…åŒºåŸŸ -->
                                    <div v-if="expandedPackage === pkg.id" class="package-detail">
                                        <div class="detail-content">
                                            <!-- å¾ªç¯æ¸²æŸ“å¤šä¸ªè¡¨æ ¼ -->
                                            <div v-for="(table, tableIndex) in pkg.tables" :key="tableIndex" class="detail-table">
                                                <!-- åªæœ‰å½“è¡¨æ ¼æœ‰æ•°æ®æ—¶æ‰æ˜¾ç¤º -->
                                                <div v-if="table.items && table.items.length > 0">
                                                    <div class="detail-header">
                                                        <h4 class="detail-title">{{ table.title }}</h4>
                                                    </div>
                                                    <div class="detail-content">
                                                        <!-- è¡¨å¤´ -->
                                                        <div class="detail-row header-row">
                                                            <span class="col-name">åç§°</span>
                                                            <span class="col-quantity">æ•°é‡</span>
                                                            <span class="col-value">æŠ˜åˆå¼‚æ–¹æ™¶</span>
                                                            <span class="col-percentage">å æ¯”</span>
                                                        </div>
                                                        <!-- è¡¨æ ¼å†…å®¹ -->
                                                        <div v-for="(item, index) in table.items" :key="index" class="detail-row">
                                                            <div class="col-name">
                                                                <img :src="item.icon" class="item-icon" :alt="item.name">
                                                                <span>{{ item.name }}</span>
                                                            </div>
                                                            <span class="col-quantity">{{ item.quantity }}</span>
                                                            <span class="col-value">{{ item.value }}<img :src="crystalIcon" class="resource-icon" alt="å¼‚æ–¹æ™¶"></span>
                                                            <span class="col-percentage">{{ item.percentage }}%</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                    
                        </div>
                    </div>    
                </div>    
            </div>    
        </div>    
    </div>       

    <script>
        const { createApp } = Vue;
        const app = createApp({
            name: 'GachaCalculator',
            data() {
                // æ•°æ®åˆå§‹åŒ–ä¸æœ¬åœ°å­˜å‚¨æ¢å¤
                let savedData = {};
                try {
                    const saved = localStorage.getItem('gachaCalculatorData');
                    if (saved) {
                        savedData = JSON.parse(saved);
                        if (typeof savedData !== 'object') {
                            throw new Error('Invalid data format');
                        }
                    }
                } catch (e) {
                    console.error('è§£ælocalStorageå¤±è´¥ï¼Œæ¸…é™¤æŸåæ•°æ®å¹¶ä½¿ç”¨é»˜è®¤æ•°æ®', e);
                    localStorage.removeItem('gachaCalculatorData');
                    savedData = {};
                }

                return {
                    // ä¸»é¢˜æ¨¡å¼-falseä¸ºæµ…è‰²æ¨¡å¼tureä¸ºæ·±è‰²æ¨¡å¼
                    isDarkMode: savedData.isDarkMode !== undefined ? savedData.isDarkMode : false,

                    // èœå•æ å¼¹çª—ç®¡ç†ç³»ç»Ÿ
                    showModal: false,
                    currentModal: null,

                    // ä¾§è¾¹èœå•æ æ§åˆ¶
                    showSideMenu: savedData.showSideMenu !== undefined ? savedData.showSideMenu : true, // é»˜è®¤æ˜¾ç¤º
                    currentPage: 'calculator', // å½“å‰é¡µé¢ï¼šcalculator-æ”’æŠ½è®¡ç®—å™¨, valueAnalysis-ç¤¼åŒ…æ€§ä»·æ¯”

                    // è®°å½•å½“å‰å±•å¼€çš„ç¤¼åŒ…
                    expandedPackage: null,

                    // æ’åºçŠ¶æ€
                    sortType: 'price', // é»˜è®¤æŒ‰ä»·æ ¼æ’åº

                    // ç¤¼åŒ…æ•°æ®
                    packageData: [
                        // ç›Ÿçº¦åºç« â… 
                        {
                            id: 'covenant-1',
                            name: 'ç›Ÿçº¦åºç« â… ',
                            price: 6,
                            unitPrice: '3.00',
                            image: 'icons/ç›Ÿçº¦åºç« â… .png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'åŒè½¨æœç´¢ä»¤', icon: 'icons/åŒè½¨æœç´¢ä»¤.png', quantity: 2, value: 360, percentage: 481 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 481,
                                pureGacha: 481,
                                redCrystal: 100
                            }
                        },
                        // ç›Ÿçº¦åºç« â…¡
                        {
                            id: 'covenant-2', 
                            name: 'ç›Ÿçº¦åºç« â…¡',
                            price: 30,
                            unitPrice: '6.00',
                            image: 'icons/ç›Ÿçº¦åºç« â…¡.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'åŒè½¨æœç´¢ä»¤', icon: 'icons/åŒè½¨æœç´¢ä»¤.png', quantity: 5, value: 900, percentage: 241 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 241,
                                pureGacha: 241,
                                redCrystal: 100
                            }
                        },
                        // ç›Ÿçº¦åºç« â…¢
                        {
                            id: 'covenant-3',
                            name: 'ç›Ÿçº¦åºç« â…¢', 
                            price: 68,
                            unitPrice: '6.80',
                            image: 'icons/ç›Ÿçº¦åºç« â…¢.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'åŒè½¨æœç´¢ä»¤', icon: 'icons/åŒè½¨æœç´¢ä»¤.png', quantity: 10, value: 1800, percentage: 212 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 212,
                                pureGacha: 212,
                                redCrystal: 100
                            }
                        },
                        // ç›Ÿçº¦åºç« â…£
                        {
                            id: 'covenant-4',
                            name: 'ç›Ÿçº¦åºç« â…£', 
                            price: 198,
                            unitPrice: '6.60',
                            image: 'icons/ç›Ÿçº¦åºç« â…£.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'åŒè½¨æœç´¢ä»¤', icon: 'icons/åŒè½¨æœç´¢ä»¤.png', quantity: 30, value: 5400, percentage: 219 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 219,
                                pureGacha: 219,
                                redCrystal: 100
                            }
                        },
                        // ç›Ÿçº¦åºç« â…¤
                        {
                            id: 'covenant-5',
                            name: 'ç›Ÿçº¦åºç« â…¤', 
                            price: 328,
                            unitPrice: '6.56',
                            image: 'icons/ç›Ÿçº¦åºç« â…¤.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'åŒè½¨æœç´¢ä»¤', icon: 'icons/åŒè½¨æœç´¢ä»¤.png', quantity: 50, value: 9000, percentage: 220 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 220,
                                pureGacha: 220,
                                redCrystal: 100
                            }
                        },
                        // ç›Ÿçº¦åºç« â…¥
                        {
                            id: 'covenant-6',
                            name: 'ç›Ÿçº¦åºç« â…¥', 
                            price: 648,
                            unitPrice: '6.48',
                            image: 'icons/ç›Ÿçº¦åºç« â…¥.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'åŒè½¨æœç´¢ä»¤', icon: 'icons/åŒè½¨æœç´¢ä»¤.png', quantity: 100, value: 18000, percentage: 223 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 223,
                                pureGacha: 223,
                                redCrystal: 100
                            }
                        },
                        // åº”æ€¥å£ç²®
                        {
                            id: 'yingjikouliang',
                            name: 'åº”æ€¥å£ç²®', 
                            price: 18,
                            unitPrice: '-',
                            image: 'icons/åº”æ€¥å£ç²®.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ä½“åŠ›', icon: 'icons/ä½“åŠ›.png', quantity: 1200, value: 480, percentage: 214 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 214,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // å‘¨æœŸé…ç»™
                        {
                            id: 'zhouqipeiji',
                            name: 'å‘¨æœŸé…ç»™', 
                            price: 30,
                            unitPrice: '-',
                            image: 'icons/å‘¨æœŸé…ç»™.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ä½“åŠ›', icon: 'icons/ä½“åŠ›.png', quantity: 3200, value: 1280, percentage: 342 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 342,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // é»‘é’¥è´µå®¾
                        {
                            id: 'heiyaoguibin',
                            name: 'é»‘é’¥è´µå®¾', 
                            price: 30,
                            unitPrice: '2.57',
                            image: 'icons/é»‘é’¥è´µå®¾.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 300, value: 300, percentage: 80 },
                                        { name: 'å¼‚æ–¹æ™¶', icon: 'icons/å¼‚æ–¹æ™¶.png', quantity: 1800, value: 1800, percentage: 481 },
                                        { name: 'ä½“åŠ›', icon: 'icons/ä½“åŠ›.png', quantity: 3000, value: 1200, percentage: 321 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 882,
                                pureGacha: 562,
                                redCrystal: 100
                            }
                        },
                        // ç‰¹ä¾›ç»„åˆ
                        {
                            id: 'ç‰¹ä¾›ç»„åˆ',
                            name: 'ç‰¹ä¾›ç»„åˆ', 
                            price: 18,
                            unitPrice: '5.06',
                            image: 'icons/ç‰¹ä¾›ç»„åˆ.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 180, value: 180, percentage: 80 },
                                        { name: 'å¼‚æ–¹æ™¶', icon: 'icons/å¼‚æ–¹æ™¶.png', quantity: 100, value: 100, percentage: 45 },
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 2, value: 360, percentage: 160 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 285,
                                pureGacha: 285,
                                redCrystal: 100
                            }
                        },
                        // ç‹„æ–¯ç‰¹ä¾›
                        {
                            id: 'ç‹„æ–¯ç‰¹ä¾›',
                            name: 'ç‹„æ–¯ç‰¹ä¾›', 
                            price: 3,
                            unitPrice: '5.40',
                            image: 'icons/ç‹„æ–¯ç‰¹ä¾›.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'å¼‚æ–¹æ™¶', icon: 'icons/å¼‚æ–¹æ™¶.png', quantity: 100, value: 100, percentage: 267 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 267,
                                pureGacha: 267,
                                redCrystal: 100
                            }
                        },
                        // è´¹æ²™ç‰¹ä¾›
                        {
                            id: 'è´¹æ²™ç‰¹ä¾›',
                            name: 'è´¹æ²™ç‰¹ä¾›', 
                            price: 6,
                            unitPrice: '6.00',
                            image: 'icons/è´¹æ²™ç‰¹ä¾›.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 1, value: 180, percentage: 241 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 241,
                                pureGacha: 241,
                                redCrystal: 100
                            }
                        },   
                        // ä¸œæ´²ç‰¹ä¾›
                        {
                            id: 'ä¸œæ´²ç‰¹ä¾›',
                            name: 'ä¸œæ´²ç‰¹ä¾›', 
                            price: 18,
                            unitPrice: '9.00',
                            image: 'icons/ä¸œæ´²ç‰¹ä¾›.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 180, value: 180, percentage: 80 },
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 1, value: 180, percentage: 80 }
                                    ]
                                },
                            ],
                            chartData: {
                                material: 160,
                                pureGacha: 160,
                                redCrystal: 100
                            }
                        },  
                        // æ€æ„Ÿå‡åç¤¼åŒ£â… 
                        {
                            id: 'æ€æ„Ÿå‡åç¤¼åŒ£â… ',
                            name: 'æ€æ„Ÿå‡åç¤¼åŒ£â… ', 
                            price: 18,
                            unitPrice: '-',
                            image: 'icons/æ€æ„Ÿå‡åç¤¼åŒ£â… .png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç‹‚çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/ç‹‚çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 2, value: 200, percentage: 89 },
                                        { name: 'å±çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/å±çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 2, value: 66.66, percentage: 30 },
                                        { name: 'æ™®çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/æ™®çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 4, value: 66.68, percentage: 30 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 20000, value: 16, percentage: 7 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 156,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // æ€æ„Ÿå‡åç¤¼åŒ£â…¡
                        {
                            id: 'æ€æ„Ÿå‡åç¤¼åŒ£â…¡',
                            name: 'æ€æ„Ÿå‡åç¤¼åŒ£â…¡', 
                            price: 78,
                            unitPrice: '-',
                            image: 'icons/æ€æ„Ÿå‡åç¤¼åŒ£â…¡.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç‹‚çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/ç‹‚çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 6, value: 600, percentage: 62 },
                                        { name: 'å±çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/å±çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 6, value: 200, percentage: 21 },
                                        { name: 'æ™®çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/æ™®çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 8, value: 133.4, percentage: 14 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 60000, value: 48, percentage: 5 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 101,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // æ€æ„Ÿå‡åç¤¼åŒ£â…¢
                        {
                            id: 'æ€æ„Ÿå‡åç¤¼åŒ£â…¢',
                            name: 'æ€æ„Ÿå‡åç¤¼åŒ£â…¢', 
                            price: 128,
                            unitPrice: '-',
                            image: 'icons/æ€æ„Ÿå‡åç¤¼åŒ£â…¢.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç‹‚çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/ç‹‚çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 10, value: 1000, percentage: 63 },
                                        { name: 'å±çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/å±çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 10, value: 333.33, percentage: 21 },
                                        { name: 'æ™®çº§æ€æ„Ÿç²¾ç²¹', icon: 'icons/æ™®çº§æ€æ„Ÿç²¾ç²¹.png', quantity: 12, value: 200, percentage: 13 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 100000, value: 80, percentage: 5 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 101,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        }, 
                        // æ€æ„Ÿå‡åç¤¼åŒ£â…£
                        {
                            id: 'æ€æ„Ÿå‡åç¤¼åŒ£â…£',
                            name: 'æ€æ„Ÿå‡åç¤¼åŒ£â…£', 
                            price: 198,
                            unitPrice: '-',
                            image: 'icons/æ€æ„Ÿå‡åç¤¼åŒ£â…£.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'å¼‚è‰²æ€æ„Ÿç²¾ç²¹', icon: 'icons/å¼‚è‰²æ€æ„Ÿç²¾ç²¹.png', quantity: 1, value: 1800, percentage: 73 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 160000, value: 128, percentage: 5 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 78,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // é‡æ„å‡åæ‰‹è®°â… 
                        {
                            id: 'é‡æ„å‡åæ‰‹è®°â… ',
                            name: 'é‡æ„å‡åæ‰‹è®°â… ', 
                            price: 6,
                            unitPrice: '-',
                            image: 'icons/é‡æ„å‡åæ‰‹è®°â… .png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æ ¸å¿ƒé‡æ„ç¢ç‰‡', icon: 'icons/æ ¸å¿ƒé‡æ„ç¢ç‰‡.png', quantity: 200, value: 134, percentage: 179 },
                                        { name: 'è¾¹ç•Œé‡æ„ç¢ç‰‡', icon: 'icons/è¾¹ç•Œé‡æ„ç¢ç‰‡.png', quantity: 10000, value: 67, percentage: 90 },
                                        { name: 'ä¸­çº§ææ–™è¡¥ç»™ç®±', icon: 'icons/ä¸­çº§ææ–™è¡¥ç»™ç®±.png', quantity: 20, value: 48, percentage: 64 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 333,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },   
                        // é‡æ„å‡åæ‰‹è®°â…¡
                        {
                            id: 'é‡æ„å‡åæ‰‹è®°â…¡',
                            name: 'é‡æ„å‡åæ‰‹è®°â…¡', 
                            price: 30,
                            unitPrice: '-',
                            image: 'icons/é‡æ„å‡åæ‰‹è®°â…¡.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æ ¸å¿ƒé‡æ„ç¢ç‰‡', icon: 'icons/æ ¸å¿ƒé‡æ„ç¢ç‰‡.png', quantity: 500, value: 335, percentage: 90 },
                                        { name: 'è¾¹ç•Œé‡æ„ç¢ç‰‡', icon: 'icons/è¾¹ç•Œé‡æ„ç¢ç‰‡.png', quantity: 20000, value: 134, percentage: 36 },
                                        { name: 'é«˜çº§ææ–™è¡¥ç»™ç®±', icon: 'icons/é«˜çº§ææ–™è¡¥ç»™ç®±.png', quantity: 10, value: 72, percentage: 19 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 145,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // é‡æ„å‡åæ‰‹è®°â…¢
                        {
                            id: 'é‡æ„å‡åæ‰‹è®°â…¢',
                            name: 'é‡æ„å‡åæ‰‹è®°â…¢', 
                            price: 68,
                            unitPrice: '-',
                            image: 'icons/é‡æ„å‡åæ‰‹è®°â…¢.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æ ¸å¿ƒé‡æ„ç¢ç‰‡', icon: 'icons/æ ¸å¿ƒé‡æ„ç¢ç‰‡.png', quantity: 1000, value: 670, percentage: 79 },
                                        { name: 'è¾¹ç•Œé‡æ„ç¢ç‰‡', icon: 'icons/è¾¹ç•Œé‡æ„ç¢ç‰‡.png', quantity: 50000, value: 335, percentage: 40 },
                                        { name: 'è¶…é˜¶ææ–™è¡¥ç»™ç®±', icon: 'icons/è¶…é˜¶ææ–™è¡¥ç»™ç®±.png', quantity: 10, value: 216, percentage: 25 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 144,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // é‡æ„å‡åæ‰‹è®°â…£
                        {
                            id: 'é‡æ„å‡åæ‰‹è®°â…£',
                            name: 'é‡æ„å‡åæ‰‹è®°â…£', 
                            price: 198,
                            unitPrice: '-',
                            image: 'icons/é‡æ„å‡åæ‰‹è®°â…£.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æ ¸å¿ƒé‡æ„ç¢ç‰‡', icon: 'icons/æ ¸å¿ƒé‡æ„ç¢ç‰‡.png', quantity: 2000, value: 1340, percentage: 54 },
                                        { name: 'è¾¹ç•Œé‡æ„ç¢ç‰‡', icon: 'icons/è¾¹ç•Œé‡æ„ç¢ç‰‡.png', quantity: 100000, value: 670, percentage: 27 },
                                        { name: 'è¶…é˜¶ææ–™è¡¥ç»™ç®±', icon: 'icons/è¶…é˜¶ææ–™è¡¥ç»™ç®±.png', quantity: 50, value: 1080, percentage: 15 },
                                        { name: 'é«˜çº§ææ–™è¡¥ç»™ç®±', icon: 'icons/é«˜çº§ææ–™è¡¥ç»™ç®±.png', quantity: 50, value: 360, percentage: 44 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 200000, value: 160, percentage: 6 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 146,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â… 
                        {
                            id: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â… ',
                            name: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â… ', 
                            price: 68,
                            unitPrice: '6.80',
                            image: 'icons/éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â… .png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç»Ÿåˆåè¿æœç´¢ä»¤', icon: 'icons/ç»Ÿåˆåè¿æœç´¢ä»¤.png', quantity: 1, value: 1800, percentage: 212 },
                                        { name: 'å¼‚è‰²æ€æ„Ÿç²¾ç²¹', icon: 'icons/å¼‚è‰²æ€æ„Ÿç²¾ç²¹.png', quantity: 1, value: 100, percentage: 12 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 224,
                                pureGacha: 212,
                                redCrystal: 100
                            }
                        },
                        // éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¡
                        {
                            id: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¡',
                            name: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¡', 
                            price: 128,
                            unitPrice: '6.40',
                            image: 'icons/éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¡.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç»Ÿåˆåè¿æœç´¢ä»¤', icon: 'icons/ç»Ÿåˆåè¿æœç´¢ä»¤.png', quantity: 2, value: 3600, percentage: 226 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 226,
                                pureGacha: 226,
                                redCrystal: 100
                            }
                        },
                        // éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¢
                        {
                            id: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¢',
                            name: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¢', 
                            price: 198,
                            unitPrice: '6.60',
                            image: 'icons/éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…¢.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç»Ÿåˆåè¿æœç´¢ä»¤', icon: 'icons/ç»Ÿåˆåè¿æœç´¢ä»¤.png', quantity: 3, value: 5400, percentage: 219 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 219,
                                pureGacha: 219,
                                redCrystal: 100
                            }
                        },
                        // éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…£
                        {
                            id: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…£',
                            name: 'éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…£', 
                            price: 328,
                            unitPrice: '6.56',
                            image: 'icons/éšç§˜æ·±æ¸Šè¿½è¸ªè¡¥ç»™â…£.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç»Ÿåˆåè¿æœç´¢ä»¤', icon: 'icons/ç»Ÿåˆåè¿æœç´¢ä»¤.png', quantity: 5, value: 9000, percentage: 212 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 212,
                                pureGacha: 212,
                                redCrystal: 100
                            }
                        },
                        // ç‹‚å„è·ƒå‡è¡¥ç»™
                        {
                            id: 'ç‹‚å„è·ƒå‡è¡¥ç»™',
                            name: 'ç‹‚å„è·ƒå‡è¡¥ç»™', 
                            price: 198,
                            unitPrice: '22.00',
                            image: 'icons/ç‹‚å„è·ƒå‡è¡¥ç»™.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç‹‚çº§è·ƒå‡æŒ‡ä»¤', icon: 'icons/ç‹‚çº§è·ƒå‡æŒ‡ä»¤.png', quantity: 1, value: 5127.96, percentage: 208 },
                                    ]
                                },
                                {
                                    title: 'å¯é€‰å•†å“1ï¼ˆ2é€‰1ï¼‰',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 6, value: 1080, percentage: 44 },
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 540, value: 540, percentage: 22 },
                                    ]
                                },
                                {
                                    title: 'å¯é€‰å•†å“2ï¼ˆ2é€‰1ï¼‰',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 6, value: 1080, percentage: 44 },
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 540, value: 540, percentage: 22 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 295,
                                pureGacha: 88,
                                redCrystal: 100
                            }
                        },
                        // é«˜å±è·ƒå‡è¡¥ç»™
                        {
                            id: 'é«˜å±è·ƒå‡è¡¥ç»™',
                            name: 'é«˜å±è·ƒå‡è¡¥ç»™', 
                            price: 128,
                            unitPrice: '16.00',
                            image: 'icons/é«˜å±è·ƒå‡è¡¥ç»™.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'å±çº§è·ƒå‡æŒ‡ä»¤', icon: 'icons/å±çº§è·ƒå‡æŒ‡ä»¤.png', quantity: 1, value: 4241.78, percentage: 266 },
                                    ]
                                },
                                {
                                    title: 'å¯é€‰å•†å“1ï¼ˆ2é€‰1ï¼‰',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 4, value: 720, percentage: 45 },
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 360, value: 360, percentage: 23 },
                                    ]
                                },
                                {
                                    title: 'å¯é€‰å•†å“2ï¼ˆ2é€‰1ï¼‰',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 4, value: 720, percentage: 45 },
                                        { name: 'ç’€ç’¨æ™¶æº', icon: 'icons/ç’€ç’¨æ™¶æº.png', quantity: 360, value: 360, percentage: 23 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 356,
                                pureGacha: 90,
                                redCrystal: 100
                            }
                        },
                        // å’Œè®®è‡´å‡½
                        {
                            id: 'å’Œè®®è‡´å‡½',
                            name: 'å’Œè®®è‡´å‡½', 
                            price: 6,
                            unitPrice: '2.57',
                            image: 'icons/å’Œè®®è‡´å‡½.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 1, value: 180, percentage: 241 },
                                        { name: 'éƒ½å¸‚æœç´¢ä»¤', icon: 'icons/éƒ½å¸‚æœç´¢ä»¤.png', quantity: 1, value: 180, percentage: 241 },
                                        { name: 'å¼‚æ–¹æ™¶', icon: 'icons/å¼‚æ–¹æ™¶.png', quantity: 60, value: 60, percentage: 80 },                                
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 10000, value: 8, percentage: 11 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 572,
                                pureGacha: 562,
                                redCrystal: 100
                            }
                        },
                        // åŒç›Ÿä¹‹ä»ª
                        {
                            id: 'åŒç›Ÿä¹‹ä»ª',
                            name: 'åŒç›Ÿä¹‹ä»ª', 
                            price: 98,
                            unitPrice: '4.90',
                            image: 'icons/åŒç›Ÿä¹‹ä»ª.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 10, value: 1800, percentage: 148 },
                                        { name: 'éƒ½å¸‚æœç´¢ä»¤', icon: 'icons/éƒ½å¸‚æœç´¢ä»¤.png', quantity: 10, value: 1800, percentage: 148 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 295,
                                pureGacha: 295,
                                redCrystal: 100
                            }
                        },
                        // ç§˜é‡‘åœ£é“¸
                        {
                            id: 'ç§˜é‡‘åœ£é“¸',
                            name: 'ç§˜é‡‘åœ£é“¸', 
                            price: 45,
                            unitPrice: '15.00',
                            image: 'icons/ç§˜é‡‘åœ£é“¸.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 3, value: 540, percentage: 96 },
                                        { name: 'åç‰‡', icon: 'icons/åç‰‡.png', quantity: 10, value: 'æ— æ³•è¡¡é‡', percentage: '-' },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 0,
                                pureGacha: 96,
                                redCrystal: 100
                            }
                        },
                        // ç»˜æ¢¦é›†é€‰
                        {
                            id: 'ç»˜æ¢¦é›†é€‰',
                            name: 'ç»˜æ¢¦é›†é€‰', 
                            price: 18,
                            unitPrice: '-',
                            image: 'icons/ç»˜æ¢¦é›†é€‰.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'ç•™å½±è‡ªé€‰é›†', icon: 'icons/ç•™å½±èƒ¶ç‰‡.png', quantity: 5, value: 750, percentage: 334 },
                                        { name: 'ç•™å½±èƒ¶ç‰‡', icon: 'icons/ç•™å½±èƒ¶ç‰‡.png', quantity: 1, value: 150, percentage: 67 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 401,
                                pureGacha: 0,
                                redCrystal: 100
                            }
                        },
                        // ç™½é¸½å·¡ç¤¼â… 
                        {
                            id: 'ç™½é¸½å·¡ç¤¼â… ',
                            name: 'ç™½é¸½å·¡ç¤¼â… ', 
                            price: 68,
                            unitPrice: '6.80',
                            image: 'icons/ç™½é¸½å·¡ç¤¼â… .png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 10, value: 1800, percentage: 212 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 212,
                                pureGacha: 212,
                                redCrystal: 100
                            }
                        },
                        // ç™½é¸½å·¡ç¤¼â…¡
                        {
                            id: 'ç™½é¸½å·¡ç¤¼â…¡',
                            name: 'ç™½é¸½å·¡ç¤¼â…¡', 
                            price: 128,
                            unitPrice: '8.53',
                            image: 'icons/ç™½é¸½å·¡ç¤¼â…¡.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 15, value: 2700, percentage: 169 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 200000, value: 160, percentage: 10 },
                                        { name: 'ç‹‚ä¹±ç²¾ç²¹', icon: 'icons/ç‹‚ä¹±ç²¾ç²¹.png', quantity: 200000, value: 160, percentage: 10 },
                                        { name: 'è¶…é˜¶ææ–™è¡¥ç»™ç®±', icon: 'icons/è¶…é˜¶ææ–™è¡¥ç»™ç®±.png', quantity: 10, value: 216, percentage: 14 },
                                        { name: 'æŠ€èƒ½æ¨¡ç»„â…£', icon: 'icons/æŠ€èƒ½æ¨¡ç»„â…£.png', quantity: 10, value: 79, percentage: 5 },
                                        { name: 'æ ¸å¿ƒé‡æ„ç¢ç‰‡', icon: 'icons/æ ¸å¿ƒé‡æ„ç¢ç‰‡.png', quantity: 200, value: 134, percentage: 8 },
                                    ]
                                },
                            ],
                            chartData: {
                                material: 216,
                                pureGacha: 169,
                                redCrystal: 100
                            }
                        },
                        // ç™½é¸½å·¡ç¤¼â…¢
                        {
                            id: 'ç™½é¸½å·¡ç¤¼â…¢',
                            name: 'ç™½é¸½å·¡ç¤¼â…¢', 
                            price: 198,
                            unitPrice: '9.90',
                            image: 'icons/ç™½é¸½å·¡ç¤¼â…¢.png',
                            tables: [
                                {
                                    title: 'å›ºå®šå•†å“',
                                    items: [
                                        { name: 'æœç´¢ä»¤', icon: 'icons/æœç´¢ä»¤.png', quantity: 20, value: 3600, percentage: 146 },
                                        { name: 'ç‹„æ–¯å¸', icon: 'icons/ç‹„æ–¯å¸.png', quantity: 200000, value: 160, percentage: 6 },
                                        { name: 'ç‹‚ä¹±ç²¾ç²¹', icon: 'icons/ç‹‚ä¹±ç²¾ç²¹.png', quantity: 200000, value: 160, percentage: 6 },
                                        { name: 'è¶…é˜¶ææ–™è¡¥ç»™ç®±', icon: 'icons/è¶…é˜¶ææ–™è¡¥ç»™ç®±.png', quantity: 10, value: 216, percentage: 9 },
                                        { name: 'æŠ€èƒ½æ¨¡ç»„â…£', icon: 'icons/æŠ€èƒ½æ¨¡ç»„â…£.png', quantity: 10, value: 79, percentage: 3 },
                                        { name: 'æ ¸å¿ƒé‡æ„ç¢ç‰‡', icon: 'icons/æ ¸å¿ƒé‡æ„ç¢ç‰‡.png', quantity: 200, value: 134, percentage: 5 },
                                        { name: 'ç‹‚çº§é­‚è¯†å°è®°', icon: 'icons/ç‹‚çº§é­‚è¯†å°è®°.png', quantity: 10, value: 312, percentage: 13 },    
                                    ]
                                },
                            ],
                            chartData: {
                                material: 189,
                                pureGacha: 146,
                                redCrystal: 100
                            }
                        },                                                                                                                                                                                                                
                    ],

                    // å›¾ç‰‡è·¯å¾„ - ä½¿ç”¨ç»å¯¹è·¯å¾„
                    crystalIcon: 'icons/å¼‚æ–¹æ™¶.png',
                    ticketIcon: 'icons/æœç´¢ä»¤.png',
                    redCrystalIcon: 'icons/ç’€ç’¨æ™¶æº.png',
                    premiumCrystalIcon: 'icons/ç’€ç’¨æ™¶æº.png',
                    yellowTicketIcon: 'icons/é»„ç¥¨.png',
                    hlIcon:'icons/hl.gif',
                    limitedCouponIcon: 'icons/é™å®šåˆ¸.png',
                    alloyIcon: 'icons/å¤šé¡¹åˆé‡‘.png',

                    // å„æ¨¡å—çš„å±•å¼€/æŠ˜å çŠ¶æ€
                    sections: savedData.sections || {
                        resources: false,
                        daily: false,
                        potential: false,
                        activities: false,
                        pullSummary: false,
                        recharge: false,
                        otherEstimate: false
                    },

                    // å¡æ± æŒ‰é’®
                    poolDates: {
                        nextVersion: new Date(2025, 10, 20),  // 2025å¹´11æœˆ20æ—¥
                        newYear: new Date(2026, 1, 12)        // 2026å¹´2æœˆ12æ—¥
                    },
                    selectedTime: savedData?.selectedTime || 'nextVersion', // é»˜è®¤é€‰æ‹©å·¦è¾¹
                    calculateToPoolEnd: savedData?.calculateToPoolEnd || false, // é»˜è®¤è®¡ç®—åˆ°å¡æ± å¼€æ”¾å½“å¤©
                    versionWeeks: 4, // ç‰ˆæœ¬å¡æ± æŒç»­å‘¨æ•°ï¼ˆå›ºå®š4å‘¨ï¼‰

                    // é¥¼çŠ¶å›¾æ‚¬åœçŠ¶æ€
                    hoveredPieModule: null,
                    hoveredPieIndex: -1,
                    // é¥¼çŠ¶å›¾æ•°æ®
                    pieChartColors: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD'],
                    pieChartData: [],

                    // å½“å‰åº“å­˜æ•°æ®
                    resources: savedData.resources || {
                        crystal: 0,
                        premiumCrystal: 0,
                        tickets: 0
                    },

                    // çš®è‚¤é¢„ç•™çº¢æ™¶æ•°é‡
                    skinReserve: savedData?.skinReserve || {
                        skin880: 0,
                        skin1280: 0,
                        skin2580: 0
                    },

                    usePremiumCrystal: savedData?.usePremiumCrystal || false, // æ˜¯å¦ä½¿ç”¨ç’€ç’¨æ™¶æºæŠ½å¡å¼€å…³æ•°æ®
                    customAdjustment: savedData?.customAdjustment || 0, // è‡ªå®šä¹‰å¼‚æ–¹æ™¶ä¿®æ­£å€¼æ•°æ®
                    weeklyCompleted: savedData?.weeklyCompleted || false, // æœ¬å‘¨å‘¨å¸¸å¼€å…³æ•°æ®
                    dailyShareCompleted: savedData?.dailyShareCompleted || false, // æœ¬å‘¨åˆ†äº«å¼€å…³æ•°æ®
                    emotionDetectionCompleted: savedData?.emotionDetectionCompleted || false, // æœ¬æœˆæƒ…ç»ªæ£€æµ‹å¼€å…³æ•°æ®
                    signInRewardCompleted: savedData?.signInRewardCompleted || false, // æœ¬æœˆç­¾åˆ°å¼€å…³æ•°æ®
                    alloyCount: savedData.alloyCount || 0, // å¤šé¡¹åˆé‡‘å…‘æ¢è¾“å…¥æ¡†æ•°æ®
                    fashionTourCompleted: savedData?.fashionTourCompleted || false,
                    trackingExchanged: savedData?.trackingExchanged || false, // æœ¬æœˆè¿½è¸ªè®¤è¯å¼€å…³æ•°æ®
                    trackingCertificationCount: savedData?.trackingCertificationCount || 0, // æ‹¥æœ‰çš„é»„ç¥¨æ•°é‡
                    friendshipExchanged: savedData?.friendshipExchanged || false, // æœ¬æœˆå‹æƒ…å…‘æ¢å¼€å…³æ•°æ®
                    darkZoneSweepOnly: savedData?.darkZoneSweepOnly || false, // æš—åŸŸä»…æ‰«è¡å¼€å…³æ•°æ®
                    darkZoneCompleted: savedData?.darkZoneCompleted || false, // æœ¬å‘¨æš—åŸŸå¼€å…³æ•°æ®
                    darkZoneFirstCompleted: savedData?.darkZoneFirstCompleted || false, // æœ¬æœŸæš—åŸŸé¦–é€šå¼€å…³æ•°æ®
                    dataGapCompleted: savedData?.dataGapCompleted || false, // æ•°æ®é—´éš™å¼€å…³æ•°æ®

                    // ç‹‚å„ç‰¹è®­éš¾åº¦é€‰æ‹©
                    trainingModes: savedData?.trainingModes || {
                        steady: false,
                        fluctuating: false,
                        outOfControl: false,
                        crazy: false
                    },

                    // ç›‘å¯Ÿå¯†ä»¤æ•°æ®
                    selectedInspectionPeriod: savedData?.selectedInspectionPeriod || 1,
                    inspectionLevels: (() => {
                        const savedLevels = savedData?.inspectionLevels || {};
                        // ç¡®ä¿æ‰€æœ‰æœŸæ•°éƒ½æœ‰é»˜è®¤å€¼0
                        const defaultLevels = {};
                        // é¢„å®šä¹‰å¯èƒ½çš„æœŸæ•°ID
                        for (let i = 1; i <= 10; i++) {
                            defaultLevels[i] = savedLevels[i] !== undefined ? savedLevels[i] : 0;
                        }
                        return defaultLevels;
                    })(),

                    // é«˜çº§ç›‘å¯Ÿå¯†ä»¤æ•°æ®
                    selectedRechargeInspectionPeriod: savedData?.selectedRechargeInspectionPeriod || 1,
                    rechargeInspectionLevels: (() => {
                        const savedLevels = savedData?.rechargeInspectionLevels || {};
                        // ç¡®ä¿æ‰€æœ‰æœŸæ•°éƒ½æœ‰é»˜è®¤å€¼0
                        const defaultLevels = {};
                        // é¢„å®šä¹‰å¯èƒ½çš„æœŸæ•°ID
                        for (let i = 1; i <= 10; i++) {
                            defaultLevels[i] = savedLevels[i] !== undefined ? savedLevels[i] : 0;
                        }
                        return defaultLevels;
                    })(),  

                    // æ— å°½æ¢¦é­‡
                    nightmareScore: savedData?.nightmareScore || 60000,
                    nightmareSeaCompleted: savedData?.nightmareSeaCompleted || false,
                    nightMazeCompleted: savedData?.nightMazeCompleted || false,
                    // æ— å°½æ¢¦é­‡ç§¯åˆ†å¥–åŠ±æ•°æ®
                    nightmareRewards: [
                        { score: 1000, crystal: 100, tickets: 0 },
                        { score: 1500, crystal: 120, tickets: 0 },
                        { score: 2000, crystal: 0, tickets: 1 },
                        { score: 3000, crystal: 150, tickets: 0 },
                        { score: 4000, crystal: 0, tickets: 1 },
                        { score: 5000, crystal: 150, tickets: 0 },
                        { score: 6000, crystal: 200, tickets: 0 },
                        { score: 7000, crystal: 200, tickets: 0 },
                        { score: 8000, crystal: 0, tickets: 1 },
                        { score: 10000, crystal: 100, tickets: 0 },
                        { score: 12000, crystal: 100, tickets: 0 },
                        { score: 14000, crystal: 100, tickets: 0 },
                        { score: 16000, crystal: 100, tickets: 0 },
                        { score: 18000, crystal: 100, tickets: 0 },
                        { score: 20000, crystal: 100, tickets: 0 },
                        { score: 22000, crystal: 100, tickets: 0 },
                        { score: 24000, crystal: 0, tickets: 1 },
                        { score: 26000, crystal: 100, tickets: 0 },
                        { score: 28000, crystal: 100, tickets: 0 },
                        { score: 30000, crystal: 100, tickets: 0 },
                        { score: 32000, crystal: 100, tickets: 0 },
                        { score: 34000, crystal: 100, tickets: 0 },
                        { score: 36000, crystal: 0, tickets: 1 },
                        { score: 38000, crystal: 100, tickets: 0 },
                        { score: 40000, crystal: 100, tickets: 0 },
                        { score: 42000, crystal: 100, tickets: 0 },
                        { score: 44000, crystal: 100, tickets: 0 },
                        { score: 46000, crystal: 100, tickets: 0 },
                        { score: 48000, crystal: 0, tickets: 1 },
                        { score: 50000, crystal: 100, tickets: 0 },
                        { score: 52000, crystal: 100, tickets: 0 },
                        { score: 54000, crystal: 100, tickets: 0 },
                        { score: 56000, crystal: 100, tickets: 0 },
                        { score: 58000, crystal: 100, tickets: 0 },
                        { score: 60000, crystal: 0, tickets: 1 }
                    ],

                    // ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰æ•°æ®
                    mainStory: savedData?.mainStory || {
                        chaosBeyondA: false,
                        chaosBeyondB: false,
                        unownedCavernA: false,
                        unownedCavernB: false,
                        kiranSquareA: false,
                        kiranSquareB: false,
                        carnivalA: false,
                        carnivalB: false,
                        refugeeCampA: false,
                        refugeeCampB: false,
                        muddyDarkTrapA: false,
                        muddyDarkTrapB: false,
                        highTowerBlackRing: false,
                        darkSurgeA: false,
                        darkSurgeB: false,
                        goldFeastA: false,
                        goldFeastB: false,
                        canFeng: false
                    },

                    // è¡ŒåŠ¨çºªè¦
                    actionSummaryLevel: savedData?.actionSummaryLevel || 19,
                    actionSummaryList: [
                        "01Â·æ··æ²Œå½¼å²¸",
                        "02Â·æ··æ²Œå½¼å²¸", 
                        "03Â·æ— ä¸»åœ°çªŸ",
                        "04Â·æ— ä¸»åœ°çªŸ",
                        "05Â·å¥‡å…°å¹¿åœº",
                        "06Â·å¥‡å…°å¹¿åœº",
                        "07Â·å˜‰å¹´å",
                        "08Â·å˜‰å¹´å",
                        "09Â·æµæ°‘å¯¨",
                        "10Â·æµæ°‘å¯¨",
                        "11Â·æ²‰æµŠæš—é˜±",
                        "12Â·æ²‰æµŠæš—é˜±",
                        "13Â·é«˜å¡”é»‘ç¯",
                        "N1Â·æš—æ¶Œ",
                        "N2Â·æš—æ¶Œ", 
                        "N3Â·ç¢é‡‘ç››å®´",
                        "N4Â·ç¢é‡‘ç››å®´",
                        "N5Â·æ®‹é”‹",
                        "N6Â·æ®‹é”‹"
                    ],

                    // é›¶é•œç³»ç»Ÿæ•°æ®
                    zeroMirror: savedData?.zeroMirror || {
                        nightChronicle: false,
                        disCity: false,
                        syndicate: false,
                        newCity: false,
                        rustRiver: false,
                        foreignLand: false,
                        innerSea: false,
                        upperCourt: false,
                        madEvil: false
                    },

                    // è®°å¿†å¤ç°æ•°æ®
                    memoryReviewThreshold: savedData?.memoryReviewThreshold || 10000,

                    // æ—§æ¡ˆå½’æ¡£å¤„æ•°æ®
                    oldCaseArchiveCount: savedData?.oldCaseArchiveCount || 0,

                    // ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰æ•°æ®
                    darkShadowEx: savedData?.darkShadowEx || {
                        chaosBeyond: false,
                        unownedCavern: false,
                        kiranSquare: false,
                        carnival: false,
                        highTowerBlackRing: false,
                        luxuryFeastFog: false,
                        drowningRainCity: false,
                        goldFeast: false
                    },

                    // è®°å¿†é£æš´æ•°æ®
                    memoryStorm: savedData?.memoryStorm || {
                        memoryAnomaly: false,
                        impressionAnomaly: false,
                        echoAnomaly: false
                    },

                    // æ±¡æŸ“ä¹‹å·¢æ•°æ®
                    pollutionNest: savedData?.pollutionNest || {
                        forbiddenZoneProbe: false,
                        extremeDomainSearch: false
                    },

                    // æ¸…å‰¿è¡ŒåŠ¨æ•°æ®
                    cleanupOperation: savedData?.cleanupOperation || {
                        goldRush: false,
                        ominousSeed: false
                    },

                    // å¸•å°”é©¬åºŸå¢Ÿæ•°æ®
                    palmaRuins: savedData?.palmaRuins || {
                        tenacious: false,
                        berserk: false,
                        mysterious: false,
                        precise: false,
                        supernatural: false,
                        inspiration: false
                    },

                    // æ´¾é£å£°æœ›æ•°æ®
                    selectedDispatchArea: savedData?.selectedDispatchArea || 'syndicate',
                    dispatchReputation: savedData?.dispatchReputation || {
                        syndicate: { level: 10000, crystal: 0 },
                        newCity: { level: 10000, crystal: 0 },
                        innerBay: { level: 10000, crystal: 0 },
                        sandSea: { level: 10000, crystal: 0 }
                    },

                    // è§’è‰²å…»æˆæ•°æ®
                    characterDevelopment: savedData?.characterDevelopment || {
                        tier3: 0,
                        maxReverbS: 0,
                        maxReverbA: 0,
                        maxReverbB: 0,
                        reviewS: 0,
                        reviewA: 0,
                        haylaReviewed: true
                    },
                    
                    // æ¢¦å¢ƒ&äººæ ¼è‰²è°±æ•°æ®
                    dreamInsightCount: savedData?.dreamInsightCount || 0,
                    dreamRetrospectCount: savedData?.dreamRetrospectCount || 0,
                    personalitySpectrumCount: savedData?.personalitySpectrumCount || 0,

                    // ç°çƒ¬ä¹‹æ½®-é‡å¡‘æ•°æ®
                    ashTide: savedData?.ashTide || {
                        ashApostle: false,
                        disasterLocust: false
                    },

                    // æ´»åŠ¨                    
                    // æ´»åŠ¨æ’æœŸæ•°æ®
                    activitySchedule: [
                        { start: '2025-10-23', end: '2025-11-20', title: 'å¦„å¤œè¿·ç« ' },
                        { start: '2025-11-20', end: '2025-12-18', title: 'æ­§è¡Œè‡³ç ´æ™“' },
                        { start: '2025-12-18', end: '2026-01-15', title: 'çŒ«çœ¼ä¸‰å§å¦¹è”åŠ¨' },
                        { start: '2026-01-15', end: '2026-02-12', title: 'æ— å°½æ¢¦é­‡ç‰ˆæœ¬' },
                        { start: '2026-02-12', end: '2026-03-12', title: 'æ–°å¹´ç‰ˆæœ¬' }
                    ],
                    // æ´»åŠ¨å®Œæˆå¥–åŠ±
                    activityCompleted: savedData?.activityCompleted || {},
                    // æ´»åŠ¨å®¡æŸ¥å¥–åŠ±
                    activityReviewCompleted: savedData?.activityReviewCompleted || {},
                    // æ´»åŠ¨è§’è‰²è¯•ç”¨å¥–åŠ±
                    activityTrialCompleted: savedData?.activityTrialCompleted || {},
                    // æ´»åŠ¨å¤åˆ»æ¨¡å¼çŠ¶æ€
                    activityRerunMode: savedData?.activityRerunMode || {
                        'å¦„å¤œè¿·ç« ': false,
                        'æ­§è¡Œè‡³ç ´æ™“': false, 
                        '1218-0115æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰': false,
                        '0115-0212æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰': false,
                        'æ–°å¹´æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰': false
                    },
                    // è¯¡å¢ƒä½™éŸ³
                    remainingEchoActive: savedData?.remainingEchoActive !== undefined ? savedData.remainingEchoActive : false,
                    // ç¢æ™¶ä¹‹æ¢¦
                    crystalDreamActive: savedData?.crystalDreamActive !== undefined ? savedData.crystalDreamActive : false,
                    // æ´»åŠ¨å…¬ä¼šæˆ˜å®ŒæˆçŠ¶æ€
                    activityGuildWarCompleted: savedData?.activityGuildWarCompleted || {},
                    // æ´»åŠ¨ç»å¯†è¡ŒåŠ¨å®ŒæˆçŠ¶æ€
                    activitySecretOperationCompleted: savedData?.activitySecretOperationCompleted || {},

                    monthlyCardCount: savedData?.monthlyCardCount || 0, // é¢å¤–è´­ä¹°æœˆå¡æ•°é‡
                    monthlyCardActive: savedData?.monthlyCardActive || false, // æœˆå¡æ˜¯å¦æ¿€æ´»
                    
                    // ç‹„æ–¯ç›ˆæ»¡é’µæ•°æ®
                    disiLevel: savedData?.disiLevel || 0,
                    disiActive: savedData?.disiActive || false,
                    disiPrePurchased: savedData?.disiPrePurchased || false,
                    disiRewards: [
                        { level: 0, crystal: 0 },
                        { level: 5, crystal: 400 },
                        { level: 10, crystal: 400 },
                        { level: 15, crystal: 500 },
                        { level: 20, crystal: 500 },
                        { level: 25, crystal: 600 },
                        { level: 30, crystal: 600 },
                        { level: 35, crystal: 600 },
                        { level: 40, crystal: 800 },
                        { level: 42, crystal: 800 },
                        { level: 44, crystal: 800 },
                        { level: 46, crystal: 1000 },
                        { level: 48, crystal: 1000 },
                        { level: 50, crystal: 1800 }
                    ],

                    // è¯¡ç‘çå®é¦†æ•°æ®
                    treasureActive: savedData?.treasureActive || false,
                    treasurePrePurchased: savedData?.treasurePrePurchased || false,

                    // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸
                    specialFashionTour: {
                        active: savedData?.specialFashionTour?.active || false,
                        completed: savedData?.specialFashionTour?.completed || false,
                        usedDiscounts: savedData?.specialFashionTour?.usedDiscounts || 0,
                        maxDiscounts: savedData?.specialFashionTour?.maxDiscounts !== undefined ? 
                                    savedData.specialFashionTour.maxDiscounts : 4,  // é»˜è®¤4æ¬¡ï¼Œå¯ç”¨æˆ·è°ƒèŠ‚
                        prePurchased: savedData?.specialFashionTour?.prePurchased || false  // æ–°å¢é¢„è´­ä¹°çŠ¶æ€
                    },

                    // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰
                    crystalSupplyButtons: [
                    { price: 6, premiumCrystal: 120, purchased: savedData?.crystalSupplyPurchased?.[0] || false },
                    { price: 30, premiumCrystal: 600, purchased: savedData?.crystalSupplyPurchased?.[1] || false },
                    { price: 98, premiumCrystal: 1960, purchased: savedData?.crystalSupplyPurchased?.[2] || false },
                    { price: 198, premiumCrystal: 3960, purchased: savedData?.crystalSupplyPurchased?.[3] || false },
                    { price: 328, premiumCrystal: 6560, purchased: savedData?.crystalSupplyPurchased?.[4] || false },
                    { price: 648, premiumCrystal: 12960, purchased: savedData?.crystalSupplyPurchased?.[5] || false }
                    ],

                    // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰
                    nonFirstCrystalSupplyButtons: (() => {
                        const counts = savedData?.nonFirstCrystalSupplyCounts || [0, 0, 0, 0, 0, 0];
                        return [
                            { price: 6, premiumCrystal: 60, count: counts[0] },
                            { price: 30, premiumCrystal: 330, count: counts[1] },
                            { price: 98, premiumCrystal: 1130, count: counts[2] },
                            { price: 198, premiumCrystal: 2380, count: counts[3] },
                            { price: 328, premiumCrystal: 3980, count: counts[4] },
                            { price: 648, premiumCrystal: 8080, count: counts[5] }
                        ];
                    })(),

                    // å¸¸é©»ç¤¼åŒ…æ•°æ®
                    // æ–°äººè¿½è¸ªç¤¼åŒ…
                    permanentPackage: {
                        active: savedData?.permanentPackageActive || false,
                        premiumCrystal: 1800,
                        tickets: 10,
                        price: 128
                    },
                    // æ¯å‘¨è¿½è¸ªç¤¼åŒ…
                    weeklyTrackingPackage: {
                        count: savedData?.weeklyTrackingPackageCount || 0,
                        crystal: 60,
                        tickets: 1,
                        price: 6
                    },
                    // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… &â…¡
                    monthlyTrackingPackage1: {
                        count: savedData?.monthlyTrackingPackage1Count || 0,
                        tickets: 10,
                        price: 98
                    },
                    monthlyTrackingPackage2: {
                        count: savedData?.monthlyTrackingPackage2Count || 0,
                        tickets: 20,
                        price: 168
                    },
                    // å±€é•¿å°±ä»»ç‰¹ä¾›
                    directorSupplyPackages: [
                        { id: 1, active: savedData?.directorSupplyActive?.[0] || false, crystal: 60, tickets: 1, price: 6 },
                        { id: 2, active: savedData?.directorSupplyActive?.[1] || false, crystal: 300, tickets: 3, price: 30 },
                        { id: 3, active: savedData?.directorSupplyActive?.[2] || false, crystal: 680, tickets: 5, price: 68 },
                        { id: 4, active: savedData?.directorSupplyActive?.[3] || false, crystal: 1980, tickets: 10, price: 198 },
                        { id: 5, active: savedData?.directorSupplyActive?.[4] || false, crystal: 3280, tickets: 15, price: 328 },
                        { id: 6, active: savedData?.directorSupplyActive?.[5] || false, crystal: 6480, tickets: 20, price: 648 }
                    ],
                    // é™æ—¶ç¤¼åŒ…æ•°æ®
                    // è’æ—…è¿½è¸ªè¡¥ç»™ç³»åˆ—
                    limitedPackageCycle1: {
                        count: savedData?.limitedPackageCycle1Count || 0,
                        crystal: 60,
                        tickets: 1,
                        price: 6
                    },
                    limitedPackageCycle2: {
                        count: savedData?.limitedPackageCycle2Count || 0,
                        crystal: 0,
                        tickets: 4,
                        price: 28
                    },
                    limitedPackageCycle3: {
                        count: savedData?.limitedPackageCycle3Count || 0,
                        crystal: 0,
                        tickets: 10,
                        price: 78
                    },
                    limitedPackageCycle4: {
                        count: savedData?.limitedPackageCycle4Count || 0,
                        crystal: 0,
                        tickets: 20,
                        price: 168
                    },
                    // ç»°å½±å¤œè¯ç³»åˆ—
                    limitedPackageShadow1: {
                        active: savedData?.limitedPackageShadow1Active || false,
                        crystal: 0,
                        tickets: 10,
                        price: 68
                    },
                    limitedPackageShadow2: {
                        active: savedData?.limitedPackageShadow2Active || false,
                        crystal: 0,
                        tickets: 15,
                        price: 128
                    },
                    limitedPackageShadow3: {
                        active: savedData?.limitedPackageShadow3Active || false,
                        crystal: 0,
                        tickets: 20,
                        price: 198
                    },
                    // è¯¡äº‹æ–­ç« 
                    limitedPackageMystery: {
                        active: savedData?.limitedPackageMysteryActive || false,
                        crystal: 0,
                        tickets: 40,
                        price: 328
                    },
                    // è’æ—…èµ„æºè¡¥ç»™
                    limitedPackageTravelSupply: {
                        active: savedData?.limitedPackageTravelSupplyActive || false,
                        crystal: 0,
                        tickets: 5,
                        price: 45
                    },
                    // é‡æ„çš„é™æ—¶ç¤¼åŒ…æ•°æ®ç»“æ„
                    covenantPackages: [
                        { id: 'limitedPackageCovenant1', name: 'ç›Ÿçº¦åºç« â… ', tag: '3.00', limitedCoupons: 2, price: 6, count: 0, maxCount: 1 },
                        { id: 'limitedPackageCovenant2', name: 'ç›Ÿçº¦åºç« â…¡', tag: '6.00', limitedCoupons: 5, price: 30, count: 0, maxCount: 1 },
                        { id: 'limitedPackageCovenant3', name: 'ç›Ÿçº¦åºç« â…¢', tag: '6.80', limitedCoupons: 10, price: 68, count: 0, maxCount: 1 },
                        { id: 'limitedPackageCovenant4', name: 'ç›Ÿçº¦åºç« â…£', tag: '6.60', limitedCoupons: 30, price: 198, count: 0, maxCount: 1 },
                        { id: 'limitedPackageCovenant5', name: 'ç›Ÿçº¦åºç« â…¤', tag: '6.56', limitedCoupons: 50, price: 328, count: 0, maxCount: 1 },
                        { id: 'limitedPackageCovenant6', name: 'ç›Ÿçº¦åºç« â…¥', tag: '6.48', limitedCoupons: 100, price: 648, count: 0, maxCount: 2 }
                    ],
                    
                    dovePackages: [
                        { id: 'limitedPackageDove1', name: 'ç™½é¸½å·¡ç¤¼Â·ç»„åˆç‰¹ä¾›â… ', tag: '6.80', tickets: 10, price: 68, active: false },
                        { id: 'limitedPackageDove2', name: 'ç™½é¸½å·¡ç¤¼Â·ç»„åˆç‰¹ä¾›â…¡', tag: '8.53', tickets: 15, price: 128, active: false },
                        { id: 'limitedPackageDove3', name: 'ç™½é¸½å·¡ç¤¼Â·ç»„åˆç‰¹ä¾›â…¢', tag: '9.90', tickets: 20, price: 198, active: false }
                    ],
                    
                    singlePackages: [
                        { id: 'limitedPackageGolden', name: 'ç§˜é‡‘åœ£é“¸', tag: '15.0', tickets: 3, price: 45, active: false },
                        { id: 'limitedPackageAgreement', name: 'å’Œè®®è‡´å‡½', tag: '4.50', crystal: 60, tickets: 1, price: 6, active: false },
                        { id: 'limitedPackageAlliance', name: 'åŒç›Ÿä¹‹ä»ª', tag: '9.80', tickets: 10, price: 98, active: false }
                    ],
                    
                    supplyPackages: [
                        { id: 'limitedPackageDis', name: 'ç‹„æ–¯ç‰¹ä¾›', tag: '5.40', crystal: 100, price: 3, active: false },
                        { id: 'limitedPackageFesa', name: 'è´¹æ²™ç‰¹ä¾›', tag: '6.00', tickets: 1, price: 6, active: false },
                        { id: 'limitedPackageEast', name: 'ä¸œæ´²ç‰¹ä¾›', tag: '9.00', premiumCrystal: 180, tickets: 1, price: 18, active: false }
                    ],
                    
                    upgradePackages: [
                        { id: 'limitedPackageDanger', name: 'é«˜å±è·ƒå‡è¡¥ç»™', tag: '21.33', premiumCrystal: 360, tickets: 4, price: 128, active: false },
                        { id: 'limitedPackageMadness', name: 'ç‹‚å„è·ƒå‡è¡¥ç»™', tag: '22.00', premiumCrystal: 540, tickets: 6, price: 198, active: false }
                    ],
                    
                    // ç»„åˆè´­ä¹°
                    limitedPackageCombo: { active: false, premiumCrystal: 180, crystal: 100, tickets: 2, price: 18 },

                    // å…¶ä»–èµ„æºæ¨¡å—å¼€å…³çŠ¶æ€
                    otherEstimateSwitchStates: savedData?.otherEstimateSwitchStates || {
                    previewCode: false,      // å‰ç»å…‘æ¢ç 
                    signInReward: false,     // ç­¾åˆ°å¥–åŠ±  
                    maintenance: false,      // åœæœæ›´æ–°
                    maintenanceRepair: false // åœæœç»´æŠ¤
                    } 
                }               
            },
            computed: {
                // æ’åºåçš„ç¤¼åŒ…æ•°æ®
                sortedPackageData() {
                    const packages = [...this.packageData];
                    
                    switch (this.sortType) {
                        case 'price':
                            // æŒ‰ä»·æ ¼å‡åº
                            return packages.sort((a, b) => a.price - b.price);
                            
                        case 'pureGacha':
                            // æŒ‰çº¯æŠ½å¡æ€§ä»·æ¯”é™åº
                            return packages.sort((a, b) => b.chartData.pureGacha - a.chartData.pureGacha);
                            
                        case 'material':
                            // æŒ‰ç»¼åˆæ€§ä»·æ¯”é™åº
                            return packages.sort((a, b) => b.chartData.material - a.chartData.material);
                            
                        default:
                            return packages;
                    }
                },

                // æ€»è®¡æŠ½æ•°è®¡ç®—ï¼ˆå¥—ç”¨é¥¼çŠ¶å›¾ï¼Œç”¨äºæ ‡é¢˜æ˜¾ç¤ºï¼‰
                totalModulePulls() {
                    // è·å–å„èµ„æºç±»å‹çš„æ€»é‡
                    const totalCrystal = this.totalAllCrystal;                    // æ‰€æœ‰å¼‚æ–¹æ™¶æ€»é‡
                    const totalPremiumCrystal = this.totalAllPremiumCrystal;      // æ‰€æœ‰ç’€ç’¨æ™¶æºæ€»é‡
                    const totalTickets = this.totalAllTickets;                    // æ‰€æœ‰æœç´¢ä»¤æ€»é‡
                    const totalLimitedCoupons = this.totalAllLimitedCoupons;      // æ‰€æœ‰é™å®šåˆ¸æ€»é‡
                    // å°†å„ç±»èµ„æºè½¬æ¢ä¸ºæŠ½æ•°
                    const crystalPulls = Math.floor(totalCrystal / 180);          // å¼‚æ–¹æ™¶æŠ½æ•°ï¼ˆ180å¼‚æ–¹æ™¶=1æŠ½ï¼‰
                    const premiumCrystalPulls = Math.floor(totalPremiumCrystal / 180); // ç’€ç’¨æ™¶æºæŠ½æ•°ï¼ˆ180ç’€ç’¨æ™¶æº=1æŠ½ï¼‰
                    const ticketPulls = totalTickets;                             // æœç´¢ä»¤æŠ½æ•°ï¼ˆ1æœç´¢ä»¤=1æŠ½ï¼‰
                    const limitedCouponPulls = totalLimitedCoupons;               // é™å®šåˆ¸æŠ½æ•°ï¼ˆ1é™å®šåˆ¸=1æŠ½ï¼‰
                    // è¿”å›æ€»æŠ½æ•°
                    return crystalPulls + premiumCrystalPulls + ticketPulls + limitedCouponPulls;
                },

                // æ€»è®¡æ°ªé‡‘è´¹ç”¨è®¡ç®—ï¼ˆæ ‡é¢˜æ˜¾ç¤ºï¼‰
                totalRechargeCost() {
                    return this.monthlyCardCost +                         // å°æœˆå¡ï¼ˆé»‘é’¥è´µå®¾ï¼‰è´¹ç”¨
                        this.disiCost +                                   // ç‹„æ–¯ç›ˆæ»¡é’µè´¹ç”¨
                        this.treasureCost +                               // è¯¡ç‘çå®é¦†è´¹ç”¨
                        this.specialFashionTourCost +  // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸è´¹ç”¨
                        this.advancedInspectionOrderCost +                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤ï¼ˆå¤§æœˆå¡ï¼‰è´¹ç”¨
                        this.crystalSupplyTotalCost +                     // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰è´¹ç”¨
                        this.nonFirstCrystalSupplyTotalCost +             // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰è´¹ç”¨
                        this.permanentPackageTotalCost +                  // æ–°äººè¿½è¸ªç¤¼åŒ…è´¹ç”¨
                        this.weeklyTrackingPackageTotalCost +             // æ¯å‘¨è¿½è¸ªç¤¼åŒ…è´¹ç”¨
                        this.monthlyTrackingPackage1TotalCost +           // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… è´¹ç”¨
                        this.monthlyTrackingPackage2TotalCost +           // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡è´¹ç”¨
                        this.directorSupplyTotalCost +                    // å±€é•¿å°±ä»»ç‰¹ä¾›ç¤¼åŒ…è´¹ç”¨
                        this.limitedPackageTotalCost;                     // é™æ—¶ç¤¼åŒ…è´¹ç”¨
                },

                // ç»Ÿè®¡æ‰€æœ‰æ¨¡å—çš„å¼‚æ–¹æ™¶ï¼ˆç”¨äºé¡¶éƒ¨èµ„æºæ˜¾ç¤ºï¼‰
                totalAllCrystal() {
                    const baseCrystal = this.resources.crystal || 0;                          // å½“å‰åº“å­˜å¼‚æ–¹æ™¶
                    const weeklyTrackingCrystal = this.weeklyTrackingPackageTotalCrystal;     // æ¯å‘¨è¿½è¸ªç¤¼åŒ…å¼‚æ–¹æ™¶
                    const directorSupplyCrystal = this.directorSupplyTotalCrystal;            // å±€é•¿å°±ä»»ç‰¹ä¾›ç¤¼åŒ…å¼‚æ–¹æ™¶
                    const limitedPackageCrystal = this.limitedPackageTotalCrystal;            // é™æ—¶ç¤¼åŒ…å¼‚æ–¹æ™¶
                    // åˆå¹¶çš„æœªæ¥æ”¶å…¥è®¡ç®—
                    const totalIncome = this.dailyAccumulationCrystal +        // æ—¥å¸¸ç§¯ç´¯æ¨¡å—å¼‚æ–¹æ™¶
                        this.activityRewardsCrystal +                          // æ´»åŠ¨å¥–åŠ±æ¨¡å—å¼‚æ–¹æ™¶
                        this.otherSystemsCrystal +                             // æ½œåœ¨èµ„æºæ¨¡å—å¼‚æ–¹æ™¶
                        this.rechargeCrystal +                                 // æ°ªé‡‘èµ„æºæ¨¡å—å¼‚æ–¹æ™¶
                        this.previewCodeCrystal +                              // å‰ç»å…‘æ¢ç å¼‚æ–¹æ™¶
                        this.maintenanceCrystal +                              // åœæœæ›´æ–°å¼‚æ–¹æ™¶
                        this.maintenanceRepairCrystal;                         // åœæœç»´æŠ¤å¼‚æ–¹æ™¶
                    return baseCrystal + totalIncome + weeklyTrackingCrystal + directorSupplyCrystal + limitedPackageCrystal + this.customAdjustment;
                    // æ€»è®¡ = å½“å‰åº“å­˜ + æœªæ¥æ”¶å…¥ + ç¤¼åŒ…å¼‚æ–¹æ™¶ + è‡ªå®šä¹‰ä¿®æ­£å€¼
                },

                // ç»Ÿè®¡æ‰€æœ‰æ¨¡å—çš„ç’€ç’¨æ™¶æºï¼ˆç”¨äºé¡¶éƒ¨èµ„æºæ˜¾ç¤ºï¼‰
                /*
                totalAllPremiumCrystal() {
                    const basePremiumCrystal = this.resources.premiumCrystal || 0;                    // å½“å‰åº“å­˜ç’€ç’¨æ™¶æº
                    const monthlyCardPremium = this.monthlyCardPremiumCrystal;                        // æœˆå¡ç«‹å³è·å¾—çš„ç’€ç’¨æ™¶æº
                    const disiPremium = this.disiPremiumCrystal;                                      // ç‹„æ–¯ç›ˆæ»¡é’µç’€ç’¨æ™¶æº
                    const crystalSupplyPremium = this.crystalSupplyTotalPremiumCrystal;               // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰ç’€ç’¨æ™¶æº
                    const nonFirstCrystalSupplyPremium = this.nonFirstCrystalSupplyTotalPremiumCrystal; // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰ç’€ç’¨æ™¶æº
                    const permanentPackagePremium = this.permanentPackageTotalPremiumCrystal;         // æ–°äººè¿½è¸ªç¤¼åŒ…ç’€ç’¨æ™¶æº
                    
                    // åªæœ‰å½“å¯ç”¨ç’€ç’¨æ™¶æºæŠ½å¡æ—¶ï¼Œç’€ç’¨æ™¶æºæ‰è®¡å…¥æ€»è®¡
                    const availablePremiumCrystal = this.usePremiumCrystal ? basePremiumCrystal : 0;
                    
                    return availablePremiumCrystal + monthlyCardPremium + disiPremium + crystalSupplyPremium + nonFirstCrystalSupplyPremium + permanentPackagePremium - this.totalSkinReserve;
                    // æ€»è®¡ = æ‰€æœ‰ç’€ç’¨æ™¶æºæ¥æºç›¸åŠ  - çš®è‚¤é¢„ç•™çš„ç’€ç’¨æ™¶æº
                },
                */

                // ç»Ÿè®¡æ‰€æœ‰æ¨¡å—çš„ç’€ç’¨æ™¶æºï¼ˆç”¨äºé¡¶éƒ¨èµ„æºæ˜¾ç¤ºï¼Œç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸ï¼‰
                totalAllPremiumCrystal() {
                    const basePremiumCrystal = this.resources.premiumCrystal || 0;                    // å½“å‰åº“å­˜ç’€ç’¨æ™¶æº
                    const monthlyCardPremium = this.monthlyCardPremiumCrystal;                        // æœˆå¡ç«‹å³è·å¾—çš„ç’€ç’¨æ™¶æº
                    const disiPremium = this.disiPremiumCrystal;                                      // ç‹„æ–¯ç›ˆæ»¡é’µç’€ç’¨æ™¶æº
                    const crystalSupplyPremium = this.crystalSupplyTotalPremiumCrystal;               // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰ç’€ç’¨æ™¶æº
                    const nonFirstCrystalSupplyPremium = this.nonFirstCrystalSupplyTotalPremiumCrystal; // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰ç’€ç’¨æ™¶æº
                    const permanentPackagePremium = this.permanentPackageTotalPremiumCrystal;         // æ–°äººè¿½è¸ªç¤¼åŒ…ç’€ç’¨æ™¶æº
                    const specialFashionTourPremium = this.specialFashionTourPremiumCrystal;          // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸ç’€ç’¨æ™¶æº
                    const limitedPackagePremium = this.limitedPackageTotalPremiumCrystal;  // æ–°å¢ï¼šé™æ—¶ç¤¼åŒ…ç’€ç’¨æ™¶æº
                    
                    // åªæœ‰å½“å¯ç”¨ç’€ç’¨æ™¶æºæŠ½å¡æ—¶ï¼Œç’€ç’¨æ™¶æºæ‰è®¡å…¥æ€»è®¡
                    const availablePremiumCrystal = this.usePremiumCrystal ? basePremiumCrystal : 0;
                    
                    return availablePremiumCrystal + monthlyCardPremium + disiPremium + crystalSupplyPremium + nonFirstCrystalSupplyPremium + permanentPackagePremium + specialFashionTourPremium + limitedPackagePremium - this.totalSkinReserve;
                    // æ€»è®¡ = æ‰€æœ‰ç’€ç’¨æ™¶æºæ¥æºç›¸åŠ  - çš®è‚¤é¢„ç•™çš„ç’€ç’¨æ™¶æº
                },

                // ç»Ÿè®¡æ‰€æœ‰æ¨¡å—çš„æœç´¢ä»¤ï¼ˆç”¨äºé¡¶éƒ¨èµ„æºæ˜¾ç¤ºï¼‰
                totalAllTickets() {
                    return (this.resources.tickets || 0) +                    // å½“å‰åº“å­˜æœç´¢ä»¤
                        this.dailyAccumulationTickets +                       // æ—¥å¸¸ç§¯ç´¯æ¨¡å—æœç´¢ä»¤
                        this.activityRewardsTickets +                         // æ´»åŠ¨å¥–åŠ±æ¨¡å—æœç´¢ä»¤
                        this.otherSystemsTickets +                            // æ½œåœ¨èµ„æºæ¨¡å—æœç´¢ä»¤
                        this.rechargeTickets +                                // æ°ªé‡‘èµ„æºæ¨¡å—æœç´¢ä»¤
                        this.signInRewardTickets +                            // å…¶ä»–ä¼°ç®—æ¨¡å—æœç´¢ä»¤ï¼ˆç­¾åˆ°å¥–åŠ±ï¼‰
                        this.permanentPackageTotalTickets +                   // æ–°äººè¿½è¸ªç¤¼åŒ…æœç´¢ä»¤
                        this.weeklyTrackingPackageTotalTickets +              // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æœç´¢ä»¤
                        this.monthlyTrackingPackage1TotalTickets +            // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… æœç´¢ä»¤
                        this.monthlyTrackingPackage2TotalTickets +            // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡æœç´¢ä»¤
                        this.directorSupplyTotalTickets;                     // å±€é•¿å°±ä»»ç‰¹ä¾›ç¤¼åŒ…æœç´¢ä»¤
                },

                // ç»Ÿè®¡æ‰€æœ‰æ¨¡å—çš„é™å®šåˆ¸ï¼ˆç”¨äºé¡¶éƒ¨èµ„æºæ˜¾ç¤ºï¼‰
                totalAllLimitedCoupons() {
                    return this.signInRewardLimitedCoupons + this.limitedPackageTotalLimitedCoupons;
                },

                // åˆ†æ¨¡å—æŠ½æ•°æ•°æ®ï¼ˆé¥¼çŠ¶å›¾ï¼‰
                modulePullsData() {
                    // 1. å½“å‰èµ„æºæ¨¡å— - ä¿®æ”¹æ‰£å‡é€»è¾‘
                    const baseCrystal = this.resources.crystal || 0;
                    const basePremiumCrystal = this.usePremiumCrystal ? (this.resources.premiumCrystal || 0) : 0;
                    const baseTickets = this.resources.tickets || 0;

                    // è®¡ç®—å®é™…å¯ç”¨çš„å¼‚æ–¹æ™¶ï¼ˆè€ƒè™‘æ‰£å‡ï¼‰
                    let availableCrystal = baseCrystal - this.totalSkinReserve;

                    // è®¡ç®—å®é™…å¯ç”¨çš„ç’€ç’¨æ™¶æºï¼ˆè€ƒè™‘çš®è‚¤é¢„ç•™æ‰£å‡ï¼‰
                    const availablePremiumCrystal = this.usePremiumCrystal ? 
                        Math.max(0, basePremiumCrystal - this.totalSkinReserve) : 0;

                    // åº”ç”¨å¼‚æ–¹æ™¶ä¿®æ­£ï¼Œä½†é™åˆ¶æ‰£å‡ä¸è¶…è¿‡å½“å‰åº“å­˜
                    if (this.customAdjustment < 0) {
                        const maxDeduction = baseCrystal; // æœ€å¤§æ‰£å‡é‡ä¸ºå½“å‰åº“å­˜
                        availableCrystal += Math.max(this.customAdjustment, -maxDeduction);
                    } else {
                        availableCrystal += this.customAdjustment;
                    }

                    const currentCrystalPulls = Math.floor(Math.max(0, availableCrystal) / 180);
                    const currentPremiumCrystalPulls = Math.floor(availablePremiumCrystal / 180); // ä½¿ç”¨æ‰£å‡åçš„å€¼
                    const currentTicketPulls = baseTickets;
                    const currentPulls = currentCrystalPulls + currentPremiumCrystalPulls + currentTicketPulls;
                    
                    // è®¡ç®—æ‰£å‡éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                    let deductionPulls = 0;
                    if (this.customAdjustment < 0) {
                        const actualDeduction = Math.min(Math.abs(this.customAdjustment), baseCrystal);
                        deductionPulls = Math.floor(actualDeduction / 180);
                    }
                    
                    // 2. æ—¥å¸¸ç§¯ç´¯æ¨¡å—
                    const dailyCrystal = this.dailyAccumulationCrystal;               // æ—¥å¸¸ç§¯ç´¯æ¨¡å—çš„å¼‚æ–¹æ™¶æ€»é‡
                    const dailyTickets = this.dailyAccumulationTickets;               // æ—¥å¸¸ç§¯ç´¯æ¨¡å—çš„æœç´¢ä»¤æ€»é‡
                    const dailyPulls = Math.floor(dailyCrystal / 180) + dailyTickets; // æ—¥å¸¸ç§¯ç´¯æ¨¡å—æ€»æŠ½æ•° = å¼‚æ–¹æ™¶æŠ½æ•° + æœç´¢ä»¤æŠ½æ•°
                    
                    // 3. æ´»åŠ¨å¥–åŠ±æ¨¡å—
                    const activityCrystal = this.activityRewardsCrystal;                        // æ´»åŠ¨å¥–åŠ±æ¨¡å—çš„å¼‚æ–¹æ™¶æ€»é‡
                    const activityTickets = this.activityRewardsTickets;                        // æ´»åŠ¨å¥–åŠ±æ¨¡å—çš„æœç´¢ä»¤æ€»é‡
                    const activityPulls = Math.floor(activityCrystal / 180) + activityTickets;  // æ´»åŠ¨å¥–åŠ±æ¨¡å—æ€»æŠ½æ•° = å¼‚æ–¹æ™¶æŠ½æ•° + æœç´¢ä»¤æŠ½æ•°
                    
                    // 4. æ½œåœ¨èµ„æºæ¨¡å—
                    const potentialCrystal = this.otherSystemsCrystal;                            // æ½œåœ¨èµ„æºæ¨¡å—çš„å¼‚æ–¹æ™¶æ€»é‡
                    const potentialTickets = this.otherSystemsTickets;                            // æ½œåœ¨æ¨¡å—çš„æœç´¢ä»¤æ€»é‡
                    const potentialPulls = Math.floor(potentialCrystal / 180) + potentialTickets; // æ½œåœ¨èµ„æºæ¨¡å—æ€»æŠ½æ•° = å¼‚æ–¹æ™¶æŠ½æ•° + æœç´¢ä»¤æŠ½æ•°
                    
                    // 5. æ°ªé‡‘èµ„æºæ¨¡å— - è®¡ç®—æ‰€æœ‰ä»˜è´¹å†…å®¹å¯è·å¾—çš„æŠ½æ•°
                    // ç’€ç’¨æ™¶æºéƒ¨åˆ†ï¼ˆä»˜è´¹è·å¾—çš„ç’€ç’¨æ™¶æºï¼‰
                    const rechargePremiumCrystal = this.monthlyCardPremiumCrystal +                   // æœˆå¡ç«‹å³è·å¾—çš„ç’€ç’¨æ™¶æº
                        this.disiPremiumCrystal +                                                     // ç‹„æ–¯ç›ˆæ»¡é’µç’€ç’¨æ™¶æº
                        this.specialFashionTourPremiumCrystal +                                       // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸ç’€ç’¨æ™¶æº
                        this.crystalSupplyTotalPremiumCrystal +                                       // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰ç’€ç’¨æ™¶æº
                        this.nonFirstCrystalSupplyTotalPremiumCrystal +                               // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰ç’€ç’¨æ™¶æº
                        this.permanentPackageTotalPremiumCrystal +                                    // æ–°äººè¿½è¸ªç¤¼åŒ…ç’€ç’¨æ™¶æº
                        this.limitedPackageTotalPremiumCrystal;                                       // é™æ—¶ç¤¼åŒ…ç’€ç’¨æ™¶æº
                    const rechargePremiumCrystalPulls = Math.floor(rechargePremiumCrystal / 180);     // ç’€ç’¨æ™¶æºæŠ½æ•°è½¬æ¢
                    // å¼‚æ–¹æ™¶éƒ¨åˆ†ï¼ˆä»˜è´¹è·å¾—çš„å¼‚æ–¹æ™¶ï¼‰
                    const rechargeCrystal = this.monthlyCardCrystal +                                 // æœˆå¡æ¯æ—¥å¼‚æ–¹æ™¶
                        this.advancedInspectionOrderCrystal +                                         // é«˜çº§ç›‘å¯Ÿå¯†ä»¤å¼‚æ–¹æ™¶
                        (this.disiActive ? this.disiRewardTotal : 0) +                                // ç‹„æ–¯ç›ˆæ»¡é’µå¼‚æ–¹æ™¶å¥–åŠ±ï¼ˆå¦‚æœæ¿€æ´»ï¼‰
                        this.weeklyTrackingPackageTotalCrystal +                                      // æ¯å‘¨è¿½è¸ªç¤¼åŒ…å¼‚æ–¹æ™¶
                        this.directorSupplyTotalCrystal +                                             // å±€é•¿å°±ä»»ç‰¹ä¾›ç¤¼åŒ…å¼‚æ–¹æ™¶
                        this.limitedPackageTotalCrystal;                                              // é™æ—¶ç¤¼åŒ…å¼‚æ–¹æ™¶
                    const rechargeCrystalPulls = Math.floor(rechargeCrystal / 180);                   // å¼‚æ–¹æ™¶æŠ½æ•°è½¬æ¢
                    // æœç´¢ä»¤éƒ¨åˆ†ï¼ˆä»˜è´¹è·å¾—çš„æœç´¢ä»¤ï¼‰
                    const rechargeTicketPulls = this.advancedInspectionOrderTickets +                 // é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœç´¢ä»¤
                        this.treasureTickets +                                                        // è¯¡ç‘çå®é¦†æœç´¢ä»¤
                        this.specialFashionTourTickets +                                              // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸æœç´¢ä»¤
                        this.permanentPackageTotalTickets +                                           // æ–°äººè¿½è¸ªç¤¼åŒ…æœç´¢ä»¤
                        this.weeklyTrackingPackageTotalTickets +                                      // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æœç´¢ä»¤
                        this.monthlyTrackingPackage1TotalTickets +                                    // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… æœç´¢ä»¤
                        this.monthlyTrackingPackage2TotalTickets +                                    // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡æœç´¢ä»¤
                        this.directorSupplyTotalTickets +                                             // å±€é•¿å°±ä»»ç‰¹ä¾›ç¤¼åŒ…æœç´¢ä»¤
                        this.limitedPackageTotalTickets;                                              // é™æ—¶ç¤¼åŒ…æœç´¢ä»¤
                    // é™å®šåˆ¸éƒ¨åˆ†ï¼ˆä»˜è´¹è·å¾—çš„é™å®šåˆ¸ï¼‰
                    const rechargeLimitedCouponPulls = this.limitedPackageTotalLimitedCoupons;        // é™æ—¶ç¤¼åŒ…é™å®šåˆ¸
                    // æ°ªé‡‘èµ„æºæ¨¡å—æ€»æŠ½æ•°
                    const rechargePulls = rechargeCrystalPulls + rechargePremiumCrystalPulls + rechargeTicketPulls + rechargeLimitedCouponPulls;
                    
                    // 6. å…¶ä»–ä¼°ç®—æ¨¡å— - è®¡ç®—ç‰ˆæœ¬æ›´æ–°å’Œå…¶ä»–æ‚é¡¹å¯è·å¾—çš„æŠ½æ•°
                    const otherCrystal = this.previewCodeCrystal +         // å‰ç»å…‘æ¢ç å¼‚æ–¹æ™¶ï¼ˆç‰ˆæœ¬æ›´æ–°å…‘æ¢ç ï¼‰
                        this.maintenanceCrystal +                          // åœæœæ›´æ–°å¼‚æ–¹æ™¶ï¼ˆç‰ˆæœ¬æ›´æ–°è¡¥å¿ï¼‰
                        this.maintenanceRepairCrystal;                     // åœæœç»´æŠ¤å¼‚æ–¹æ™¶ï¼ˆä¸­æœŸç»´æŠ¤è¡¥å¿ï¼‰
                    const otherTickets = this.signInRewardTickets;         // ç­¾åˆ°å¥–åŠ±æœç´¢ä»¤ï¼ˆç‰ˆæœ¬ç­¾åˆ°æ´»åŠ¨ï¼‰
                    const otherLimitedCoupons = this.signInRewardLimitedCoupons; // ç­¾åˆ°å¥–åŠ±é™å®šåˆ¸ï¼ˆç‰¹å®šç‰ˆæœ¬ç­¾åˆ°æ´»åŠ¨ï¼‰
                    // å…¶ä»–ä¼°ç®—æ¨¡å—æ€»æŠ½æ•° = å¼‚æ–¹æ™¶æŠ½æ•° + æœç´¢ä»¤æŠ½æ•° + é™å®šåˆ¸æŠ½æ•°
                    const otherPulls = Math.floor(otherCrystal / 180) +    // å¼‚æ–¹æ™¶è½¬æ¢ä¸ºæŠ½æ•°
                        otherTickets +                                     // æœç´¢ä»¤ç›´æ¥è®¡å…¥æŠ½æ•°
                        otherLimitedCoupons;                               // é™å®šåˆ¸ç›´æ¥è®¡å…¥æŠ½æ•°
                    
                    // è®¡ç®—é¥¼çŠ¶å›¾æ€»è®¡
                    const pieTotal = currentPulls + dailyPulls + activityPulls + potentialPulls + rechargePulls + otherPulls;
                    return [
                        { name: 'ç°æœ‰', pulls: currentPulls, color: this.pieChartColors[0] },
                        { name: 'æ—¥å¸¸', pulls: dailyPulls, color: this.pieChartColors[1] },
                        { name: 'æ´»åŠ¨', pulls: activityPulls, color: this.pieChartColors[2] },
                        { name: 'æ½œåœ¨', pulls: potentialPulls, color: this.pieChartColors[3] },
                        { name: 'æ°ªé‡‘', pulls: rechargePulls, color: this.pieChartColors[4] },
                        { name: 'å…¶ä»–', pulls: otherPulls, color: this.pieChartColors[5] }
                    ];
                },

                // åˆ†æ¨¡å—è®¡ç®— - å½“å‰èµ„æºæ€»æŠ½æ•°
                currentPulls() {
                    const crystal = this.resources.crystal || 0;                    // å½“å‰å¼‚æ–¹æ™¶æ•°é‡
                    const premiumCrystal = this.usePremiumCrystal ? (this.resources.premiumCrystal || 0) : 0; // å½“å‰ç’€ç’¨æ™¶æºï¼ˆå¦‚æœå¯ç”¨ï¼‰
                    const tickets = this.resources.tickets || 0;                    // å½“å‰æœç´¢ä»¤æ•°é‡                    
                    // æ·»åŠ æå‰è´­ä¹°æœˆå¡çš„ç’€ç’¨æ™¶æºåˆ°å¯ç”¨èµ„æºä¸­
                    const monthlyCardPremiumCrystal = this.monthlyCardPremiumCrystal;                    
                    // è®¡ç®—å¯ç”¨å¼‚æ–¹æ™¶æ€»é‡ï¼ˆæ‰£é™¤çš®è‚¤é¢„ç•™ï¼‰
                    const availableCrystal = crystal + (premiumCrystal + monthlyCardPremiumCrystal) - this.totalSkinReserve + this.customAdjustment;                    
                    // å°†å¼‚æ–¹æ™¶è½¬æ¢ä¸ºæŠ½æ•°ï¼ˆ180å¼‚æ–¹æ™¶=1æŠ½ï¼‰
                    const crystalPulls = Math.floor(Math.max(0, availableCrystal) / 180);                    
                    // æ€»æŠ½æ•° = å¼‚æ–¹æ™¶æŠ½æ•° + æœç´¢ä»¤æ•°é‡
                    return crystalPulls + tickets;
                },

                // åˆ†æ¨¡å—è®¡ç®— - æ—¥å¸¸ç§¯ç´¯å¼‚æ–¹æ™¶
                dailyAccumulationCrystal() {
                    try {
                        return this.dailyActiveTotal +                 // æ—¥å¸¸æ´»è·ƒå¥–åŠ±ï¼ˆæ¯å¤©40å¼‚æ–¹æ™¶ï¼‰
                            this.weeklyActiveReward +                   // å‘¨å¸¸æ´»è·ƒå¥–åŠ±ï¼ˆæ¯å‘¨150å¼‚æ–¹æ™¶ï¼‰
                            this.totalDarkZone +                       // æš—åŸŸå‘¨å¸¸å¥–åŠ±ï¼ˆæ¯å‘¨450-510å¼‚æ–¹æ™¶ï¼‰
                            this.totalDarkZoneFirst +                  // æš—åŸŸé¦–é€šå¥–åŠ±ï¼ˆæ¯æœŸ450å¼‚æ–¹æ™¶ï¼‰
                            this.totalEmotionDetection +               // æƒ…ç»ªæ£€æµ‹æœˆåº¦å¥–åŠ±ï¼ˆæ¯æœˆ50å¼‚æ–¹æ™¶ï¼‰
                            this.totalSignInReward +                   // ç­¾åˆ°æœˆåº¦å¥–åŠ±ï¼ˆæ¯æœˆ100å¼‚æ–¹æ™¶ï¼‰
                            this.remainingShareTotal +                 // æ¯å‘¨åˆ†äº«å¥–åŠ±ï¼ˆæ¯å‘¨60å¼‚æ–¹æ™¶ï¼‰
                            this.nightmareSeaReward +                  // ç¥¸æµ·ä¹‹å„å¥–åŠ±ï¼ˆ930å¼‚æ–¹æ™¶ï¼‰
                            (this.supervisionHarvestCrystal || 0) +    // ç›‘ç®¡æ”¶èœå¥–åŠ±
                            (this.alloyExchangeCrystal || 0) +         // å¤šé¡¹åˆé‡‘å…‘æ¢å¥–åŠ±
                            this.totalDataGapCrystal;                  // æ•°æ®é—´éš™å¥–åŠ±ï¼ˆæ¯æœŸ1260å¼‚æ–¹æ™¶ï¼‰
                    } catch (error) {
                        console.error('æ—¥å¸¸ç§¯ç´¯è®¡ç®—é”™è¯¯:', error);
                        return 0;
                    }
                },

                // åˆ†æ¨¡å—è®¡ç®— - æ—¥å¸¸ç§¯ç´¯æœç´¢ä»¤
                dailyAccumulationTickets() {
                    return this.totalTrackingExchange +                 // è¿½è¸ªè®¤è¯-å¸¸è§„å…‘æ¢æœç´¢ä»¤ï¼ˆæ¯æœˆ5å¼ ï¼‰
                        this.totalFriendshipExchange +                  // å‹æƒ…å…‘æ¢æœç´¢ä»¤ï¼ˆæ¯æœˆ3å¼ ï¼‰
                        this.totalEmotionDetectionTickets +             // æƒ…ç»ªæ£€æµ‹æœˆåº¦æœç´¢ä»¤ï¼ˆæ¯æœˆ1å¼ ï¼‰
                        this.totalSignInRewardTickets +                 // ç­¾åˆ°å¥–åŠ±æœç´¢ä»¤ï¼ˆæ¯æœˆ1å¼ ï¼‰
                        this.totalFashionTourTickets +                  // åŸºç¡€æ—¶å°šå·¡å›åº†å…¸æœç´¢ä»¤
                        this.totalTrackingCertificationTickets +        // è¿½è¸ªè®¤è¯-æœºå¯†å…‘æ¢æœç´¢ä»¤ï¼ˆé»„ç¥¨å…‘æ¢ï¼‰
                        this.inspectionOrderTotalTickets;               // ç›‘å¯Ÿå¯†ä»¤æœç´¢ä»¤å¥–åŠ±
                },

                // åˆ†æ¨¡å—è®¡ç®— - æ½œåœ¨èµ„æºå¼‚æ–¹æ™¶
                otherSystemsCrystal() {
                    return this.trainingRewards.total +            // ç‹‚å„ç‰¹è®­å¥–åŠ±
                        this.nightmareRemainingCrystal +           // æ— å°½æ¢¦é­‡ç§¯åˆ†å‰©ä½™å¥–åŠ±
                        this.mainStoryRewards.total +              // ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰å…³å¡å¥–åŠ±
                        this.darkShadowExRewards +                 // ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰æŒ‘æˆ˜å¥–åŠ±  
                        this.memoryStormRewards +                  // è®°å¿†é£æš´å‰¯æœ¬å¥–åŠ±
                        this.pollutionNestRewards +                // æ±¡æŸ“ä¹‹å·¢å‰¯æœ¬å¥–åŠ±
                        this.cleanupOperationRewards +             // æ¸…å‰¿è¡ŒåŠ¨å‰¯æœ¬å¥–åŠ±
                        this.palmaRuinsRewards +                   // å¸•å°”é©¬åºŸå¢Ÿå‰¯æœ¬å¥–åŠ±
                        this.characterDevelopmentRewards.total +   // è§’è‰²å…»æˆç³»ç»Ÿå¥–åŠ±
                        this.actionSummaryCrystal +                // è¡ŒåŠ¨çºªè¦å¥–åŠ±
                        this.memoryReviewCrystal +                 // è®°å¿†å¤ç°å¥–åŠ±
                        this.dreamPersonalityTotalCrystal +        // æ¢¦å¢ƒ&äººæ ¼è‰²è°±å¥–åŠ±
                        this.zeroMirrorCrystal +                   // é›¶é•œç³»ç»Ÿï¼ˆä¸–ç•Œè§‚ï¼‰å¥–åŠ±
                        this.dispatchReputationTotalCrystal +      // æ´¾é£å£°æœ›å¥–åŠ±
                        this.ashTideRewards.crystal;               // ç°çƒ¬ä¹‹æ½®-é‡å¡‘å¥–åŠ±
                },
                
                // åˆ†æ¨¡å—è®¡ç®— - æ½œåœ¨èµ„æºæœç´¢ä»¤
                otherSystemsTickets() {
                    return this.trainingRewards.tickets +               // ç‹‚å„ç‰¹è®­æœç´¢ä»¤å¥–åŠ±
                        this.nightmareRemainingTickets +                // æ— å°½æ¢¦é­‡ç§¯åˆ†æœç´¢ä»¤å¥–åŠ±
                        this.mainStoryRewards.tickets +                 // ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰æœç´¢ä»¤å¥–åŠ±
                        this.oldCaseArchiveTickets;                     // æ—§æ¡ˆå½’æ¡£å¤„æœªå…‘æ¢æœç´¢ä»¤
                },

                // åˆ†æ¨¡å—è®¡ç®— - æ´»åŠ¨å¼‚æ–¹æ™¶
                activityRewardsCrystal() {
                    let activityCrystal = 0;
                    let activityTickets = 0;
                    let activityReviewCrystal = 0;
                    let activityTrialCrystal = 0;
                    let activityGuildWarCrystal = 0;
                    let activitySecretOperationCrystal = 0;
                    
                    // è®¡ç®—æ‰€æœ‰æœªå®Œæˆæ´»åŠ¨çš„å¥–åŠ±
                    this.displayActivities.forEach(activity => {
                        if (!this.activityCompleted[activity.title]) {
                            if (activity.title === 'å¦„å¤œè¿·ç« ') {
                                activityCrystal += 1070;
                                activityTickets += 3;
                            } else if (activity.title === 'æ­§è¡Œè‡³ç ´æ™“') {
                                activityCrystal += 2000;
                                activityTickets += 5;
                                
                                // å…¬ä¼šæˆ˜å¥–åŠ±è®¡ç®—
                                if (!this.activityGuildWarCompleted[activity.title]) {
                                    activityGuildWarCrystal += 1100;
                                }
                                
                                // æ–°å¢ï¼šç»å¯†è¡ŒåŠ¨å¥–åŠ±è®¡ç®—
                                if (!this.activitySecretOperationCompleted[activity.title]) {
                                    activitySecretOperationCrystal += 200;
                                }
                            } else {
                                activityCrystal += 1000;
                                activityTickets += 3;
                            }
                        }
                        // è®¡ç®—å®¡æŸ¥å¥–åŠ±
                        if (!this.activityReviewCompleted[activity.title]) {
                            if (activity.title === 'æ–°å¹´æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰') {
                                activityReviewCrystal += 550;
                            } else {
                                activityReviewCrystal += 350;
                            }
                        }
                        // è®¡ç®—è§’è‰²è¯•ç”¨å¥–åŠ±
                        if (!this.activityTrialCompleted[activity.title]) {
                            if (activity.title === 'æ­§è¡Œè‡³ç ´æ™“' || activity.title === 'æ–°å¹´æ´»åŠ¨ï¼ˆâš ï¸ä¼°ç®—ï¼‰') {
                                activityTrialCrystal += 70;
                            } else {
                                activityTrialCrystal += 40;
                            }
                        }
                    });
                    
                    return activityCrystal + 
                        activityReviewCrystal + 
                        activityTrialCrystal +
                        activityGuildWarCrystal +
                        activitySecretOperationCrystal +
                        this.activityRerunCrystal;
                },

                // åˆ†æ¨¡å—è®¡ç®— - æ´»åŠ¨æœç´¢ä»¤
                activityRewardsTickets() {
                    let activityTickets = 0;
                    let activitySignInTickets = 0;
                    // è®¡ç®—æ‰€æœ‰æœªå®Œæˆæ´»åŠ¨çš„æœç´¢ä»¤
                    this.displayActivities.forEach(activity => {
                        if (!this.activityCompleted[activity.title]) {
                            if (activity.title === 'æ­§è¡Œè‡³ç ´æ™“') {
                                activityTickets += 5;
                            } else {
                                activityTickets += 3;
                            }
                        }                        
                    });
                    return activityTickets + activitySignInTickets + this.activityRerunTickets; // å¤åˆ»æ´»åŠ¨æœç´¢ä»¤
                },

                // åˆ†æ¨¡å—è®¡ç®— - æ°ªé‡‘èµ„æºå¼‚æ–¹æ™¶ç»Ÿè®¡
                rechargeCrystal() {
                    return this.monthlyCardCrystal +                    // æœˆå¡æ¯æ—¥å¼‚æ–¹æ™¶
                        (this.disiActive ? this.disiRewardTotal : 0) +  // ç‹„æ–¯ç›ˆæ»¡é’µå¼‚æ–¹æ™¶
                        this.advancedInspectionOrderCrystal;            // é«˜çº§ç›‘å¯Ÿå¯†ä»¤å¼‚æ–¹æ™¶
                },    

                // åˆ†æ¨¡å—è®¡ç®— - æ°ªé‡‘æœç´¢ä»¤
                rechargeTickets() {
                    return this.advancedInspectionOrderTickets +        // é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœç´¢ä»¤å¥–åŠ±
                        this.treasureTickets +                          // è¯¡ç‘çå®é¦†æœç´¢ä»¤å¥–åŠ±
                        this.specialFashionTourTickets +                // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸æœç´¢ä»¤å¥–åŠ±
                        this.limitedPackageTotalTickets;                // é™æ—¶ç¤¼åŒ…æœç´¢ä»¤å¥–åŠ±
                },   

                // çš®è‚¤é¢„ç•™çº¢æ™¶çš„ç’€ç’¨æ™¶æºæ€»è®¡
                /*
                totalSkinReserve() {
                    return (this.skinReserve.skin880 * 880) + 
                           (this.skinReserve.skin1280 * 1280) + 
                           (this.skinReserve.skin2580 * 2580);
                },
                */
               
                totalSkinReserve() {
                    // å…ˆæ£€æŸ¥åº“å­˜æ˜¯å¦è¶³å¤Ÿ
                    const availablePremiumCrystal = this.resources.premiumCrystal || 0;
                    
                    if (!this.specialFashionTour.active) {
                        // åŸä»·è®¡ç®—é€»è¾‘
                        const calculatedReserve = (this.skinReserve.skin880 * 880) + 
                            (this.skinReserve.skin1280 * 1280) + 
                            (this.skinReserve.skin2580 * 2580);
                        
                        // ç¡®ä¿é¢„ç•™ä¸è¶…è¿‡åº“å­˜
                        return Math.min(calculatedReserve, availablePremiumCrystal);
                    }
                    
                    // ç‰¹æƒ æŠ˜æ‰£è®¡ç®—é€»è¾‘
                    let total = 0;
                    const discountPerSkin = 300;
                    
                    // è®¡ç®—æ€»æŠ˜æ‰£æ¬¡æ•°ï¼ˆå‰4æ¬¡äº«å—æŠ˜æ‰£ï¼‰
                    const totalSkinCount = this.skinReserve.skin880 + this.skinReserve.skin1280;
                    const discountCount = Math.min(totalSkinCount, this.specialFashionTour.maxDiscounts);
                    
                    // è®¡ç®—äº«å—æŠ˜æ‰£çš„æ€»é‡‘é¢
                    let discountedTotal = 0;
                    let remainingDiscounts = discountCount;
                    
                    // å…ˆè®¡ç®—880çš®è‚¤çš„æŠ˜æ‰£
                    const skin880Discount = Math.min(this.skinReserve.skin880, remainingDiscounts);
                    discountedTotal += skin880Discount * (880 - discountPerSkin);
                    remainingDiscounts -= skin880Discount;
                    
                    // å†è®¡ç®—1280çš®è‚¤çš„æŠ˜æ‰£
                    const skin1280Discount = Math.min(this.skinReserve.skin1280, remainingDiscounts);
                    discountedTotal += skin1280Discount * (1280 - discountPerSkin);
                    
                    // è®¡ç®—åŸä»·éƒ¨åˆ†
                    const fullPriceTotal = 
                        (this.skinReserve.skin880 - skin880Discount) * 880 +
                        (this.skinReserve.skin1280 - skin1280Discount) * 1280;
                    
                    // 2580çš®è‚¤ä¸äº«å—æŠ˜æ‰£
                    const calculatedReserve = discountedTotal + fullPriceTotal + (this.skinReserve.skin2580 * 2580);
                    
                    // ç¡®ä¿é¢„ç•™ä¸è¶…è¿‡åº“å­˜
                    return Math.min(calculatedReserve, availablePremiumCrystal);
                },

                // è®¡ç®—åˆ°"æ­§è¡Œè‡³ç ´æ™“"è¿˜æœ‰å¤šå°‘å¤©
                daysToNextVersion() {
                    const today = new Date();
                    const targetDate = this.poolDates.nextVersion;
                    const diffTime = targetDate - today;
                    const days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    return Math.max(0, days); // ç¡®ä¿ä¸ä¼šè¿”å›è´Ÿæ•°
                },

                // è®¡ç®—åˆ°"æ–°å¹´ç‰ˆæœ¬"è¿˜æœ‰å¤šå°‘å¤©
                daysToNewYear() {
                    const today = new Date();
                    const targetDate = this.poolDates.newYear;
                    const diffTime = targetDate - today;
                    const days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    return Math.max(0, days); // ç¡®ä¿ä¸ä¼šè¿”å›è´Ÿæ•°
                },

                // è®¡ç®—å®é™…ç”¨äºèµ„æºç»Ÿè®¡çš„æ€»å¤©æ•°
                selectedDays() {
                    const baseDays = this.selectedTime === 'nextVersion' 
                        ? this.daysToNextVersion 
                        : this.daysToNewYear;
                    return this.calculateToPoolEnd ? baseDays + (this.versionWeeks * 7) : baseDays;
                },
                
                // æ—¥å¸¸æ´»è·ƒæ€»å¥–åŠ±ï¼šæ¯å¤©40å¼‚æ–¹æ™¶ Ã— æ€»å¤©æ•°
                dailyActiveTotal() {
                    return 40 * this.selectedDays;
                },

                // è®¡ç®—å‘¨å¸¸ä»»åŠ¡çš„æ€»å‘¨æ•°
                weeklyCount() {
                    const today = new Date();
                    let targetDate = this.selectedTime === 'nextVersion' 
                        ? this.poolDates.nextVersion 
                        : this.poolDates.newYear;
                    // å¦‚æœè®¡ç®—åˆ°å¡æ± ç»“æŸï¼Œåˆ™åŠ ä¸Šç‰ˆæœ¬å‘¨æ•°
                    if (this.calculateToPoolEnd) {
                        targetDate = new Date(targetDate.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000));
                    }
                    // è®¡ç®—ä»å½“å‰å‘¨ä¸€åˆ°ç›®æ ‡æ—¥æœŸä¹‹é—´çš„å®Œæ•´å‘¨æ•°
                    const currentMonday = new Date(today);
                    const dayOfWeek = today.getDay(); // 0æ˜¯å‘¨æ—¥ï¼Œ1æ˜¯å‘¨ä¸€ï¼Œ...6æ˜¯å‘¨å…­
                    const daysToMonday = dayOfWeek === 0 ? 1 : (dayOfWeek === 1 ? 0 : 8 - dayOfWeek);
                    currentMonday.setDate(today.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));
                    // è®¡ç®—å‘¨æ•°ï¼ˆåŒ…å«å½“å‰å‘¨ï¼‰
                    const diffTime = targetDate - currentMonday;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    const diffWeeks = Math.ceil(diffDays / 7);
                    return Math.max(1, diffWeeks); // è‡³å°‘1å‘¨
                },

                // è®¡ç®—å‰©ä½™çš„å‘¨å¸¸ä»»åŠ¡å‘¨æ•°
                remainingWeeklyCount() {
                    // å¦‚æœæœ¬å‘¨å·²å®Œæˆï¼Œåˆ™ä»ä¸‹å‘¨å¼€å§‹è®¡ç®—
                    if (this.weeklyCompleted) {
                        return Math.max(0, this.weeklyCount - 1);
                    } else {
                        return this.weeklyCount;
                    }
                },

                // å‘¨å¸¸æ´»è·ƒå¥–åŠ±
                weeklyActiveReward() {
                    // ä½¿ç”¨å‰©ä½™å‘¨æ•°è®¡ç®—é€»è¾‘
                    return 150 * this.remainingWeeklyCount;
                },

                // è®¡ç®—å‰©ä½™çš„æ¯å‘¨åˆ†äº«ä»»åŠ¡å‘¨æ•°
                remainingShareWeeks() {
                    // åˆ†äº«å‘¨æ•°è®¡ç®—é€»è¾‘ä¸å‘¨å¸¸ç›¸åŒ
                    if (this.dailyShareCompleted) {
                        return Math.max(0, this.weeklyCount - 1);
                    } else {
                        return this.weeklyCount;
                    }
                },
                // è®¡ç®—æ¯å‘¨åˆ†äº«ä»»åŠ¡æ€»å¥–åŠ±ï¼ˆæ¯å‘¨60å¼‚æ–¹æ™¶ï¼‰
                remainingShareTotal() {
                    // ä½¿ç”¨å‰©ä½™åˆ†äº«å‘¨æ•°è®¡ç®—é€»è¾‘
                    return 60 * this.remainingShareWeeks;
                },

                // è®¡ç®—å‰©ä½™çš„æš—åŸŸæŒ‘æˆ˜å‘¨æ•°
                remainingDarkZoneWeeks() {
                    // æš—åŸŸå‘¨æ•°è®¡ç®—é€»è¾‘ä¸å‘¨å¸¸ç›¸åŒ
                    if (this.darkZoneCompleted) {
                        return Math.max(0, this.weeklyCount - 1);
                    } else {
                        return this.weeklyCount;
                    }
                },

                // æš—åŸŸæŒ‘æˆ˜å¥–åŠ±è®¡ç®—
                totalDarkZone() {
                    // ä½¿ç”¨å‰©ä½™æš—åŸŸå‘¨æ•°è®¡ç®—é€»è¾‘
                    return this.darkZonePerWeek * this.remainingDarkZoneWeeks;
                },

                // è®¡ç®—æ¯å‘¨æš—åŸŸå¥–åŠ±ï¼ˆæ ¹æ®æ˜¯å¦ä»…æ‰«è¡ï¼‰
                darkZonePerWeek() {
                    return this.darkZoneSweepOnly ? 450 : 510;
                },

                // é¦–é€šå¥–åŠ±æœŸæ•°è®¡ç®—
                darkZoneFirstPeriods() {
                    const firstPeriodStart = new Date(2025, 9, 20); // 2025å¹´10æœˆ20æ—¥
                    const periodDuration = 6 * 7 * 24 * 60 * 60 * 1000; // 6å‘¨çš„æ¯«ç§’æ•°
                    // è®¡ç®—ç›®æ ‡æ—¥æœŸ
                    let targetDate;
                    if (this.selectedTime === 'nextVersion') {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.nextVersion;
                    } else {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.newYear;
                    }
                    let currentPeriodStart = new Date(firstPeriodStart);
                    let periodCount = 0;
                    // è®¡ç®—åœ¨å½“å‰æ—¥æœŸå’Œç›®æ ‡æ—¥æœŸä¹‹é—´çš„æœŸæ•°
                    while (currentPeriodStart <= targetDate) {
                        const periodEnd = new Date(currentPeriodStart.getTime() + periodDuration);
                        // åªç»Ÿè®¡åœ¨å½“å‰æ—¥æœŸä¹‹åç»“æŸçš„æœŸæ•°
                        if (periodEnd > new Date()) {
                            periodCount++;
                        } 
                        currentPeriodStart = new Date(currentPeriodStart.getTime() + periodDuration);
                    }
                    return Math.max(1, periodCount); // è‡³å°‘1æœŸ
                },

                // æš—åŸŸé¦–é€šå¥–åŠ±è®¡ç®—
                totalDarkZoneFirst() {
                    const crystalPerPeriod = 450;
                    if (this.darkZoneFirstCompleted) {
                        return Math.max(0, (this.darkZoneFirstPeriods - 1)) * crystalPerPeriod;
                    } else {
                        return this.darkZoneFirstPeriods * crystalPerPeriod;
                    }
                },
                
                // è®¡ç®—ä»ç°åœ¨åˆ°ç›®æ ‡æ—¥æœŸä¹‹é—´çš„æœˆä»½æ•°(æƒ…ç»ªæ£€æµ‹ã€ç­¾åˆ°å¥–åŠ±ã€å•†åº—å…‘æ¢)
                remainingMonths() {
                    const today = new Date();
                    let targetDate = this.selectedTime === 'nextVersion' 
                        ? this.poolDates.nextVersion
                        : this.poolDates.newYear;
                    
                    // å¦‚æœè®¡ç®—åˆ°å¡æ± ç»“æŸï¼Œåˆ™åŠ ä¸Šç‰ˆæœ¬å‘¨æ•°
                    if (this.calculateToPoolEnd) {
                        targetDate = new Date(targetDate.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000));
                    }
                    
                    // æ­£ç¡®çš„è®¡ç®—æ–¹æ³•ï¼šè®¡ç®—è·¨è¶Šçš„æœˆä»½æ•°ï¼ˆåŒ…å«èµ·å§‹æœˆå’Œç»“æŸæœˆï¼‰
                    let months = (targetDate.getFullYear() - today.getFullYear()) * 12;
                    months += targetDate.getMonth() - today.getMonth();
                    
                    // å¦‚æœç›®æ ‡æ—¥æœŸçš„æ—¥æœŸå¤§äºç­‰äºä»Šå¤©çš„æ—¥æœŸï¼Œåˆ™åŠ 1ä¸ªæœˆï¼ˆåŒ…å«å½“å‰æœˆï¼‰
                    if (targetDate.getDate() >= today.getDate()) {
                        months++;
                    } else {
                        // å¦‚æœç›®æ ‡æ—¥æœŸçš„æ—¥æœŸå°äºä»Šå¤©çš„æ—¥æœŸï¼Œä½†è¿˜åœ¨åŒä¸€ä¸ªæœˆå†…ï¼Œä¹Ÿè¦åŒ…å«å½“å‰æœˆ
                        months++;
                    }
                    
                    // ç¡®ä¿è‡³å°‘ä¸º1ä¸ªæœˆ
                    return Math.max(1, months);
                },

                // æƒ…ç»ªæ£€æµ‹æœˆåº¦ä»»åŠ¡
                totalEmotionDetection() {
                    return this.calculateMonthlyReward(90, this.emotionDetectionCompleted);
                },
                totalEmotionDetectionTickets() {
                    return this.calculateMonthlyReward(1, this.emotionDetectionCompleted);
                },
                
                // ç­¾åˆ°æœˆåº¦ä»»åŠ¡
                totalSignInReward() {
                    return this.calculateMonthlyReward(100, this.signInRewardCompleted);
                },                
                totalSignInRewardTickets() {
                    return this.calculateMonthlyReward(1, this.signInRewardCompleted);
                },
                
                // ç›‘ç®¡æ”¶èœå¼‚æ–¹æ™¶è®¡ç®—
                supervisionHarvestCrystal() {
                    try {
                        const secondsPerCrystal = 3456;
                        const now = new Date();
                        
                        // è®¡ç®—åˆ°ç›®æ ‡æ—¥æœŸï¼ˆå¡æ± ç»“æŸæˆ–å¼€æ”¾ï¼‰
                        let targetDate;
                        if (this.selectedTime === 'nextVersion') {
                            targetDate = this.calculateToPoolEnd ? 
                                new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                                this.poolDates.nextVersion;
                        } else {
                            targetDate = this.calculateToPoolEnd ? 
                                new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                                this.poolDates.newYear;
                        }
                        
                        const timeDiff = Math.max(0, (targetDate - now) / 1000);
                        const crystals = Math.floor(timeDiff / secondsPerCrystal);
                        
                        return crystals;
                    } catch (error) {
                        console.error('ç›‘ç®¡æ”¶èœè®¡ç®—é”™è¯¯:', error);
                        return 0;
                    }
                },

                // å¤šé¡¹åˆé‡‘å…‘æ¢å¼‚æ–¹æ™¶è®¡ç®—
                alloyExchangeCrystal() {
                    // æ£€æŸ¥alloyCountæ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—ä¸”å¤§äº0
                    if (isNaN(this.alloyCount) || this.alloyCount === null || this.alloyCount === '' || this.alloyCount <= 0) {
                        return 0;
                    }
                    
                    const alloyPerCrystal = 231;
                    const crystalsPerExchange = 4;
                    
                    // è®¡ç®—å¯å…‘æ¢çš„å¼‚æ–¹æ™¶æ•°é‡ï¼ˆæ¯231ä¸ªåˆé‡‘å…‘æ¢4ä¸ªå¼‚æ–¹æ™¶ï¼‰
                    const exchanges = Math.floor(this.alloyCount / alloyPerCrystal);
                    const crystals = exchanges * crystalsPerExchange;
                    
                    return crystals;
                },

                // åŸºç¡€æ—¶å°šå·¡å›åº†å…¸æœŸæ•°è®¡ç®—
                fashionTourPeriods() {
                    const tourPeriods = [
                        { start: new Date(2025, 10, 20), end: new Date(2025, 10, 23) },   // 11æœˆ20-11æœˆ23
                        { start: new Date(2025, 10, 24), end: new Date(2025, 10, 30) },   // 11æœˆ24-11æœˆ30
                        { start: new Date(2025, 11, 1), end: new Date(2025, 11, 7) },     // 12æœˆ1-12æœˆ7
                        { start: new Date(2025, 11, 8), end: new Date(2025, 11, 14) },    // 12æœˆ8-12æœˆ14
                        { start: new Date(2025, 11, 15), end: new Date(2025, 11, 21) },   // 12æœˆ15-12æœˆ21
                        { start: new Date(2025, 11, 22), end: new Date(2025, 11, 28) },   // 12æœˆ22-12æœˆ28
                        { start: new Date(2025, 11, 29), end: new Date(2026, 0, 4) },     // 12æœˆ29-1æœˆ4
                        { start: new Date(2026, 0, 5), end: new Date(2026, 0, 11) }       // 1æœˆ5-1æœˆ11
                    ];
                    
                    const today = new Date();
                    let targetDate;
                    if (this.selectedTime === 'nextVersion') {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.nextVersion;
                    } else {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.newYear;
                    }
                    
                    let periodCount = 0;
                    for (const period of tourPeriods) {
                        // åªç»Ÿè®¡åœ¨å½“å‰æ—¥æœŸå’Œç›®æ ‡æ—¥æœŸä¹‹é—´çš„æœŸæ•°ï¼Œä¸”å¼€å§‹æ—¶é—´åœ¨å½“å‰æ—¥æœŸä¹‹åæˆ–æ­£åœ¨è¿›è¡Œä¸­
                        if (period.end > today && period.start <= targetDate) {
                            periodCount++;
                        }
                    }
                    
                    return Math.max(0, periodCount);
                },
                // åŸºç¡€æ—¶å°šå·¡å›åº†å…¸æ€»æœç´¢ä»¤è®¡ç®—
                totalFashionTourTickets() {
                    if (this.fashionTourCompleted) {
                        return Math.max(0, (this.fashionTourPeriods - 1));
                    } else {
                        return this.fashionTourPeriods;
                    }
                },

                // ç›‘å¯Ÿå¯†ä»¤æœŸæ•°è®¡ç®—
                inspectionPeriods() {
                    const periods = [];
                    const firstPeriodStart = new Date(2025, 9, 6, 10); // 2025å¹´10æœˆ6æ—¥10:00
                    const periodDuration = 6 * 7 * 24 * 60 * 60 * 1000; // 6å‘¨çš„æ¯«ç§’æ•°
                    // æ ¹æ®é€‰å®šçš„æ—¶é—´è®¡ç®—éœ€è¦æ˜¾ç¤ºçš„æœŸæ•°
                    let targetDate;
                    if (this.selectedTime === 'nextVersion') {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.nextVersion;
                    } else {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.newYear;
                    }
                    let currentPeriodStart = new Date(firstPeriodStart);
                    let periodId = 1;
                    // ç”Ÿæˆæ‰€æœ‰åœ¨å½“å‰æ—¥æœŸå’Œç›®æ ‡æ—¥æœŸä¹‹é—´çš„å¯†ä»¤æœŸæ•°
                    while (currentPeriodStart <= targetDate) {
                        const periodEnd = new Date(currentPeriodStart.getTime() + periodDuration);
                        // åªæ˜¾ç¤ºç»“æŸæ—¶é—´åœ¨å½“å‰æ—¥æœŸä¹‹åçš„æœŸæ•°
                        if (periodEnd > new Date()) {
                            const startStr = this.formatDateToMMDD(currentPeriodStart);
                            const endStr = this.formatDateToMMDD(periodEnd);
                            periods.push({
                                id: periodId,
                                startDate: startStr,
                                endDate: endStr,
                                startTime: new Date(currentPeriodStart),
                                endTime: new Date(periodEnd)
                            });
                        }
                        currentPeriodStart = new Date(currentPeriodStart.getTime() + periodDuration);
                        periodId++;
                    }
                    return periods;
                },

                // ç›‘å¯Ÿå¯†ä»¤æ€»æœç´¢ä»¤è®¡ç®—
                inspectionOrderTotalTickets() {
                    let totalTickets = 0;
                    
                    for (const period of this.inspectionPeriods) {
                        const level = this.inspectionLevels[period.id] || 0;
                        totalTickets += this.calculateCurrentPeriodTickets(level);
                    }
                    
                    return totalTickets;
                },

                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤å¼‚æ–¹æ™¶è®¡ç®—
                advancedInspectionOrderCrystal() {
                    let totalCrystal = 0;
                    
                    for (const period of this.inspectionPeriods) {
                        const level = this.rechargeInspectionLevels[period.id] || 0;
                        totalCrystal += this.calculateRechargePeriodCrystal(level);
                    }
                    
                    return totalCrystal;
                },
                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœç´¢ä»¤è®¡ç®—
                advancedInspectionOrderTickets() {
                    let totalTickets = 0;
                    
                    for (const period of this.inspectionPeriods) {
                        const level = this.rechargeInspectionLevels[period.id] || 0;
                        totalTickets += this.calculateRechargePeriodTickets(level);
                    }
                    
                    return totalTickets;
                },
                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤è´¹ç”¨è®¡ç®—
                advancedInspectionOrderCost() {
                    let totalCost = 0;                    
                    // éå†æ‰€æœ‰ç›‘å¯Ÿå¯†ä»¤æœŸæ•°ï¼Œç»Ÿè®¡ç­‰çº§>0çš„æœŸæ•°
                    for (const period of this.inspectionPeriods) {
                        const level = this.rechargeInspectionLevels[period.id] || 0;
                        // åªæœ‰å½“æ»‘å—ç­‰çº§>0æ—¶æ‰è®¡å…¥68RMB
                        if (level > 0) {
                            totalCost += 68;
                        }
                    }                   
                    return totalCost;
                },

                // è¿½è¸ªè®¤è¯-å¸¸è§„æœˆåº¦å…‘æ¢
                totalTrackingExchange() {
                    return this.calculateMonthlyReward(5, this.trackingExchanged); // æ¯æœˆ5å¼ æœç´¢ä»¤
                },

                // è¿½è¸ªè®¤è¯-æœºå¯†é»„ç¥¨å…‘æ¢
                totalTrackingCertification() {
                    return 0; // é»„ç¥¨å…‘æ¢ä¸äº§ç”Ÿå¼‚æ–¹æ™¶ï¼Œåªäº§ç”Ÿæœç´¢ä»¤
                },

                // é»„ç¥¨å…‘æ¢æœç´¢ä»¤æ•°é‡ï¼šæ¯8å¼ é»„ç¥¨æ¢1å¼ æœç´¢ä»¤
                totalTrackingCertificationTickets() {
                    // æ£€æŸ¥trackingCertificationCountæ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­—ä¸”å¤§äº0
                    if (isNaN(this.trackingCertificationCount) || this.trackingCertificationCount === null || this.trackingCertificationCount === '' || this.trackingCertificationCount <= 0) {
                        return 0;
                    }
                    
                    return Math.floor(this.trackingCertificationCount / 8);
                },

                // å‹æƒ…å…‘æ¢æœˆåº¦ä»»åŠ¡  
                totalFriendshipExchange() {
                    return this.calculateMonthlyReward(3, this.friendshipExchanged); // æ¯æœˆ3å¼ æœç´¢ä»¤
                },

                // æ•°æ®é—´éš™æœŸæ•°è®¡ç®—
                dataGapPeriods() {
                    const firstPeriodStart = new Date(2025, 10, 6); // 2025å¹´11æœˆ6æ—¥
                    const periodDuration = 4 * 7 * 24 * 60 * 60 * 1000; // 4å‘¨çš„æ¯«ç§’æ•°                    
                    // è®¡ç®—ç›®æ ‡æ—¥æœŸ
                    let targetDate;
                    if (this.selectedTime === 'nextVersion') {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.nextVersion;
                    } else {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.newYear;
                    }
                    let currentPeriodStart = new Date(firstPeriodStart);
                    let periodCount = 0;                    
                    // è®¡ç®—åœ¨å½“å‰æ—¥æœŸå’Œç›®æ ‡æ—¥æœŸä¹‹é—´çš„æœŸæ•°
                    while (currentPeriodStart <= targetDate) {
                        const periodEnd = new Date(currentPeriodStart.getTime() + periodDuration);                        
                        // åªç»Ÿè®¡åœ¨å½“å‰æ—¥æœŸä¹‹åç»“æŸçš„æœŸæ•°
                        if (periodEnd > new Date()) {
                            periodCount++;
                        }
                        currentPeriodStart = new Date(currentPeriodStart.getTime() + periodDuration);
                    }                    
                    return Math.max(1, periodCount); // è‡³å°‘1æœŸ
                },

                // æ•°æ®é—´éš™æ€»å¼‚æ–¹æ™¶è®¡ç®—
                totalDataGapCrystal() {
                    const crystalPerPeriod = 1260;
                    if (this.dataGapCompleted) {
                        return Math.max(0, (this.dataGapPeriods - 1)) * crystalPerPeriod;
                    } else {
                        return this.dataGapPeriods * crystalPerPeriod;
                    }
                },

                // ç‹‚å„ç‰¹è®­å¥–åŠ±è®¡ç®—
                trainingRewards() {
                    let crystal = 0;
                    let tickets = 0;
                    if (this.trainingModes.steady) {
                        crystal += 100;
                        tickets += 1;
                    }
                    if (this.trainingModes.fluctuating) {
                        crystal += 200;
                        tickets += 2;
                    }
                    if (this.trainingModes.outOfControl) {
                        crystal += 200;
                    }
                    if (this.trainingModes.crazy) {
                        crystal += 60;
                    }
                    return {
                        crystal,
                        tickets,
                        total: crystal + (tickets * 180)
                    };
                },

                // ç¥¸æµ·ä¹‹å„å¥–åŠ±ï¼šå¦‚æœå·²å®Œæˆåˆ™ä¸º0ï¼Œå¦åˆ™ä¸º930å¼‚æ–¹æ™¶
                nightmareSeaReward() {
                    return this.nightmareSeaCompleted ? 0 : 930;
                },

                // ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰å¥–åŠ±è®¡ç®—
                mainStoryRewards() {
                    let crystal = 0;
                    let tickets = 0;
                    
                    if (this.mainStory.chaosBeyondA) { crystal += 995; tickets += 1; }
                    if (this.mainStory.chaosBeyondB) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.unownedCavernA) { crystal += 1175; tickets += 1; }
                    if (this.mainStory.unownedCavernB) { crystal += 1280; tickets += 1; }
                    if (this.mainStory.kiranSquareA) { crystal += 1265; tickets += 1; }
                    if (this.mainStory.kiranSquareB) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.carnivalA) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.carnivalB) { crystal += 935; tickets += 1; }
                    if (this.mainStory.refugeeCampA) { crystal += 1125; tickets += 1; }
                    if (this.mainStory.refugeeCampB) { crystal += 1195; tickets += 1; }
                    if (this.mainStory.muddyDarkTrapA) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.muddyDarkTrapB) { crystal += 605; tickets += 1; }
                    if (this.mainStory.highTowerBlackRing) { crystal += 1980; tickets += 2; }
                    if (this.mainStory.darkSurgeA) { crystal += 1005; tickets += 1; }
                    if (this.mainStory.darkSurgeB) { crystal += 1005; tickets += 1; }
                    if (this.mainStory.goldFeastA) { crystal += 900; tickets += 1; }
                    if (this.mainStory.goldFeastB) { crystal += 1180; tickets += 1; }
                    if (this.mainStory.canFeng) { crystal += 960; }
                    
                    return {
                        crystal,
                        tickets,
                        total: crystal + (tickets * 180)
                    };
                },

                // è¡ŒåŠ¨çºªè¦å¥–åŠ±è®¡ç®—
                actionSummaryText() {
                    if (this.actionSummaryLevel >= 19) {
                        return "å·²å®Œæˆå…¨éƒ¨è¡ŒåŠ¨çºªè¦";
                    }
                    return this.actionSummaryList[this.actionSummaryLevel] || "01Â·æ··æ²Œå½¼å²¸";
                },

                // è¡ŒåŠ¨çºªè¦å¼‚æ–¹æ™¶è®¡ç®—
                actionSummaryCrystal() {
                    // æ€»å¼‚æ–¹æ™¶3800ï¼Œæ»‘å—ä»0åˆ°18ï¼Œæ¯æ»‘åŠ¨ä¸€æ ¼å‡å°‘200
                    const totalCrystal = 3800;
                    const crystalPerStep = 200;
                    return totalCrystal - (this.actionSummaryLevel * crystalPerStep);
                },

                // é›¶é•œç³»ç»Ÿè®¡ç®—å±æ€§
                zeroMirrorCrystal() {
                    let totalCrystal = 0;
                    // å®šä¹‰æ¯ä¸ªåŒºåŸŸçš„å¼‚æ–¹æ™¶å¥–åŠ±
                    const rewards = {
                        nightChronicle: 200,
                        disCity: 20,
                        syndicate: 180,
                        newCity: 80,
                        rustRiver: 60,
                        foreignLand: 120,
                        innerSea: 80,
                        upperCourt: 0,  // ä¸Šåº­ä¸º0å¼‚æ–¹æ™¶
                        madEvil: 320
                    };
                    // è®¡ç®—æ‰€æœ‰æ¿€æ´»åŒºåŸŸçš„å¼‚æ–¹æ™¶æ€»å’Œ
                    for (const [key, value] of Object.entries(this.zeroMirror)) {
                        if (value) { // å¦‚æœæŒ‰é’®æ˜¯æ¿€æ´»çŠ¶æ€ï¼ˆå·²æ‰“å¼€ï¼‰
                            totalCrystal += rewards[key];
                        }
                    }
                    return totalCrystal;
                },

                // è®°å¿†å¤ç°å¼‚æ–¹æ™¶è®¡ç®—
                memoryReviewCrystal() {
                    // å¼¥åˆé˜ˆå€¼å¥–åŠ±é…ç½®
                    const thresholdRewards = [
                        { threshold: 1000, crystal: 100 },
                        { threshold: 2000, crystal: 100 },
                        { threshold: 3000, crystal: 100 },
                        { threshold: 4000, crystal: 100 },
                        { threshold: 5000, crystal: 100 },
                        { threshold: 6000, crystal: 100 },
                        { threshold: 7000, crystal: 100 },
                        { threshold: 8000, crystal: 100 },
                        { threshold: 9000, crystal: 100 },
                        { threshold: 10000, crystal: 100 }
                    ];
                    let totalCrystal = 0;
                    // è®¡ç®—å¤§äºå½“å‰é˜ˆå€¼çš„æ‰€æœ‰å¥–åŠ±
                    for (const reward of thresholdRewards) {
                        if (this.memoryReviewThreshold < reward.threshold) {
                            totalCrystal += reward.crystal;
                        }
                    }
                    return totalCrystal;
                },

                // æ—§æ¡ˆå½’æ¡£å¤„æœç´¢ä»¤è®¡ç®—
                oldCaseArchiveTickets() {
                    return this.oldCaseArchiveCount || 0;
                },

                // ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰å¥–åŠ±è®¡ç®—
                darkShadowExRewards() {
                    let crystal = 0;
                    
                    if (this.darkShadowEx.chaosBeyond) crystal += 720;
                    if (this.darkShadowEx.unownedCavern) crystal += 720;
                    if (this.darkShadowEx.kiranSquare) crystal += 590;
                    if (this.darkShadowEx.carnival) crystal += 650;
                    if (this.darkShadowEx.highTowerBlackRing) crystal += 650;
                    if (this.darkShadowEx.luxuryFeastFog) crystal += 650;
                    if (this.darkShadowEx.drowningRainCity) crystal += 650;
                    if (this.darkShadowEx.goldFeast) crystal += 650;
                    
                    return crystal;
                },

                // è®°å¿†é£æš´å¥–åŠ±è®¡ç®—
                memoryStormRewards() {
                    let crystal = 0;
                    
                    if (this.memoryStorm.memoryAnomaly) crystal += 350;
                    if (this.memoryStorm.impressionAnomaly) crystal += 350;
                    if (this.memoryStorm.echoAnomaly) crystal += 350;
                    
                    return crystal;
                },

                // æ±¡æŸ“ä¹‹å·¢å¥–åŠ±è®¡ç®—
                pollutionNestRewards() {
                    let crystal = 0;
                    
                    if (this.pollutionNest.forbiddenZoneProbe) crystal += 350;
                    if (this.pollutionNest.extremeDomainSearch) crystal += 210;
                    
                    return crystal;
                },

                // æ¸…å‰¿è¡ŒåŠ¨å¥–åŠ±è®¡ç®—
                cleanupOperationRewards() {
                    let crystal = 0;
                    
                    if (this.cleanupOperation.goldRush) crystal += 350;
                    if (this.cleanupOperation.ominousSeed) crystal += 350;
                    
                    return crystal;
                },

                // å¸•å°”é©¬åºŸå¢Ÿå¥–åŠ±è®¡ç®—
                palmaRuinsRewards() {
                    let crystal = 0;
                    
                    if (this.palmaRuins.tenacious) crystal += 280;
                    if (this.palmaRuins.berserk) crystal += 280;
                    if (this.palmaRuins.mysterious) crystal += 280;
                    if (this.palmaRuins.precise) crystal += 280;
                    if (this.palmaRuins.supernatural) crystal += 280;
                    if (this.palmaRuins.inspiration) crystal += 280;
                    
                    return crystal;
                },

                // æ´¾é£å£°æœ›å¥–åŠ±è®¡ç®—
                dispatchReputationTotalCrystal() {
                    let totalCrystal = 0;
                    
                    // è®¡ç®—æ‰€æœ‰åŒºåŸŸçš„å¼‚æ–¹æ™¶æ€»å’Œ
                    for (const area of Object.values(this.dispatchReputation)) {
                        totalCrystal += area.crystal;
                    }
                    
                    return totalCrystal;
                },

                // è§’è‰²å…»æˆå¥–åŠ±è®¡ç®—
                characterDevelopmentRewards() {
                    let crystal = 0;
                    
                    crystal += this.characterDevelopment.tier3 * 180;
                    crystal += this.characterDevelopment.maxReverbS * 210;
                    crystal += this.characterDevelopment.maxReverbA * 60;
                    crystal += this.characterDevelopment.maxReverbB * 20;
                    crystal += this.characterDevelopment.reviewS * 200;
                    crystal += this.characterDevelopment.reviewA * 150;
                    
                    if (!this.characterDevelopment.haylaReviewed) {
                        crystal += 100;
                    }
                    
                    return {
                        crystal,
                        total: crystal
                    };
                },

                // æ¢¦å¢ƒ&äººæ ¼è‰²è°±å¥–åŠ±è®¡ç®—
                dreamInsightCrystal() {
                    return this.dreamInsightCount * 100;
                },                
                dreamRetrospectCrystal() {
                    return this.dreamRetrospectCount * 400;
                },                
                personalitySpectrumCrystal() {
                    return this.personalitySpectrumCount * 400;
                },
                // æ¢¦å¢ƒ&äººæ ¼è‰²è°±æ€»è®¡
                dreamPersonalityTotalCrystal() {
                    return this.dreamInsightCrystal + this.dreamRetrospectCrystal + this.personalitySpectrumCrystal;
                },

                // æ— å°½æ¢¦é­‡ç§¯åˆ†å¥–åŠ±å¼‚æ–¹æ™¶è®¡ç®—(æ˜¾ç¤ºå’Œè®¡ç®—)
                nightmareRemainingCrystal() {
                    let totalCrystal = 0;
                    for (const reward of this.nightmareRewards) {
                        if (this.nightmareScore < reward.score) {
                            totalCrystal += reward.crystal;
                        }
                    }
                    return totalCrystal;
                },

                // æ— å°½æ¢¦é­‡ç§¯åˆ†å¥–åŠ±æœç´¢ä»¤è®¡ç®—(æ˜¾ç¤ºå’Œè®¡ç®—)
                nightmareRemainingTickets() {
                    let totalTickets = 0;
                    for (const reward of this.nightmareRewards) {
                        if (this.nightmareScore < reward.score) {
                            totalTickets += reward.tickets;
                        }
                    }
                    return totalTickets;
                },

                // ç°çƒ¬ä¹‹æ½®-é‡å¡‘å¥–åŠ±è®¡ç®—
                ashTideRewards() {
                    let crystal = 0;
                    
                    if (this.ashTide.ashApostle) crystal += 180;
                    if (this.ashTide.disasterLocust) crystal += 180;
                    
                    return {
                        crystal,
                        total: crystal
                    };
                },

                // è®¡ç®—éœ€è¦æ˜¾ç¤ºçš„æ´»åŠ¨æ¨¡å— - ä¸¥æ ¼ç‰ˆæœ¬
                displayActivities() {
                    const activities = [];
                    const today = new Date();
                    
                    // æ ¹æ®é€‰å®šçš„å¡æ± æ—¶é—´ç¡®å®šç›®æ ‡æ—¥æœŸ
                    let targetDate;
                    if (this.selectedTime === 'nextVersion') {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.nextVersion;
                    } else {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.newYear;
                    }
                    
                    // éå†æ´»åŠ¨æ’æœŸ
                    for (let i = 0; i < this.activitySchedule.length; i++) {
                        const activity = this.activitySchedule[i];
                        const activityStartDate = new Date(activity.start);
                        const activityEndDate = new Date(activity.end);
                        
                        // ä¸¥æ ¼æ¡ä»¶ï¼š
                        // 1. æ´»åŠ¨åœ¨å½“å‰æ—¥æœŸä¹‹åå¼€å§‹ï¼Œæˆ–è€…æ­£åœ¨è¿›è¡Œä¸­
                        // 2. æ´»åŠ¨åœ¨ç›®æ ‡æ—¥æœŸä¹‹å‰ç»“æŸ
                        // 3. æ´»åŠ¨ç»“æŸæ—¶é—´å¤§äºå½“å‰æ—¶é—´ï¼ˆæ´»åŠ¨è¿˜æœªå®Œå…¨ç»“æŸï¼‰
                        const isActivityActive = activityEndDate > today; // æ´»åŠ¨è¿˜æœªç»“æŸ
                        const isWithinTargetRange = activityStartDate <= targetDate; // åœ¨ç›®æ ‡æ—¥æœŸèŒƒå›´å†…
                        
                        if (isActivityActive && isWithinTargetRange) {
                            activities.push(activity);
                        }
                    }
                    
                    console.log('æ˜¾ç¤ºçš„æ´»åŠ¨:', activities.map(a => a.title)); // è°ƒè¯•ç”¨
                    return activities;
                },

                // æ ¼å¼åŒ–æ—¥æœŸ
                formattedNewYearDate() {
                    const date = this.poolDates.newYear;
                    return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
                },

                formattedNextVersionDate() {
                    const date = this.poolDates.nextVersion;
                    return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
                },

                dailyInspectionOrderTickets() {
                    let totalTickets = 0;
                    
                    // è®¡ç®—æ‰€æœ‰æœŸæ•°çš„æœç´¢ä»¤æ€»å’Œï¼Œä½¿ç”¨å„è‡ªçš„ç­‰çº§æ•°æ®
                    for (let period = 1; period <= this.calculateInspectionPeriods; period++) {
                        const level = this.inspectionLevels[period] || 0;
                        totalTickets += this.calculateCurrentPeriodTickets(level);
                    }
                    
                    return totalTickets;
                },

                // å¤åˆ»æ´»åŠ¨å¼‚æ–¹æ™¶å¥–åŠ±
                activityRerunCrystal() {
                    let totalCrystal = 0;
                    
                    // åªè®¡ç®—åœ¨displayActivitiesä¸­çš„æ´»åŠ¨çš„å¤åˆ»å¥–åŠ±
                    this.displayActivities.forEach(activity => {
                        if (!this.activityRerunMode[activity.title]) {
                            totalCrystal += activity.title === 'å¦„å¤œè¿·ç« ' ? 660 : 600;
                        }
                    });
                    
                    // è¯¡å¢ƒä½™éŸ³å’Œç¢æ™¶ä¹‹æ¢¦ - åªæœ‰åœ¨å¦„å¤œè¿·ç« æ´»åŠ¨åœ¨èŒƒå›´å†…æ—¶æ‰è®¡ç®—
                    const hasNightChapter = this.displayActivities.some(activity => activity.title === 'å¦„å¤œè¿·ç« ');
                    if (hasNightChapter) {
                        if (!this.remainingEchoActive) {
                            totalCrystal += 900;
                        }
                        if (!this.crystalDreamActive) {
                            totalCrystal += 360;
                        }
                    }
                    
                    console.log('å¤åˆ»æ´»åŠ¨å¼‚æ–¹æ™¶è®¡ç®—:', totalCrystal);
                    return totalCrystal;
                },

                // å¤åˆ»æ´»åŠ¨æœç´¢ä»¤å¥–åŠ±
                activityRerunTickets() {
                    let totalTickets = 0;
                    
                    // åªè®¡ç®—åœ¨displayActivitiesä¸­çš„æ´»åŠ¨çš„å¤åˆ»å¥–åŠ±
                    this.displayActivities.forEach(activity => {
                        if (!this.activityRerunMode[activity.title]) {
                            totalTickets += 1;
                        }
                    });
                    
                    // è¯¡å¢ƒä½™éŸ³å’Œç¢æ™¶ä¹‹æ¢¦ - åªæœ‰åœ¨å¦„å¤œè¿·ç« æ´»åŠ¨åœ¨èŒƒå›´å†…æ—¶æ‰è®¡ç®—
                    const hasNightChapter = this.displayActivities.some(activity => activity.title === 'å¦„å¤œè¿·ç« ');
                    if (hasNightChapter) {
                        if (!this.remainingEchoActive) {
                            totalTickets += 1;
                        }
                        if (!this.crystalDreamActive) {
                            totalTickets += 1;
                        }
                    }
                    
                    console.log('å¤åˆ»æ´»åŠ¨æœç´¢ä»¤è®¡ç®—:', totalTickets);
                    return totalTickets;
                },

                // æœˆå¡ç’€ç’¨æ™¶æºè®¡ç®—
                monthlyCardPremiumCrystal() {
                    if (!this.monthlyCardActive) return 0;
                    // -1è¡¨ç¤ºæå‰è´­ä¹°ï¼Œç’€ç’¨æ™¶æºä¸º0ï¼›0åŠä»¥ä¸ŠæŒ‰æ­£å¸¸è®¡ç®—
                    if (this.monthlyCardCount === -1) return 0;
                    // åŸºç¡€æœˆå¡ç»™300ï¼Œæ¯é¢å¤–è´­ä¹°1å¼ æœˆå¡é¢å¤–ç»™300
                    const baseCard = 1; // åŸºç¡€æœˆå¡
                    const additionalCards = Math.max(0, this.monthlyCardCount); // é¢å¤–è´­ä¹°çš„æœˆå¡æ•°é‡
                    return (baseCard + additionalCards) * 300;
                },
                // æœˆå¡æ¯æ—¥å¼‚æ–¹æ™¶è®¡ç®—
                monthlyCardCrystal() {
                    if (!this.monthlyCardActive) return 0;
                    const days = this.selectedDays;
                    const crystalPerDay = 60; 
                    // è®¡ç®—æ€»æœˆå¡å¤©æ•°
                    let totalCardDays = 0;
                    if (this.monthlyCardCount === -1) {
                        // -1ï¼šæå‰è´­ä¹°ï¼Œä½¿ç”¨æ—¥å¸¸xå¤©çš„è®¡ç®—æ–¹å¼
                        totalCardDays = this.selectedDays;
                    } else if (this.monthlyCardCount >= 0) {
                        // 0ï¼šè´­ä¹°1å¼ æœˆå¡30å¤©ï¼Œ1ï¼šè´­ä¹°2å¼ æœˆå¡60å¤©ï¼Œä»¥æ­¤ç±»æ¨
                        totalCardDays = 30 * (this.monthlyCardCount + 1);
                    }
                    // å®é™…å¯ç”¨çš„æœˆå¡å¤©æ•°ä¸èƒ½è¶…è¿‡å‰©ä½™å¤©æ•°
                    const actualCardDays = Math.min(totalCardDays, days);
                    return actualCardDays * crystalPerDay;
                },
                // æœˆå¡è´¹ç”¨è®¡ç®—
                monthlyCardCost() {
                    if (!this.monthlyCardActive) return 0;
                    // -1è¡¨ç¤ºæå‰è´­ä¹°ï¼Œä¸ç®—å…¥æ°ªé‡‘é‡‘é¢
                    if (this.monthlyCardCount === -1) return 0;
                    // 0è¡¨ç¤ºè´­ä¹°1å¼ ï¼Œ1è¡¨ç¤ºè´­ä¹°2å¼ ï¼Œä»¥æ­¤ç±»æ¨
                    const totalCards = this.monthlyCardCount + 1;
                    return totalCards * 30; // æ¯å¼ æœˆå¡30RMB
                },

                // ç‹„æ–¯ç›ˆæ»¡é’µå¼‚æ–¹æ™¶å¥–åŠ±è®¡ç®—
                disiRewardTotal() {
                    // è®¡ç®—å¤§äºå½“å‰ç­‰çº§çš„æ‰€æœ‰å¥–åŠ±æ€»å’Œ
                    let total = 0;
                    for (const reward of this.disiRewards) {
                        if (reward.level <= this.disiLevel) {
                            total += reward.crystal;
                        }
                    }
                    return total;
                },
                // ç‹„æ–¯ç›ˆæ»¡é’µç’€ç’¨æ™¶æºè®¡ç®—
                disiPremiumCrystal() {
                    // å¦‚æœæŒ‰é’®æœªæ¿€æ´»ï¼Œæ˜¾ç¤º0è®¡å…¥0
                    if (!this.disiActive) {
                        return 0;
                    }
                    // å¦‚æœå·²é¢„å…ˆè´­ä¹°ï¼Œæ˜¾ç¤º0è®¡å…¥0
                    if (this.disiPrePurchased) {
                        return 0;
                    }
                    // å¦åˆ™æ˜¾ç¤º980è®¡å…¥980
                    return 980;
                },     

                // ç‹„æ–¯ç›ˆæ»¡é’µè´¹ç”¨è®¡ç®—
                disiCost() {
                    // åªæœ‰å½“æŒ‰é’®æ¿€æ´»ä¸”æœªé¢„å…ˆè´­ä¹°æ—¶æ‰è®¡å…¥98RMB
                    if (this.disiActive && !this.disiPrePurchased) {
                        return 98;
                    }
                    return 0;
                },

                // è¯¡ç‘çå®é¦†æœç´¢ä»¤è®¡ç®—
                treasureTickets() {
                    // åªæœ‰å½“æŒ‰é’®æ¿€æ´»æ—¶æ‰æ˜¾ç¤º10æœç´¢ä»¤
                    if (this.treasureActive) {
                        return 10;
                    }
                    return 0;
                },

                // è¯¡ç‘çå®é¦†è´¹ç”¨è®¡ç®—
                treasureCost() {
                    // åªæœ‰å½“æŒ‰é’®æ¿€æ´»ä¸”æœªé¢„å…ˆè´­ä¹°æ—¶æ‰è®¡å…¥88RMB
                    if (this.treasureActive && !this.treasurePrePurchased) {
                        return 88;
                    }
                    return 0;
                },  

                // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸æœŸæ•°ï¼ˆå¤ç”¨åŸºç¡€æ—¶å°šå·¡å›åº†å…¸çš„æœŸæ•°è®¡ç®—ï¼‰
                specialFashionTourPeriods() {
                    return this.fashionTourPeriods;
                },
                // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸æœç´¢ä»¤è®¡ç®—
                specialFashionTourTickets() {
                    if (!this.specialFashionTour.active) {
                        return 0;
                    }
                    if (this.specialFashionTour.completed) {
                        return Math.max(0, (this.specialFashionTourPeriods - 1));
                    } else {
                        return this.specialFashionTourPeriods;
                    }
                },
                // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸ç’€ç’¨æ™¶æºè®¡ç®—
                specialFashionTourPremiumCrystal() {
                    // åªæœ‰å½“æŒ‰é’®æ¿€æ´»ä¸”æœªé¢„è´­ä¹°æ—¶æ‰è®¡å…¥300ç’€ç’¨æ™¶æº
                    return (this.specialFashionTour.active && !this.specialFashionTour.prePurchased) ? 300 : 0;
                },
                // å‰©ä½™ä¼˜æƒ æ¬¡æ•°è®¡ç®—
                remainingDiscounts() {
                    if (!this.specialFashionTour.active) {
                        return 0;
                    }
                    return Math.max(0, this.specialFashionTour.maxDiscounts - this.specialFashionTour.usedDiscounts);
                },
                // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸è´¹ç”¨è®¡ç®—
                specialFashionTourCost() {
                    // åªæœ‰å½“æŒ‰é’®æ¿€æ´»ä¸”æœªé¢„è´­ä¹°æ—¶æ‰è®¡å…¥60RMB
                    return (this.specialFashionTour.active && !this.specialFashionTour.prePurchased) ? 60 : 0;
                },

                // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰è®¡ç®—
                // è®¡ç®—æ¯ä¸ªæŒ‰é’®çš„å•ä»·ï¼ˆx = ä»·æ ¼ / (ç’€ç’¨æ™¶æºæ•°é‡ / 180)ï¼‰
                crystalSupplyUnitPrices() {
                return this.crystalSupplyButtons.map(button => {
                    const unitPrice = button.price / (button.premiumCrystal / 180);
                    return unitPrice.toFixed(2); // ä¿ç•™2ä½å°æ•°
                });
                },
                // æ™¶æºç‰¹ä¾›æ€»ç’€ç’¨æ™¶æº
                crystalSupplyTotalPremiumCrystal() {
                return this.crystalSupplyButtons.reduce((total, button, index) => {
                    return total + (button.purchased ? button.premiumCrystal : 0);
                }, 0);
                },
                // æ™¶æºç‰¹ä¾›æ€»è´¹ç”¨
                crystalSupplyTotalCost() {
                return this.crystalSupplyButtons.reduce((total, button, index) => {
                    return total + (button.purchased ? button.price : 0);
                }, 0);
                },

                // æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰è®¡ç®—
                // è®¡ç®—æ¯ä¸ªæŒ‰é’®çš„å•ä»·ï¼ˆx = ä»·æ ¼ / (ç’€ç’¨æ™¶æºæ•°é‡ / 180)ï¼‰
                nonFirstCrystalSupplyUnitPrices() {
                return this.nonFirstCrystalSupplyButtons.map(button => {
                    const unitPrice = button.price / (button.premiumCrystal / 180);
                    return unitPrice.toFixed(2); // ä¿ç•™2ä½å°æ•°
                });
                },
                // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰æ€»ç’€ç’¨æ™¶æº
                nonFirstCrystalSupplyTotalPremiumCrystal() {
                    return this.nonFirstCrystalSupplyButtons.reduce((total, button) => {
                        const count = button.count === null || button.count === '' ? 0 : button.count;
                        return total + (button.premiumCrystal * count);
                    }, 0);
                },
                // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰æ€»è´¹ç”¨
                nonFirstCrystalSupplyTotalCost() {
                    return this.nonFirstCrystalSupplyButtons.reduce((total, button) => {
                        const count = button.count === null || button.count === '' ? 0 : button.count;
                        return total + (button.price * count);
                    }, 0);
                },

                // æ–°äººè¿½è¸ªç¤¼åŒ…è®¡ç®—
                // æ–°äººè¿½è¸ªç¤¼åŒ…æ€»ç’€ç’¨æ™¶æº
                permanentPackageTotalPremiumCrystal() {
                    return this.permanentPackage.active ? this.permanentPackage.premiumCrystal : 0;
                },
                // æ–°äººè¿½è¸ªç¤¼åŒ…æ€»æœç´¢ä»¤
                permanentPackageTotalTickets() {
                    return this.permanentPackage.active ? this.permanentPackage.tickets : 0;
                },
                // æ–°äººè¿½è¸ªç¤¼åŒ…æ€»è´¹ç”¨
                permanentPackageTotalCost() {
                    return this.permanentPackage.active ? this.permanentPackage.price : 0;
                },

                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…è®¡ç®—
                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æœ€å¤§è´­ä¹°æ•°é‡ï¼ˆåŸºäºå‘¨æ•°ï¼‰
                weeklyTrackingPackageMaxCount() {
                    // ç›´æ¥ä½¿ç”¨æ€»å‘¨æ•°ï¼Œä¸å—æš—åŸŸå®ŒæˆçŠ¶æ€å½±å“
                    return this.weeklyCount;
                },
                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æ€»å¼‚æ–¹æ™¶
                weeklyTrackingPackageTotalCrystal() {
                    return this.weeklyTrackingPackage.crystal * this.weeklyTrackingPackage.count;
                },
                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æ€»æœç´¢ä»¤
                weeklyTrackingPackageTotalTickets() {
                    return this.weeklyTrackingPackage.tickets * this.weeklyTrackingPackage.count;
                },

                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æ€»è´¹ç”¨
                weeklyTrackingPackageTotalCost() {
                    return this.weeklyTrackingPackage.price * this.weeklyTrackingPackage.count;
                },

                // æœˆåº¦è¿½è¸ªç¤¼åŒ…è®¡ç®—
                // æœˆåº¦è¿½è¸ªç¤¼åŒ…æœ€å¤§è´­ä¹°æ•°é‡ï¼ˆåŸºäºæœˆæ•°ï¼‰
                monthlyTrackingPackageMaxCount() {
                    // ä½¿ç”¨ä¸æƒ…ç»ªæ£€æµ‹ç›¸åŒçš„æœˆæ•°è®¡ç®—é€»è¾‘
                    return this.remainingMonths;
                },
                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… æ€»æœç´¢ä»¤
                monthlyTrackingPackage1TotalTickets() {
                    return this.monthlyTrackingPackage1.tickets * this.monthlyTrackingPackage1.count;
                },
                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… æ€»è´¹ç”¨
                monthlyTrackingPackage1TotalCost() {
                    return this.monthlyTrackingPackage1.price * this.monthlyTrackingPackage1.count;
                },
                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡æ€»æœç´¢ä»¤
                monthlyTrackingPackage2TotalTickets() {
                    return this.monthlyTrackingPackage2.tickets * this.monthlyTrackingPackage2.count;
                },
                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡æ€»è´¹ç”¨
                monthlyTrackingPackage2TotalCost() {
                    return this.monthlyTrackingPackage2.price * this.monthlyTrackingPackage2.count;
                },

                // å±€é•¿å°±ä»»ç‰¹ä¾›è®¡ç®—
                // æ£€æŸ¥æŒ‰é’®æ˜¯å¦å¯äº¤äº’
                directorSupplyPackageEnabled() {
                    return this.directorSupplyPackages.map((pkg, index) => {
                        // ç¬¬ä¸€ä¸ªæŒ‰é’®æ€»æ˜¯å¯äº¤äº’
                        if (index === 0) return true;
                        // å…¶ä»–æŒ‰é’®åªæœ‰åœ¨å‰ä¸€ä¸ªæŒ‰é’®æ¿€æ´»æ—¶æ‰å¯äº¤äº’
                        return this.directorSupplyPackages[index - 1].active;
                    });
                },
                // å±€é•¿å°±ä»»ç‰¹ä¾›æ€»å¼‚æ–¹æ™¶
                directorSupplyTotalCrystal() {
                    return this.directorSupplyPackages.reduce((total, pkg) => {
                        return total + (pkg.active ? pkg.crystal : 0);
                    }, 0);
                },
                // å±€é•¿å°±ä»»ç‰¹ä¾›æ€»æœç´¢ä»¤
                directorSupplyTotalTickets() {
                    return this.directorSupplyPackages.reduce((total, pkg) => {
                        return total + (pkg.active ? pkg.tickets : 0);
                    }, 0);
                },
                // å±€é•¿å°±ä»»ç‰¹ä¾›æ€»è´¹ç”¨
                directorSupplyTotalCost() {
                    return this.directorSupplyPackages.reduce((total, pkg) => {
                        return total + (pkg.active ? pkg.price : 0);
                    }, 0);
                },

                // é™æ—¶ç¤¼åŒ…è®¡ç®—
                // é™æ—¶ç¤¼åŒ…æ€»å¼‚æ–¹æ™¶è®¡ç®— - ç»Ÿä¸€ç‰ˆæœ¬
                limitedPackageTotalCrystal() {
                    let totalCrystal = 0;
                    
                    // åŸæœ‰çš„ç¤¼åŒ…
                    totalCrystal += (this.limitedPackageCycle1.crystal * this.limitedPackageCycle1.count);
                    
                    // æ–°å¢ç¤¼åŒ…ç»Ÿä¸€è®¡ç®—
                    const allNewPackages = [
                        ...this.singlePackages,
                        ...this.supplyPackages,
                        ...this.upgradePackages
                    ];
                    
                    totalCrystal += allNewPackages.reduce((sum, item) => {
                        return sum + (item.active ? (item.crystal || 0) : 0);
                    }, 0);
                    
                    // ç»„åˆè´­ä¹°
                    totalCrystal += this.limitedPackageCombo.active ? (this.limitedPackageCombo.crystal || 0) : 0;
                    
                    return totalCrystal;
                },
                // é™æ—¶ç¤¼åŒ…æ€»ç’€ç’¨æ™¶æºè®¡ç®—
                limitedPackageTotalPremiumCrystal() {
                    let totalPremiumCrystal = 0;
                    
                    // æ–°å¢ï¼šç‰¹ä¾›ç³»åˆ—ä¸­çš„ç’€ç’¨æ™¶æº
                    totalPremiumCrystal += this.supplyPackages.reduce((sum, item) => {
                        return sum + (item.active ? (item.premiumCrystal || 0) : 0);
                    }, 0);
                    
                    // æ–°å¢ï¼šè·ƒå‡è¡¥ç»™ç³»åˆ—ä¸­çš„ç’€ç’¨æ™¶æº
                    totalPremiumCrystal += this.upgradePackages.reduce((sum, item) => {
                        return sum + (item.active ? (item.premiumCrystal || 0) : 0);
                    }, 0);
                    
                    // æ–°å¢ï¼šç»„åˆè´­ä¹°ä¸­çš„ç’€ç’¨æ™¶æº
                    totalPremiumCrystal += this.limitedPackageCombo.active ? (this.limitedPackageCombo.premiumCrystal || 0) : 0;
                    
                    return totalPremiumCrystal;
                },
                // é™æ—¶ç¤¼åŒ…æ€»æœç´¢ä»¤è®¡ç®— - ç»Ÿä¸€ç‰ˆæœ¬
                limitedPackageTotalTickets() {
                    let totalTickets = 0;
                    
                    // åŸæœ‰çš„ç¤¼åŒ…
                    totalTickets += (this.limitedPackageCycle1.tickets * this.limitedPackageCycle1.count) +
                                (this.limitedPackageCycle2.tickets * this.limitedPackageCycle2.count) +
                                (this.limitedPackageCycle3.tickets * this.limitedPackageCycle3.count) +
                                (this.limitedPackageCycle4.tickets * this.limitedPackageCycle4.count) +
                                (this.limitedPackageShadow1.active ? this.limitedPackageShadow1.tickets : 0) +
                                (this.limitedPackageShadow2.active ? this.limitedPackageShadow2.tickets : 0) +
                                (this.limitedPackageShadow3.active ? this.limitedPackageShadow3.tickets : 0) +
                                (this.limitedPackageMystery.active ? this.limitedPackageMystery.tickets : 0) +
                                (this.limitedPackageTravelSupply.active ? this.limitedPackageTravelSupply.tickets : 0);
                    
                    // æ–°å¢ç¤¼åŒ…ç»Ÿä¸€è®¡ç®— - åªè®¡ç®—æ–°å¢çš„ç¤¼åŒ…ï¼Œé¿å…é‡å¤
                    const allNewPackages = [
                        ...this.covenantPackages,
                        ...this.dovePackages,
                        ...this.singlePackages,
                        ...this.supplyPackages,
                        ...this.upgradePackages
                    ];
                    
                    totalTickets += allNewPackages.reduce((sum, item) => {
                        // ç›Ÿçº¦åºç« ç³»åˆ—ä½¿ç”¨ count
                        if (item.count !== undefined) {
                            return sum + ((item.tickets || 0) * item.count);
                        }
                        // å…¶ä»–ç³»åˆ—ä½¿ç”¨ active
                        else {
                            return sum + (item.active ? (item.tickets || 0) : 0);
                        }
                    }, 0);
                    
                    // ç»„åˆè´­ä¹°
                    totalTickets += this.limitedPackageCombo.active ? this.limitedPackageCombo.tickets : 0;
                    
                    return totalTickets;
                },
                // é™æ—¶ç¤¼åŒ…æ€»é™å®šåˆ¸è®¡ç®—
                limitedPackageTotalLimitedCoupons() {
                    let totalLimitedCoupons = 0;
                    
                    // æ–°å¢ï¼šç›Ÿçº¦åºç« ç³»åˆ—
                    totalLimitedCoupons += this.covenantPackages.reduce((sum, item) => {
                        return sum + (item.limitedCoupons * item.count);
                    }, 0);
                    
                    // æ–°å¢ï¼šç™½é¸½å·¡ç¤¼ç³»åˆ—
                    totalLimitedCoupons += this.dovePackages.reduce((sum, item) => {
                        return sum + (item.active ? (item.limitedCoupons || 0) : 0);
                    }, 0);
                    
                    return totalLimitedCoupons;
                },
                // é™æ—¶ç¤¼åŒ…æ€»è´¹ç”¨
                limitedPackageTotalCost() {
                    let total = 0;
                    
                    // åŸæœ‰çš„å…¶ä»–ç¤¼åŒ…è´¹ç”¨
                    total += (this.limitedPackageCycle1.price * this.limitedPackageCycle1.count) +
                            (this.limitedPackageCycle2.price * this.limitedPackageCycle2.count) +
                            (this.limitedPackageCycle3.price * this.limitedPackageCycle3.count) +
                            (this.limitedPackageCycle4.price * this.limitedPackageCycle4.count) +
                            (this.limitedPackageShadow1.active ? this.limitedPackageShadow1.price : 0) +
                            (this.limitedPackageShadow2.active ? this.limitedPackageShadow2.price : 0) +
                            (this.limitedPackageShadow3.active ? this.limitedPackageShadow3.price : 0) +
                            (this.limitedPackageMystery.active ? this.limitedPackageMystery.price : 0) +
                            (this.limitedPackageTravelSupply.active ? this.limitedPackageTravelSupply.price : 0);
                    
                    // æ–°å¢ç¤¼åŒ…è´¹ç”¨
                    total += this.covenantPackages.reduce((sum, item) => sum + (item.price * item.count), 0);
                    total += this.dovePackages.reduce((sum, item) => sum + (item.active ? item.price : 0), 0);
                    total += this.singlePackages.reduce((sum, item) => sum + (item.active ? item.price : 0), 0);
                    total += this.supplyPackages.reduce((sum, item) => sum + (item.active ? item.price : 0), 0);
                    total += this.upgradePackages.reduce((sum, item) => sum + (item.active ? item.price : 0), 0);
                    total += this.limitedPackageCombo.active ? this.limitedPackageCombo.price : 0;
                    
                    return total;
                },

                // ç­¾åˆ°å¥–åŠ±è®¡ç®—
                signInRewardBaseData() {
                    let totalTickets = 0;
                    let totalLimitedCoupons = 0;
                    
                    // å¦‚æœé€‰æ‹©äº†æ–°å¹´ç‰ˆæœ¬
                    if (this.selectedTime === 'newYear') {
                        if (!this.calculateToPoolEnd) {
                            // å¡æ± å¼€æ”¾å½“å¤©ï¼š35å¼ ï¼ˆæ­§è¡Œè‡³ç ´æ™“çš„24 + æ–°å¹´çš„11ï¼‰
                            totalLimitedCoupons += this.otherEstimateSwitchStates.signInReward ? 11 : 35;
                        } else {
                            // å¡æ± ç»“æŸå½“å¤©ï¼š48å¼ ï¼ˆæ­§è¡Œè‡³ç ´æ™“çš„24 + æ–°å¹´çš„24ï¼‰
                            totalLimitedCoupons += this.otherEstimateSwitchStates.signInReward ? 24 : 48;
                        }
                    } 
                    // å¦‚æœé€‰æ‹©äº†æ­§è¡Œè‡³ç ´æ™“ç‰ˆæœ¬
                    else {
                        if (!this.calculateToPoolEnd) {
                            // å¡æ± å¼€æ”¾å½“å¤©ï¼š11å¼ 
                            totalLimitedCoupons += this.otherEstimateSwitchStates.signInReward ? 0 : 11;
                        } else {
                            // å¡æ± ç»“æŸå½“å¤©ï¼š24å¼ 
                            totalLimitedCoupons += this.otherEstimateSwitchStates.signInReward ? 0 : 24;
                        }
                    }
                    
                    return {
                        tickets: totalTickets,
                        limitedCoupons: totalLimitedCoupons
                    };
                },

                // æ˜¾ç¤ºæ–‡æœ¬ï¼šç”Ÿæˆç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ç­¾åˆ°å¥–åŠ±æè¿°
                signInRewardDisplayAmount() {
                    const data = this.signInRewardBaseData;
                    if (data.tickets === 0 && data.limitedCoupons === 0) {
                        return "0 (å·²è¿‡æœŸ)";
                    }
                    let displayText = "";
                    if (data.tickets > 0) {
                        displayText += `${data.tickets}å¼ æœç´¢ä»¤`;
                    }
                    if (data.limitedCoupons > 0) {
                        if (displayText) displayText += " + ";
                        displayText += `${data.limitedCoupons}å¼ é™å®šåˆ¸`;
                    }
                    return displayText || "0";
                },
                // æœç´¢ä»¤æ•°é‡ï¼šè¿”å›ç­¾åˆ°å¥–åŠ±ä¸­çš„æœç´¢ä»¤æ•°é‡ï¼ˆç”¨äºè®¡ç®—æ€»æŠ½æ•°ï¼‰
                signInRewardTickets() {
                    return this.signInRewardBaseData.tickets;
                },
                // é™å®šåˆ¸æ•°é‡ï¼šè¿”å›ç­¾åˆ°å¥–åŠ±ä¸­çš„é™å®šåˆ¸æ•°é‡ï¼ˆç”¨äºè®¡ç®—æ€»æŠ½æ•°ï¼‰
                signInRewardLimitedCoupons() {
                    return this.signInRewardBaseData.limitedCoupons;
                },
                // å¥–åŠ±å›¾æ ‡ï¼šæ ¹æ®ç‰ˆæœ¬è¿”å›å¯¹åº”çš„èµ„æºå›¾æ ‡
                signInRewardIcon() {
                    const data = this.signInRewardBaseData;
                    // å¦‚æœæœ‰é™å®šåˆ¸å°±æ˜¾ç¤ºé™å®šåˆ¸å›¾æ ‡ï¼Œå¦åˆ™æ˜¾ç¤ºæœç´¢ä»¤å›¾æ ‡
                    return data.limitedCoupons > 0 ? this.limitedCouponIcon : this.ticketIcon;
                },

                // å‰ç»å…‘æ¢ç å¼‚æ–¹æ™¶
                previewCodeCrystal() {
                    let totalCrystal = 0;
                    
                    // æ­§è¡Œè‡³ç ´æ™“ç‰ˆæœ¬çš„600å¼‚æ–¹æ™¶
                    if (!this.otherEstimateSwitchStates.previewCode) {
                        totalCrystal += 600;
                    }
                    
                    // æ–°å¹´ç‰ˆæœ¬çš„600å¼‚æ–¹æ™¶ï¼ˆå¦‚æœé€‰æ‹©äº†æ–°å¹´ç‰ˆæœ¬ï¼‰
                    if (this.selectedTime === 'newYear') {
                        totalCrystal += 600;
                    }
                    
                    return totalCrystal;
                },

                // åœæœæ›´æ–°å¼‚æ–¹æ™¶è®¡ç®—
                maintenanceCrystal() {
                    let totalCrystal = 0;
                    
                    // å¦‚æœé€‰æ‹©äº†æ–°å¹´ç‰ˆæœ¬
                    if (this.selectedTime === 'newYear') {
                        // æ–°å¹´ç‰ˆæœ¬ï¼š1000å¼‚æ–¹æ™¶ï¼ˆæ­§è¡Œè‡³ç ´æ™“300 + 12æœˆ18-1æœˆ15ç‰ˆæœ¬200 + 1æœˆ15-2æœˆ12ç‰ˆæœ¬200 + æ–°å¹´ç‰ˆæœ¬300ï¼‰
                        totalCrystal += this.otherEstimateSwitchStates.maintenance ? 700 : 1000;
                    } 
                    // å¦‚æœé€‰æ‹©äº†æ­§è¡Œè‡³ç ´æ™“ç‰ˆæœ¬
                    else {
                        // æ­§è¡Œè‡³ç ´æ™“ç‰ˆæœ¬ï¼š300å¼‚æ–¹æ™¶
                        totalCrystal += this.otherEstimateSwitchStates.maintenance ? 0 : 300;
                    }
                    
                    return totalCrystal;
                },

                // åœæœç»´æŠ¤å¼‚æ–¹æ™¶è®¡ç®—
                maintenanceRepairCrystal() {
                    let totalCrystal = 0;
                    
                    // æ£€æŸ¥æ˜¯å¦åœ¨ç‰ˆæœ¬ç¬¬15å¤©ä¹‹åï¼ˆç‰ˆæœ¬ç¬¬15å¤©å¼€å§‹æ‰æœ‰åœæœç»´æŠ¤ï¼‰
                    const daysInVersion = this.selectedDays;
                    if (daysInVersion < 15) {
                        return 0; // ç‰ˆæœ¬å‰14å¤©æ²¡æœ‰åœæœç»´æŠ¤
                    }
                    
                    // å¦‚æœé€‰æ‹©äº†æ–°å¹´ç‰ˆæœ¬
                    if (this.selectedTime === 'newYear') {
                        if (!this.calculateToPoolEnd) {
                            // å¡æ± å¼€æ”¾å½“å¤©ï¼š600å¼‚æ–¹æ™¶ï¼ˆæ­§è¡Œè‡³ç ´æ™“200 + 12æœˆ18-1æœˆ15ç‰ˆæœ¬200 + 1æœˆ15-2æœˆ12ç‰ˆæœ¬200ï¼‰
                            totalCrystal += this.otherEstimateSwitchStates.maintenanceRepair ? 400 : 600;
                        } else {
                            // å¡æ± ç»“æŸå½“å¤©ï¼š800å¼‚æ–¹æ™¶ï¼ˆæ­§è¡Œè‡³ç ´æ™“200 + 12æœˆ18-1æœˆ15ç‰ˆæœ¬200 + 1æœˆ15-2æœˆ12ç‰ˆæœ¬200 + æ–°å¹´ç‰ˆæœ¬200ï¼‰
                            totalCrystal += this.otherEstimateSwitchStates.maintenanceRepair ? 600 : 800;
                        }
                    } 
                    // å¦‚æœé€‰æ‹©äº†æ­§è¡Œè‡³ç ´æ™“ç‰ˆæœ¬
                    else {
                        if (!this.calculateToPoolEnd) {
                            // å¡æ± å¼€æ”¾å½“å¤©ï¼š0å¼‚æ–¹æ™¶ï¼ˆè¿˜æ²¡åˆ°ç¬¬15å¤©ï¼‰
                            totalCrystal += 0;
                        } else {
                            // å¡æ± ç»“æŸå½“å¤©ï¼š200å¼‚æ–¹æ™¶ï¼ˆæ­§è¡Œè‡³ç ´æ™“ç‰ˆæœ¬200ï¼‰
                            totalCrystal += this.otherEstimateSwitchStates.maintenanceRepair ? 0 : 200;
                        }
                    }
                    
                    return totalCrystal;
                },
            },
            watch: {
                // ç›‘å¬ä¾§è¾¹èœå•çŠ¶æ€å˜åŒ–
                showSideMenu(newValue) {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬å½“å‰é¡µé¢å˜åŒ–
                currentPage(newValue) {
                    this.saveToLocalStorage();
                },
                // è‡ªåŠ¨ä¿å­˜æœºåˆ¶
                resources: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬å„æ¨¡å—å±•å¼€/æŠ˜å çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                sections: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬æ˜¯å¦è®¡ç®—åˆ°å¡æ± ç»“æŸçš„å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                calculateToPoolEnd() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æ˜¯å¦ä½¿ç”¨ç’€ç’¨æ™¶æºæŠ½å¡è®¾ç½®å˜åŒ–å¹¶ä¿å­˜æ•°æ®å’Œæ›´æ–°é¥¼çŠ¶å›¾
                usePremiumCrystal(newValue, oldValue) {
                    // å½“å…³é—­ä½¿ç”¨ç’€ç’¨æ™¶æºæŠ½å¡æ—¶ï¼Œé‡ç½®çš®è‚¤é¢„ç•™çº¢æ™¶
                    if (oldValue === true && newValue === false) {
                        this.skinReserve = {
                            skin880: 0,
                            skin1280: 0,
                            skin2580: 0
                        };
                        // åŒæ—¶é‡ç½®ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸çš„å·²ä½¿ç”¨æŠ˜æ‰£æ¬¡æ•°
                        if (this.specialFashionTour.active) {
                            this.specialFashionTour.usedDiscounts = 0;
                        }
                    }
                    this.saveToLocalStorage();
                    // å¼ºåˆ¶æ›´æ–°é¥¼çŠ¶å›¾
                    this.$nextTick(() => {
                        if (this.sections.pullSummary) {
                            this.updatePieChart();
                        }
                    });
                },
                // æ·±åº¦ç›‘å¬çš®è‚¤é¢„ç•™çº¢æ™¶æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                /*
                skinReserve: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                */               
                // æ·±åº¦ç›‘å¬çš®è‚¤é¢„ç•™çº¢æ™¶æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®å’Œæ›´æ–°é¥¼çŠ¶å›¾
                skinReserve: {
                    handler(newValue) {
                        // é‡æ–°è®¡ç®—å·²ä½¿ç”¨çš„æŠ˜æ‰£æ¬¡æ•°
                        this.calculateUsedDiscounts();
                        this.saveToLocalStorage();
                        
                        // å¼ºåˆ¶æ›´æ–°é¥¼çŠ¶å›¾
                        this.$nextTick(() => {
                            if (this.sections.pullSummary) {
                                this.updatePieChart();
                            }
                        });
                    },
                    deep: true
                },
                // ç›‘å¬è‡ªå®šä¹‰å¼‚æ–¹æ™¶ä¿®æ­£å€¼å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                customAdjustment() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœ¬å‘¨å‘¨å¸¸ä»»åŠ¡å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                weeklyCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœ¬å‘¨åˆ†äº«ä»»åŠ¡å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                dailyShareCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœ¬æœˆæƒ…ç»ªæ£€æµ‹å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                emotionDetectionCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœ¬æœˆç­¾åˆ°å¥–åŠ±å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                signInRewardCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬å¤šé¡¹åˆé‡‘æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                alloyCount() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬åŸºç¡€æ—¶å°šå·¡å›åº†å…¸å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                fashionTourCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬ç›‘å¯Ÿå¯†ä»¤æœŸæ•°é€‰æ‹©å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                selectedInspectionPeriod(newValue) {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬ç›‘å¯Ÿå¯†ä»¤ç­‰çº§å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                inspectionLevels: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬æœ¬æœˆè¿½è¸ªè®¤è¯å…‘æ¢çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                trackingExchanged() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœ¬æœˆå‹æƒ…å…‘æ¢çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                friendshipExchanged() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬è¿½è¸ªè®¤è¯é»„ç¥¨æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                trackingCertificationCount() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æš—åŸŸæ˜¯å¦ä»…æ‰«è¡æ¨¡å¼å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                darkZoneSweepOnly() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœ¬å‘¨æš—åŸŸæŒ‘æˆ˜å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                darkZoneCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æš—åŸŸé¦–é€šå¥–åŠ±å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                darkZoneFirstCompleted() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æ•°æ®é—´éš™å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                dataGapCompleted() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬ç‹‚å„ç‰¹è®­éš¾åº¦é€‰æ‹©å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                trainingModes: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬ç¥¸æµ·ä¹‹å„å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                nightmareSeaCompleted() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                mainStory: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬è¡ŒåŠ¨çºªè¦è¿›åº¦æ»‘å—å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                actionSummaryLevel() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬é›¶é•œç³»ç»Ÿä¸–ç•Œè§‚å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                zeroMirror: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬è®°å¿†å¤ç°å¼¥åˆé˜ˆå€¼æ»‘å—å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                memoryReviewThreshold() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æ—§æ¡ˆå½’æ¡£å¤„æœªå…‘æ¢æœç´¢ä»¤æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                oldCaseArchiveCount() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                darkShadowEx: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è®°å¿†é£æš´å‰¯æœ¬å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                memoryStorm: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ±¡æŸ“ä¹‹å·¢å‰¯æœ¬å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                pollutionNest: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ¸…å‰¿è¡ŒåŠ¨å‰¯æœ¬å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                cleanupOperation: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬å¸•å°”é©¬åºŸå¢Ÿå‰¯æœ¬å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                palmaRuins: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬æ´¾é£å£°æœ›åŒºåŸŸé€‰æ‹©å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                selectedDispatchArea() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬æ´¾é£å£°æœ›ç­‰çº§å˜åŒ–ï¼Œé‡æ–°è®¡ç®—å¼‚æ–¹æ™¶å¥–åŠ±å¹¶ä¿å­˜æ•°æ®
                dispatchReputation: {
                    handler(newValue) {
                        // å½“å£°æœ›ç­‰çº§å˜åŒ–æ—¶ï¼Œé‡æ–°è®¡ç®—å¼‚æ–¹æ™¶
                        this.calculateDispatchCrystal();
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è§’è‰²å…»æˆè¿›åº¦å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                characterDevelopment: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬æœªå®Œæˆçª¥å¿ƒæ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                dreamInsightCount() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœªå®Œæˆæº¯æ—¶æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                dreamRetrospectCount() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœªå®Œæˆäººæ ¼è‰²è°±æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                personalitySpectrumCount() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æ— å°½æ¢¦é­‡ç§¯åˆ†æ»‘å—å€¼å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                nightmareScore() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬ç°çƒ¬ä¹‹æ½®é‡å¡‘å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                ashTide: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ´»åŠ¨å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activityCompleted: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ´»åŠ¨å®¡æŸ¥å¥–åŠ±å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activityReviewCompleted: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ´»åŠ¨è§’è‰²è¯•ç”¨å¥–åŠ±å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activityTrialCompleted: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ´»åŠ¨å¤åˆ»æ¨¡å¼é€‰æ‹©å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activityRerunMode: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è¯¡å¢ƒä½™éŸ³æ´»åŠ¨çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activityCompleted: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬ç¢æ™¶ä¹‹æ¢¦æ´»åŠ¨çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                crystalDreamActive: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ´»åŠ¨å…¬ä¼šæˆ˜å¥–åŠ±å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activityGuildWarCompleted: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ´»åŠ¨ç»å¯†è¡ŒåŠ¨å¥–åŠ±å®ŒæˆçŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                activitySecretOperationCompleted: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬é¢å¤–è´­ä¹°æœˆå¡æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                monthlyCardCount() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬æœˆå¡æ¿€æ´»çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                monthlyCardActive() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬å¡æ± æ—¶é—´é€‰æ‹©å˜åŒ–ï¼Œè°ƒæ•´ç›‘å¯Ÿå¯†ä»¤è´­ä¹°æ•°é‡é™åˆ¶å¹¶ä¿å­˜æ•°æ®
                selectedTime() {
                    // å½“åˆ‡æ¢æ—¶é—´æ—¶ï¼Œæ£€æŸ¥å¹¶è°ƒæ•´é«˜çº§ç›‘å¯Ÿå¯†ä»¤è´­ä¹°æ•°é‡
                    const maxLimit = this.calculateInspectionPeriods - 1;
                    if (this.inspectionOrderCount > maxLimit) {
                        this.inspectionOrderCount = maxLimit;
                    }
                    this.saveToLocalStorage();
                },                
                // ç›‘å¬é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœŸæ•°é€‰æ‹©å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                selectedRechargeInspectionPeriod(newValue) {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬é«˜çº§ç›‘å¯Ÿå¯†ä»¤ç­‰çº§å˜åŒ–ï¼Œå¼ºåˆ¶æ›´æ–°æ€»è®¡è®¡ç®—å¹¶ä¿å­˜æ•°æ®
                rechargeInspectionLevels: {
                    handler(newValue) {
                        // å½“ç­‰çº§å˜åŒ–æ—¶ï¼Œå¼ºåˆ¶æ›´æ–°æ€»è®¡è®¡ç®—
                        this.$forceUpdate();
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ç›‘å¬ç‹„æ–¯ç›ˆæ»¡é’µç­‰çº§å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                disiLevel() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬ç‹„æ–¯ç›ˆæ»¡é’µæ¿€æ´»çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                disiActive() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬ç‹„æ–¯ç›ˆæ»¡é’µé¢„è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                disiPrePurchased() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬è¯¡ç‘çå®é¦†æ¿€æ´»çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                treasureActive() {
                    this.saveToLocalStorage();
                },
                // ç›‘å¬è¯¡ç‘çå®é¦†é¢„è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                treasurePrePurchased() {
                    this.saveToLocalStorage();
                },
                // æ·±åº¦ç›‘å¬ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                specialFashionTour: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬æ™¶æºç‰¹ä¾›(é¦–å……)è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                crystalSupplyButtons: {
                handler(newValue) {
                    this.saveToLocalStorage();
                },
                deep: true
                },
                // æ·±åº¦ç›‘å¬(éé¦–å……)æ™¶æºç‰¹ä¾›è´­ä¹°æ•°é‡å˜åŒ–ï¼Œå¼ºåˆ¶æ›´æ–°æ€»è®¡è®¡ç®—å¹¶ä¿å­˜æ•°æ®
                nonFirstCrystalSupplyButtons: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                        // å¼ºåˆ¶è§¦å‘æ€»è®¡æ›´æ–°
                        this.$forceUpdate();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è’æ—…è¿½è¸ªè¡¥ç»™â… è´­ä¹°æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageCycle1: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è’æ—…è¿½è¸ªè¡¥ç»™â…¡è´­ä¹°æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageCycle2: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è’æ—…è¿½è¸ªè¡¥ç»™â…¢è´­ä¹°æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageCycle3: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è’æ—…è¿½è¸ªè¡¥ç»™â…£è´­ä¹°æ•°é‡å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageCycle4: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬ç»°å½±å¤œè¯â… è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageShadow1: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬ç»°å½±å¤œè¯â…¡è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageShadow2: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬ç»°å½±å¤œè¯â…¢è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageShadow3: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è¯¡äº‹æ–­ç« è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageMystery: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬è’æ—…èµ„æºè¡¥ç»™è´­ä¹°çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                limitedPackageTravelSupply: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬å…¶ä»–é™æ—¶ç¤¼åŒ…æ•°æ®
                covenantPackages: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                
                dovePackages: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                
                singlePackages: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                
                supplyPackages: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                
                upgradePackages: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                
                limitedPackageCombo: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // æ·±åº¦ç›‘å¬å…¶ä»–èµ„æºæ¨¡å—å¼€å…³çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜æ•°æ®
                otherEstimateSwitchStates: {
                handler(newValue) {
                    this.saveToLocalStorage();
                    // å¼€å…³çŠ¶æ€æ”¹å˜æ—¶æ›´æ–°é¥¼çŠ¶å›¾
                    if (this.sections.pullSummary) {
                    this.updatePieChart();
                    }
                },
                deep: true
                },
            },
            methods: {
                preloadCriticalImages() {
                    // é¢„åŠ è½½æ ¸å¿ƒèµ„æºå›¾æ ‡
                    const criticalImages = [
                        'icons/å¼‚æ–¹æ™¶.png',
                        'icons/ç’€ç’¨æ™¶æº.png', 
                        'icons/æœç´¢ä»¤.png',
                        'icons/é™å®šåˆ¸.png',
                        'icons/ç’€ç’¨æ™¶æº.png',
                        'icons/é»„ç¥¨.png',
                        'icons/å¤šé¡¹åˆé‡‘.png'
                    ];
                    
                    criticalImages.forEach(src => {
                        const img = new Image();
                        img.src = src;
                    });
                },

                // ç¤¼åŒ…æ’åºæ–¹æ³•
                sortPackages(type) {
                    this.sortType = type;
                },

                saveToLocalStorage() {
                    const dataToSave = {
                        isDarkMode: this.isDarkMode, // ä¸»é¢˜æ¨¡å¼çŠ¶æ€ï¼šfalseä¸ºæµ…è‰²æ¨¡å¼ï¼Œtrueä¸ºæ·±è‰²æ¨¡å¼
                        // ä¾§è¾¹èœå•æ æ§åˆ¶
                        showSideMenu: this.showSideMenu,
                        currentPage: this.currentPage,
                        ections: this.sections, // å„æ¨¡å—çš„å±•å¼€/æŠ˜å çŠ¶æ€
                        selectedTime: this.selectedTime, // é€‰æ‹©çš„å¡æ± æ—¶é—´ï¼š'nextVersion'æˆ–'newYear'
                        calculateToPoolEnd: this.calculateToPoolEnd, // æ˜¯å¦è®¡ç®—åˆ°å¡æ± ç»“æŸå½“å¤©

                        resources: this.resources, // å½“å‰èµ„æºæ•°æ®ï¼šå¼‚æ–¹æ™¶ã€ç’€ç’¨æ™¶æºã€æœç´¢ä»¤åº“å­˜                        
                        usePremiumCrystal: this.usePremiumCrystal, // æ˜¯å¦ä½¿ç”¨ç’€ç’¨æ™¶æºæŠ½å¡
                        skinReserve: this.skinReserve, // çš®è‚¤é¢„ç•™çº¢æ™¶æ•°é‡ï¼š880ã€1280ã€2580æ¡£ä½
                        customAdjustment: this.customAdjustment, // è‡ªå®šä¹‰å¼‚æ–¹æ™¶ä¿®æ­£å€¼   

                        weeklyCompleted: this.weeklyCompleted, // æœ¬å‘¨å‘¨å¸¸ä»»åŠ¡å®ŒæˆçŠ¶æ€
                        dailyShareCompleted: this.dailyShareCompleted, // æœ¬å‘¨åˆ†äº«ä»»åŠ¡å®ŒæˆçŠ¶æ€
                        emotionDetectionCompleted: this.emotionDetectionCompleted, // æœ¬æœˆæƒ…ç»ªæ£€æµ‹å®ŒæˆçŠ¶æ€
                        signInRewardCompleted: this.signInRewardCompleted, // æœ¬æœˆç­¾åˆ°å¥–åŠ±å®ŒæˆçŠ¶æ€
                        alloyCount: this.alloyCount, // å¤šé¡¹åˆé‡‘æ•°é‡
                        useAlloyExchange: this.useAlloyExchange, // æ˜¯å¦ä½¿ç”¨åˆé‡‘å…‘æ¢å¼‚æ–¹æ™¶
                        fashionTourCompleted: this.fashionTourCompleted, // åŸºç¡€æ—¶å°šå·¡å›åº†å…¸å®ŒæˆçŠ¶æ€
                        inspectionLevels: this.inspectionLevels, // ç›‘å¯Ÿå¯†ä»¤å„æœŸæ•°ç­‰çº§
                        selectedInspectionPeriod: this.selectedInspectionPeriod, // é€‰æ‹©çš„ç›‘å¯Ÿå¯†ä»¤æœŸæ•°
                        trackingExchanged: this.trackingExchanged, // æœ¬æœˆè¿½è¸ªè®¤è¯å¸¸è§„å…‘æ¢çŠ¶æ€
                        friendshipExchanged: this.friendshipExchanged, // æœ¬æœˆå‹æƒ…å…‘æ¢çŠ¶æ€
                        trackingCertificationCount: this.trackingCertificationCount, // è¿½è¸ªè®¤è¯é»„ç¥¨æ•°é‡
                        useTrackingCertification: this.useTrackingCertification, // æ˜¯å¦ä½¿ç”¨é»„ç¥¨å…‘æ¢æœç´¢ä»¤
                        darkZoneSweepOnly: this.darkZoneSweepOnly, // æš—åŸŸæ˜¯å¦ä»…æ‰«è¡æ¨¡å¼
                        darkZoneCompleted: this.darkZoneCompleted, // æœ¬å‘¨æš—åŸŸæŒ‘æˆ˜å®ŒæˆçŠ¶æ€
                        darkZoneFirstCompleted: this.darkZoneFirstCompleted, // æš—åŸŸé¦–é€šå¥–åŠ±å®ŒæˆçŠ¶æ€
                        dataGapCompleted: this.dataGapCompleted, // æ•°æ®é—´éš™å®ŒæˆçŠ¶æ€                        
                        trainingModes: this.trainingModes, // ç‹‚å„ç‰¹è®­éš¾åº¦é€‰æ‹©çŠ¶æ€
                        nightmareSeaCompleted: this.nightmareSeaCompleted, // ç¥¸æµ·ä¹‹å„å®ŒæˆçŠ¶æ€

                        mainStory: this.mainStory, // ç‹„æ–¯åŸä¸»çº¿å…³å¡å®ŒæˆçŠ¶æ€
                        actionSummaryLevel: this.actionSummaryLevel, // è¡ŒåŠ¨çºªè¦è¿›åº¦ç­‰çº§
                        zeroMirror: this.zeroMirror, // é›¶é•œç³»ç»Ÿä¸–ç•Œè§‚å®ŒæˆçŠ¶æ€
                        memoryReviewThreshold: this.memoryReviewThreshold, // è®°å¿†å¤ç°å¼¥åˆé˜ˆå€¼
                        oldCaseArchiveCount: this.oldCaseArchiveCount, // æ—§æ¡ˆå½’æ¡£å¤„æœªå…‘æ¢æœç´¢ä»¤æ•°é‡                                                
                        darkShadowEx: this.darkShadowEx, // ç‹„æ–¯æš—å½±EXå…³å¡å®ŒæˆçŠ¶æ€
                        memoryStorm: this.memoryStorm, // è®°å¿†é£æš´å‰¯æœ¬å®ŒæˆçŠ¶æ€
                        pollutionNest: this.pollutionNest, // æ±¡æŸ“ä¹‹å·¢å‰¯æœ¬å®ŒæˆçŠ¶æ€
                        cleanupOperation: this.cleanupOperation, // æ¸…å‰¿è¡ŒåŠ¨å‰¯æœ¬å®ŒæˆçŠ¶æ€
                        palmaRuins: this.palmaRuins, // å¸•å°”é©¬åºŸå¢Ÿå‰¯æœ¬å®ŒæˆçŠ¶æ€
                        selectedDispatchArea: this.selectedDispatchArea, // é€‰æ‹©çš„æ´¾é£å£°æœ›åŒºåŸŸ
                        dispatchReputation: this.dispatchReputation, // æ´¾é£å£°æœ›ç­‰çº§å’Œå¼‚æ–¹æ™¶æ•°æ®
                        characterDevelopment: this.characterDevelopment, // è§’è‰²å…»æˆè¿›åº¦æ•°æ®
                        dreamInsightCount: this.dreamInsightCount, // æœªå®Œæˆçª¥å¿ƒæ•°é‡
                        dreamRetrospectCount: this.dreamRetrospectCount, // æœªå®Œæˆæº¯æ—¶æ•°é‡
                        personalitySpectrumCount: this.personalitySpectrumCount, // æœªå®Œæˆäººæ ¼è‰²è°±æ•°é‡
                        nightmareScore: this.nightmareScore, // æ— å°½æ¢¦é­‡ç§¯åˆ†æ»‘å—å€¼
                        ashTide: this.ashTide, // ç°çƒ¬ä¹‹æ½®é‡å¡‘å®ŒæˆçŠ¶æ€                        

                        activityCompleted: this.activityCompleted, // å„æ´»åŠ¨ä¸»çº¿å¥–åŠ±å®ŒæˆçŠ¶æ€
                        activityReviewCompleted: this.activityReviewCompleted, // å„æ´»åŠ¨å®¡æŸ¥å¥–åŠ±å®ŒæˆçŠ¶æ€
                        activityTrialCompleted: this.activityTrialCompleted, // å„æ´»åŠ¨è§’è‰²è¯•ç”¨å¥–åŠ±å®ŒæˆçŠ¶æ€
                        activityRerunMode: this.activityRerunMode, // å„æ´»åŠ¨å¤åˆ»æ¨¡å¼é€‰æ‹©çŠ¶æ€
                        remainingEchoActive: this.remainingEchoActive, // è¯¡å¢ƒä½™éŸ³æ´»åŠ¨çŠ¶æ€
                        crystalDreamActive: this.crystalDreamActive, // ç¢æ™¶ä¹‹æ¢¦æ´»åŠ¨çŠ¶æ€ 
                        activityGuildWarCompleted: this.activityGuildWarCompleted, // æ´»åŠ¨å…¬ä¼šæˆ˜å®ŒæˆçŠ¶æ€ 
                        activitySecretOperationCompleted: this.activitySecretOperationCompleted, // æ´»åŠ¨ç»å¯†è¡ŒåŠ¨å®ŒæˆçŠ¶æ€                      

                        monthlyCardCount: this.monthlyCardCount, // é¢å¤–è´­ä¹°æœˆå¡æ•°é‡
                        monthlyCardActive: this.monthlyCardActive, // æœˆå¡æ¿€æ´»çŠ¶æ€
                        rechargeInspectionLevels: this.rechargeInspectionLevels, // é«˜çº§ç›‘å¯Ÿå¯†ä»¤å„æœŸæ•°ç­‰çº§
                        selectedRechargeInspectionPeriod: this.selectedRechargeInspectionPeriod, // é€‰æ‹©çš„é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœŸæ•°
                        disiLevel: this.disiLevel, // ç‹„æ–¯ç›ˆæ»¡é’µå½“å‰ç­‰çº§
                        disiActive: this.disiActive, // ç‹„æ–¯ç›ˆæ»¡é’µæ¿€æ´»çŠ¶æ€
                        disiPrePurchased: this.disiPrePurchased, // ç‹„æ–¯ç›ˆæ»¡é’µé¢„è´­ä¹°çŠ¶æ€
                        treasureActive: this.treasureActive, // è¯¡ç‘çå®é¦†æ¿€æ´»çŠ¶æ€
                        treasurePrePurchased: this.treasurePrePurchased, // è¯¡ç‘çå®é¦†é¢„è´­ä¹°çŠ¶æ€
                        specialFashionTour: this.specialFashionTour, // ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸çŠ¶æ€
                        crystalSupplyPurchased: this.crystalSupplyButtons.map(button => button.purchased), // æ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰å„æ¡£ä½è´­ä¹°çŠ¶æ€
                        nonFirstCrystalSupplyCounts: this.nonFirstCrystalSupplyButtons.map(button => button.count), // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰å„æ¡£ä½è´­ä¹°æ•°é‡
                        permanentPackageActive: this.permanentPackage.active, // æ–°äººè¿½è¸ªç¤¼åŒ…è´­ä¹°çŠ¶æ€
                        weeklyTrackingPackageCount: this.weeklyTrackingPackage.count, // æ¯å‘¨è¿½è¸ªç¤¼åŒ…è´­ä¹°æ•°é‡
                        monthlyTrackingPackage1Count: this.monthlyTrackingPackage1.count, // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… è´­ä¹°æ•°é‡
                        monthlyTrackingPackage2Count: this.monthlyTrackingPackage2.count, // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡è´­ä¹°æ•°é‡
                        directorSupplyActive: this.directorSupplyPackages.map(pkg => pkg.active), // å±€é•¿å°±ä»»ç‰¹ä¾›å„æ¡£ä½è´­ä¹°çŠ¶æ€
                        limitedPackageCycle1Count: this.limitedPackageCycle1.count, // è’æ—…è¿½è¸ªè¡¥ç»™â… è´­ä¹°æ•°é‡
                        limitedPackageCycle2Count: this.limitedPackageCycle2.count, // è’æ—…è¿½è¸ªè¡¥ç»™â…¡è´­ä¹°æ•°é‡
                        limitedPackageCycle3Count: this.limitedPackageCycle3.count, // è’æ—…è¿½è¸ªè¡¥ç»™â…¢è´­ä¹°æ•°é‡
                        limitedPackageCycle4Count: this.limitedPackageCycle4.count, // è’æ—…è¿½è¸ªè¡¥ç»™â…£è´­ä¹°æ•°é‡
                        limitedPackageShadow1Active: this.limitedPackageShadow1.active, // ç»°å½±å¤œè¯â… è´­ä¹°çŠ¶æ€
                        limitedPackageShadow2Active: this.limitedPackageShadow2.active, // ç»°å½±å¤œè¯â…¡è´­ä¹°çŠ¶æ€
                        limitedPackageShadow3Active: this.limitedPackageShadow3.active, // ç»°å½±å¤œè¯â…¢è´­ä¹°çŠ¶æ€
                        limitedPackageMysteryActive: this.limitedPackageMystery.active, // è¯¡äº‹æ–­ç« è´­ä¹°çŠ¶æ€
                        limitedPackageTravelSupplyActive: this.limitedPackageTravelSupply.active, // è’æ—…èµ„æºè¡¥ç»™è´­ä¹°çŠ¶æ€
                        covenantPackages: this.covenantPackages,
                        dovePackages: this.dovePackages,
                        singlePackages: this.singlePackages,
                        supplyPackages: this.supplyPackages,
                        upgradePackages: this.upgradePackages,
                        limitedPackageCombo: this.limitedPackageCombo,

                        otherEstimateSwitchStates: this.otherEstimateSwitchStates, //å…¶ä»–èµ„æºæ¨¡å—å¼€å…³çŠ¶æ€
                    };
                    
                    try {
                        localStorage.setItem('gachaCalculatorData', JSON.stringify(dataToSave));
                    } catch (e) {
                        console.error('ä¿å­˜æ•°æ®å¤±è´¥:', e);
                    }
                },

                // åˆ‡æ¢ä¸»é¢˜æ¨¡å¼
                toggleTheme() {
                    this.isDarkMode = !this.isDarkMode;
                    this.applyTheme();
                    this.saveToLocalStorage();
                },

                // åº”ç”¨ä¸»é¢˜æ ·å¼
                applyTheme() {
                    // ä½¿ç”¨nextTickç¡®ä¿DOMæ›´æ–°åå†åº”ç”¨æ ·å¼
                    this.$nextTick(() => {
                        document.body.classList.remove('light-mode', 'dark-mode');
                        document.body.classList.add(this.isDarkMode ? 'dark-mode' : 'light-mode');
                    });
                },

                // é¡¶éƒ¨èœå•æ æ–¹æ³•
                showWebpageInfo() {
                    this.currentModal = 'info';
                    this.showModal = true;
                },

                showFeedback() {
                    this.currentModal = 'feedback';
                    this.showModal = true;
                },

                closeModal() {
                    this.showModal = false;
                    this.currentModal = null;
                },

                // åˆ‡æ¢ä¾§è¾¹èœå•æ˜¾ç¤ºçŠ¶æ€
                toggleSideMenu() {
                    this.showSideMenu = !this.showSideMenu;
                    this.saveToLocalStorage();
                },

                // å¤„ç†é¡µé¢ç‚¹å‡»äº‹ä»¶
                handlePageClick(event) {
                    // å¦‚æœç‚¹å‡»çš„æ˜¯èœå•åˆ‡æ¢æŒ‰é’®ï¼Œä¸å¤„ç†ï¼ˆç”±toggleSideMenuå¤„ç†ï¼‰
                    if (event.target.closest('.menu-toggle-btn')) {
                        return;
                    }
                    // å¦‚æœç‚¹å‡»çš„æ˜¯ä¾§è¾¹èœå•å†…éƒ¨ï¼Œä¸å…³é—­
                    if (event.target.closest('.side-menu-overlay')) {
                        return;
                    }
                    
                    // ç§»åŠ¨ç«¯ï¼šç‚¹å‡»é¡µé¢å…¶ä»–åŒºåŸŸå…³é—­ä¾§è¾¹æ 
                    const isMobile = window.innerWidth <= 768;
                    if (isMobile && this.showSideMenu) {
                        this.showSideMenu = false;
                    }
                    // PCç«¯ï¼šä¿æŒåŸæœ‰è¡Œä¸ºï¼ˆä¸å…³é—­ä¾§è¾¹æ ï¼‰
                },

                // åˆ‡æ¢é¡µé¢
                switchPage(page) {
                    this.currentPage = page;
                    // ä¿æŒä¾§è¾¹æ æ˜¾ç¤ºçŠ¶æ€
                },

                // è®¡ç®—æ¡å½¢å›¾å®½åº¦ï¼ˆ100%å¯¹åº”50%å®½åº¦ï¼Œ200%å¯¹åº”100%å®½åº¦ï¼Œè¶…è¿‡200%ç»§ç»­å»¶ä¼¸ï¼‰
                calculateBarWidth(percentage) {
                    // å°†ç™¾åˆ†æ¯”è½¬æ¢ä¸ºæ¡å½¢å›¾å®½åº¦ï¼š100% â†’ 50%ï¼Œ200% â†’ 100%ï¼Œè¶…è¿‡200%ç»§ç»­å»¶ä¼¸
                    return (percentage / 300) * 100; // ç§»é™¤Math.miné™åˆ¶
                },

                // è®¡ç®—åœ†è§’æ ·å¼ï¼š<=200%æ—¶ä¸¤ä¾§åœ†è§’ï¼Œ>200%æ—¶åªæœ‰å·¦ä¾§åœ†è§’
                calculateBorderRadius(percentage) {
                    if (percentage <= 300) {
                        return '10px'; // ä¸¤ä¾§éƒ½æ˜¯åœ†è§’
                    } else {
                        return '10px 0 0 10px'; // åªæœ‰å·¦ä¾§åœ†è§’ï¼Œå³ä¾§ç›´è§’
                    }
                },

                // åˆ‡æ¢ç¤¼åŒ…è¯¦æƒ…æ˜¾ç¤º
                togglePackageDetail(packageId) {
                    console.log('ç‚¹å‡»äº†ç¤¼åŒ…:', packageId);
                    if (this.expandedPackage === packageId) {
                        this.expandedPackage = null;
                    } else {
                        this.expandedPackage = packageId;
                    }
                },

                // é¥¼çŠ¶å›¾äº¤äº’ç³»ç»Ÿ

                /**
                 * è·å–æ¨¡å—åç§°çš„ç¼©å†™ï¼ˆç”¨äºç§»åŠ¨ç«¯æ˜¾ç¤ºï¼‰
                 */
                getShortModuleName(fullName) {
                    const nameMap = {
                        'ç°æœ‰': 'ç°',
                        'æ—¥å¸¸': 'æ—¥', 
                        'æ´»åŠ¨': 'æ´»',
                        'æ½œåœ¨': 'æ½œ',
                        'æ°ªé‡‘': 'æ°ª',
                        'å…¶ä»–': 'å…¶'
                    };
                    return nameMap[fullName] || fullName.charAt(0);
                },

                /**
                 * ç»Ÿä¸€çš„æ‚¬åœæ£€æµ‹é€»è¾‘ - æ ¹æ®åæ ‡è®¡ç®—å½“å‰æ‚¬åœçš„æ¨¡å—
                 * @param {number} clientX - å®¢æˆ·ç«¯Xåæ ‡
                 * @param {number} clientY - å®¢æˆ·ç«¯Yåæ ‡
                 * @returns {Object|null} æ‚¬åœçš„æ¨¡å—ä¿¡æ¯å’Œç´¢å¼•
                 */
                getHoveredModule(clientX, clientY) {
                    const canvas = this.$refs.pieChart;
                    if (!canvas) return null;
                    
                    // é«˜DPIé€‚é…çš„åæ ‡è½¬æ¢
                    const rect = canvas.getBoundingClientRect();
                    const dpr = window.devicePixelRatio || 1;
                    const x = (clientX - rect.left) * (canvas.width / rect.width / dpr);
                    const y = (clientY - rect.top) * (canvas.height / rect.height / dpr);
                    
                    const width = rect.width;
                    const height = rect.height;
                    const centerX = width / 2;
                    const centerY = height / 2;
                    const baseRadius = Math.min(width, height) / 2 - 20;
                    const separation = window.innerWidth <= 768 ? 2 : 5;
                    
                    // è®¡ç®—é¼ æ ‡ä½ç½®ç›¸å¯¹äºåœ†å¿ƒçš„è§’åº¦
                    const angle = Math.atan2(y - centerY, x - centerX);
                    const normalizedAngle = angle < 0 ? angle + 2 * Math.PI : angle;
                    
                    let currentAngle = 0;
                    let hoveredModule = null;
                    let hoveredIndex = -1;
                    
                    // æ‰¾å‡ºå æ¯”æœ€å¤§çš„æ¨¡å—ï¼ˆç”¨äºè‡ªåŠ¨æ”¾å¤§æ•ˆæœï¼‰
                    let maxPulls = 0;
                    let maxIndex = -1;
                    this.pieChartData.forEach((module, index) => {
                        if (module.pulls > maxPulls) {
                            maxPulls = module.pulls;
                            maxIndex = index;
                        }
                    });
                    
                    // æŸ¥æ‰¾è§¦æ‘¸æ‰€åœ¨çš„æ‰‡å½¢åŒºåŸŸ
                    this.pieChartData.forEach((module, index) => {
                        if (module.pulls > 0) {
                            const sliceAngle = (module.pulls / this.totalModulePulls) * 2 * Math.PI;
                            const midAngle = currentAngle + sliceAngle / 2;
                            
                            // è®¡ç®—åç§»åçš„åœ†å¿ƒï¼ˆåˆ†ç¦»å¼é¥¼å›¾æ•ˆæœï¼‰
                            const offsetX = Math.cos(midAngle) * separation;
                            const offsetY = Math.sin(midAngle) * separation;
                            const offsetCenterX = centerX + offsetX;
                            const offsetCenterY = centerY + offsetY;
                            
                            // è®¡ç®—è¯¥åŒºåŸŸçš„æœ€å¤§åŠå¾„ï¼ˆè€ƒè™‘è‡ªåŠ¨æ”¾å¤§å’Œæ‚¬åœæ•ˆæœï¼‰
                            let radius = baseRadius;
                            if (index === maxIndex) {
                                radius = baseRadius + (window.innerWidth <= 768 ? 4 : 8);
                            }
                            if (index === this.hoveredPieIndex) {
                                radius = baseRadius + (window.innerWidth <= 768 ? 6 : 12);
                            }
                            
                            // æ£€æŸ¥æ˜¯å¦åœ¨æ‰‡å½¢åŒºåŸŸå†…
                            if (normalizedAngle >= currentAngle && normalizedAngle <= currentAngle + sliceAngle) {
                                const distance = Math.sqrt(Math.pow(x - offsetCenterX, 2) + Math.pow(y - offsetCenterY, 2));
                                if (distance <= radius) {
                                    hoveredModule = module;
                                    hoveredIndex = index;
                                }
                            }
                            currentAngle += sliceAngle;
                        }
                    });
                    
                    return { 
                        module: hoveredModule, 
                        index: hoveredIndex 
                    };
                },

                /**
                 * æ›´æ–°æ‚¬åœçŠ¶æ€å¹¶é‡ç»˜å›¾è¡¨
                 * @param {Object} result - æ‚¬åœæ£€æµ‹ç»“æœ
                 */
                updateHoverState(result) {
                    if (result) {
                        this.hoveredPieModule = result.module;
                        this.hoveredPieIndex = result.index;
                        // é‡ç»˜é¥¼çŠ¶å›¾ä»¥æ˜¾ç¤ºæ‚¬åœæ•ˆæœ
                        this.drawPieChart();
                    }
                },

                /**
                 * å¤„ç†é¥¼çŠ¶å›¾é¼ æ ‡ç§»åŠ¨äº‹ä»¶
                 */
                handlePieChartMouseMove(event) {
                    const result = this.getHoveredModule(event.clientX, event.clientY);
                    this.updateHoverState(result);
                },

                /**
                 * å¤„ç†é¥¼çŠ¶å›¾é¼ æ ‡ç¦»å¼€äº‹ä»¶
                 */
                handlePieChartMouseLeave() {
                    this.hoveredPieModule = null;
                    this.hoveredPieIndex = -1;
                    // é‡ç»˜é¥¼çŠ¶å›¾ä»¥ç§»é™¤æ‚¬åœæ•ˆæœ
                    this.drawPieChart();
                },

                /**
                 * å¤„ç†é¥¼çŠ¶å›¾è§¦æ‘¸å¼€å§‹äº‹ä»¶
                 */
                handlePieChartTouchStart(event) {
                    this.handlePieChartTouch(event);
                },

                /**
                 * å¤„ç†é¥¼çŠ¶å›¾è§¦æ‘¸ç§»åŠ¨äº‹ä»¶
                 */
                handlePieChartTouchMove(event) {
                    this.handlePieChartTouch(event);
                },

                /**
                 * å¤„ç†é¥¼çŠ¶å›¾è§¦æ‘¸ç»“æŸäº‹ä»¶
                 */
                handlePieChartTouchEnd() {
                    // è§¦æ‘¸ç»“æŸæ—¶ä¸æ¸…é™¤æ‚¬åœçŠ¶æ€ï¼Œä¿æŒæ˜¾ç¤ºï¼ˆæ›´å¥½çš„ç§»åŠ¨ç«¯ä½“éªŒï¼‰
                },

                /**
                 * ç»Ÿä¸€çš„è§¦æ‘¸äº‹ä»¶å¤„ç†
                 */
                handlePieChartTouch(event) {
                    const touch = event.touches[0];
                    const result = this.getHoveredModule(touch.clientX, touch.clientY);
                    this.updateHoverState(result);
                },

                /**
                 * ç»˜åˆ¶é¥¼çŠ¶å›¾ - æ‚¬åœæ—¶åªæ”¾å¤§å½“å‰åŒºå—
                 */
                drawPieChart() {
                    const canvas = this.$refs.pieChart;
                    if (!canvas) return;
                    
                    // é«˜DPIé€‚é…
                    const dpr = window.devicePixelRatio || 1;
                    const container = canvas.parentElement;
                    const rect = container.getBoundingClientRect();
                    const width = rect.width;
                    const height = rect.height;
                    
                    // è®¾ç½®canvaså°ºå¯¸
                    canvas.width = width * dpr;
                    canvas.height = height * dpr;
                    canvas.style.width = width + 'px';
                    canvas.style.height = height + 'px';
                    
                    const ctx = canvas.getContext('2d');
                    
                    // å¢å¼ºæŠ—é”¯é½¿è®¾ç½®
                    ctx.scale(dpr, dpr);
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';
                    
                    // è®¾ç½®é«˜è´¨é‡æ¸²æŸ“
                    ctx.globalCompositeOperation = 'source-over';
                    ctx.globalAlpha = 1;
                    
                    // æ¸…ç©ºç”»å¸ƒ
                    ctx.clearRect(0, 0, width, height);
                    
                    // è®¡ç®—ä¸­å¿ƒç‚¹å’ŒåŠå¾„
                    const isMobile = window.innerWidth <= 768;
                    const centerX = width / 2;
                    const centerY = height / 2;
                    const baseRadius = Math.min(width, height) / (isMobile ? 3 : 3.2);
                    
                    // æ‰¾å‡ºå æ¯”æœ€å¤§çš„æ¨¡å—
                    let maxPulls = 0;
                    let maxIndex = -1;
                    this.pieChartData.forEach((module, index) => {
                        if (module.pulls > maxPulls) {
                            maxPulls = module.pulls;
                            maxIndex = index;
                        }
                    });
                    
                    let startAngle = 0;
                    const separation = isMobile ? 2 : 5;
                    
                    // ç»˜åˆ¶é˜´å½±æ•ˆæœï¼ˆåº•å±‚ï¼‰
                    this.pieChartData.forEach((module, index) => {
                        if (module.pulls > 0) {
                            const sliceAngle = (module.pulls / this.totalModulePulls) * 2 * Math.PI;
                            const midAngle = startAngle + sliceAngle / 2;
                            
                            const offsetX = Math.cos(midAngle) * separation;
                            const offsetY = Math.sin(midAngle) * separation;
                            
                            let radius = baseRadius;
                            if (index === maxIndex) {
                                radius = baseRadius + (isMobile ? 2 : 4);
                            }
                            if (index === this.hoveredPieIndex) {
                                radius = baseRadius + (isMobile ? 3 : 6);
                            }
                            
                            // ç»˜åˆ¶é˜´å½±
                            ctx.beginPath();
                            ctx.moveTo(centerX + offsetX + 1, centerY + offsetY + 1);
                            ctx.arc(centerX + offsetX + 1, centerY + offsetY + 1, radius, startAngle, startAngle + sliceAngle);
                            ctx.closePath();
                            
                            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                            ctx.fill();
                            
                            startAngle += sliceAngle;
                        }
                    });
                    
                    // é‡ç½®èµ·å§‹è§’åº¦ï¼Œç»˜åˆ¶ä¸»è¦æ‰‡å½¢
                    startAngle = 0;
                    
                    // ç»˜åˆ¶ä¸»è¦æ‰‡å½¢éƒ¨åˆ†
                    this.pieChartData.forEach((module, index) => {
                        if (module.pulls > 0) {
                            const sliceAngle = (module.pulls / this.totalModulePulls) * 2 * Math.PI;
                            const midAngle = startAngle + sliceAngle / 2;
                            
                            const offsetX = Math.cos(midAngle) * separation;
                            const offsetY = Math.sin(midAngle) * separation;
                            
                            let radius = baseRadius;
                            let lineWidth = isMobile ? 1.5 : 2;
                            if (index === maxIndex) {
                                radius = baseRadius + (isMobile ? 4 : 8);
                                lineWidth = isMobile ? 2.5 : 3;
                            }
                            if (index === this.hoveredPieIndex) {
                                radius = baseRadius + (isMobile ? 6 : 12);
                                lineWidth = isMobile ? 3 : 4;
                            }
                            
                            // æ”¹è¿›çš„æ‰‡å½¢ç»˜åˆ¶ - ä½¿ç”¨è·¯å¾„å’Œå¡«å……åˆ†ç¦»
                            ctx.save(); // ä¿å­˜çŠ¶æ€
                            
                            // åˆ›å»ºåœ†å½¢è·¯å¾„
                            ctx.beginPath();
                            ctx.moveTo(centerX + offsetX, centerY + offsetY);
                            ctx.arc(centerX + offsetX, centerY + offsetY, radius, startAngle, startAngle + sliceAngle);
                            ctx.closePath();
                            
                            // è®¾ç½®é˜´å½±æ•ˆæœ
                            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
                            ctx.shadowBlur = 8;
                            ctx.shadowOffsetX = 2;
                            ctx.shadowOffsetY = 2;
                            
                            // å¡«å……æ‰‡å½¢
                            ctx.fillStyle = module.color;
                            ctx.fill();
                            
                            // æ¸…é™¤é˜´å½±
                            ctx.shadowColor = 'transparent';
                            ctx.shadowBlur = 0;
                            ctx.shadowOffsetX = 0;
                            ctx.shadowOffsetY = 0;
                            
                            // ç»˜åˆ¶å¹³æ»‘è¾¹æ¡†
                            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
                            ctx.lineWidth = lineWidth;
                            ctx.lineCap = 'round';
                            ctx.lineJoin = 'round';
                            ctx.stroke();
                            
                            ctx.restore(); // æ¢å¤çŠ¶æ€
                            
                            startAngle += sliceAngle;
                        }
                    });
                    
                    // ç»˜åˆ¶æ ‡ç­¾å’Œå¼•å¯¼çº¿
                    startAngle = 0;
                    
                    // è®¾ç½®æ–‡å­—æ¸²æŸ“è´¨é‡
                    ctx.textRendering = 'geometricPrecision';
                    ctx.font = `bold ${isMobile ? 11 : 12}px "Microsoft YaHei", Arial, sans-serif`;
                    
                    this.pieChartData.forEach((module, index) => {
                        if (module.pulls > 0) {
                            const sliceAngle = (module.pulls / this.totalModulePulls) * 2 * Math.PI;
                            const midAngle = startAngle + sliceAngle / 2;
                            
                            const offsetX = Math.cos(midAngle) * separation;
                            const offsetY = Math.sin(midAngle) * separation;
                            
                            let radius = baseRadius;
                            if (index === maxIndex) {
                                radius = baseRadius + (isMobile ? 4 : 8);
                            }
                            if (index === this.hoveredPieIndex) {
                                radius = baseRadius + (isMobile ? 6 : 12);
                            }
                            
                            // ç§»åŠ¨ç«¯æ˜¾ç¤ºå®Œæ•´æ ‡ç­¾
                            if (isMobile) {
                                const labelRadius = radius + 15;
                                const labelX = centerX + offsetX + Math.cos(midAngle) * labelRadius;
                                const labelY = centerY + offsetY + Math.sin(midAngle) * labelRadius;
                                
                                // å¼•å¯¼çº¿
                                ctx.beginPath();
                                ctx.moveTo(
                                    centerX + offsetX + Math.cos(midAngle) * radius,
                                    centerY + offsetY + Math.sin(midAngle) * radius
                                );
                                ctx.lineTo(labelX, labelY);
                                ctx.strokeStyle = 'rgba(100, 100, 100, 0.6)';
                                ctx.lineWidth = 1;
                                ctx.stroke();
                                
                                // æ–‡å­—
                                ctx.fillStyle = '#FF6B6B';
                                ctx.textAlign = Math.cos(midAngle) > 0 ? 'left' : 'right';
                                ctx.textBaseline = 'middle';
                                ctx.fillText(module.name, labelX + (Math.cos(midAngle) > 0 ? 5 : -5), labelY);
                            } else {
                                // æ¡Œé¢ç«¯æ ‡ç­¾
                                const labelRadius = radius + 20;
                                const labelX = centerX + offsetX + Math.cos(midAngle) * labelRadius;
                                const labelY = centerY + offsetY + Math.sin(midAngle) * labelRadius;
                                
                                // å¼•å¯¼çº¿
                                ctx.beginPath();
                                ctx.moveTo(
                                    centerX + offsetX + Math.cos(midAngle) * radius,
                                    centerY + offsetY + Math.sin(midAngle) * radius
                                );
                                ctx.lineTo(labelX, labelY);
                                ctx.strokeStyle = 'rgba(100, 100, 100, 0.6)';
                                ctx.lineWidth = 1;
                                ctx.stroke();
                                
                                // æ–‡å­—
                                ctx.fillStyle = '#FF6B6B';
                                ctx.textAlign = Math.cos(midAngle) > 0 ? 'left' : 'right';
                                ctx.textBaseline = 'middle';
                                ctx.fillText(module.name, labelX + (Math.cos(midAngle) > 0 ? 5 : -5), labelY);
                            }
                            
                            startAngle += sliceAngle;
                        }
                    });
                },

                /**
                 * æ›´æ–°é¥¼çŠ¶å›¾æ•°æ®
                 */
                updatePieChart() {
                    this.pieChartData = this.modulePullsData.map(module => {
                        const percentage = this.totalModulePulls > 0 ? 
                            ((module.pulls / this.totalModulePulls) * 100).toFixed(1) : '0.0';
                        return {
                            ...module,
                            percentage: percentage
                        };
                    });
                    
                    this.$nextTick(() => {
                        this.drawPieChart();
                    });
                },

                // å½“å‰èµ„æºã€é»„ç¥¨è¾“å…¥ã€æ—§æ¡ˆå½’æ¡£å¤„è¾“å…¥æ¡†è®¾ç½®
                // ç»Ÿä¸€çš„æ¸…ç©ºæ–¹æ³•ï¼ˆå½“è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œå¦‚æœå€¼ä¸º0åˆ™æ¸…ç©ºï¼‰
                clearIfZero(value, type = null, key = null) {
                    if (value === 0) {
                        return '';
                    }
                    return value;
                },

                // ç»Ÿä¸€çš„é»˜è®¤å€¼è®¾ç½®æ–¹æ³•ï¼ˆå½“è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œå¦‚æœä¸ºç©ºåˆ™è®¾ç½®ä¸º0ï¼‰
                setDefaultIfEmpty(value, type = null, key = null) {
                    // åªæœ‰å½“è¾“å…¥æ¡†å®Œå…¨ä¸ºç©ºæ—¶æ‰è®¾ç½®ä¸º0
                    if (value === '' || value === null) {
                        return 0;
                    }
                    // å¦‚æœæ˜¯NaNï¼Œä¹Ÿè®¾ç½®ä¸º0
                    if (isNaN(value)) {
                        return 0;
                    }
                    return value;
                },
                
                // å¼‚æ–¹æ™¶ä¿®æ­£æ¸…ç©ºæ–¹æ³•
                clearCustomAdjustmentIfZero() {
                    if (this.customAdjustment === 0) {
                        this.customAdjustment = null;
                    }
                },

                // å¤šé¡¹åˆé‡‘æ¸…ç©ºæ–¹æ³•
                clearAlloyIfZero() {
                    if (this.alloyCount === 0) {
                        this.alloyCount = null;
                    }
                },

                // é»„ç¥¨æ¸…ç©ºæ–¹æ³•  
                clearCertificationIfZero() {
                    if (this.trackingCertificationCount === 0) {
                        this.trackingCertificationCount = null;
                    }
                },

                // å¤šé¡¹åˆé‡‘é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setAlloyDefaultIfEmpty() {
                    if (this.alloyCount === null || this.alloyCount === '') {
                        this.alloyCount = 0;
                    }
                },

                // é»„ç¥¨é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setCertificationDefaultIfEmpty() {
                    if (this.trackingCertificationCount === null || this.trackingCertificationCount === '') {
                        this.trackingCertificationCount = 0;
                    }
                },

                // å¼‚æ–¹æ™¶ä¿®æ­£é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setCustomAdjustmentDefaultIfEmpty() {
                    if (this.customAdjustment === null || this.customAdjustment === '') {
                        this.customAdjustment = 0;
                    }
                },

                // è§’è‰²å…»æˆæ¸…ç©ºæ–¹æ³•
                clearCharacterDevIfZero(type) {
                    if (this.characterDevelopment[type] === 0) {
                        this.characterDevelopment[type] = null;
                    }
                },

                // è§’è‰²å…»æˆé»˜è®¤å€¼è®¾ç½®æ–¹æ³•  
                setCharacterDevDefaultIfEmpty(type) {
                    if (this.characterDevelopment[type] === null || this.characterDevelopment[type] === '') {
                        this.characterDevelopment[type] = 0;
                    }
                },

                // æ¢¦å¢ƒæ¸…ç©ºæ–¹æ³•
                clearDreamIfZero(type) {
                    if (this[type] === 0) {
                        this[type] = null;
                    }
                },

                // æ¢¦å¢ƒé»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setDreamDefaultIfEmpty(type) {
                    if (this[type] === null || this[type] === '') {
                        this[type] = 0;
                    }
                },

                // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰æ¸…ç©ºæ–¹æ³•
                clearNonFirstCrystalSupplyIfZero(index) {
                    if (this.nonFirstCrystalSupplyButtons[index].count === 0) {
                        this.nonFirstCrystalSupplyButtons[index].count = null;
                    }
                },

                // æ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setNonFirstCrystalSupplyDefaultIfEmpty(index) {
                    if (this.nonFirstCrystalSupplyButtons[index].count === null || this.nonFirstCrystalSupplyButtons[index].count === '') {
                        this.nonFirstCrystalSupplyButtons[index].count = 0;
                    }
                },

                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…æ¸…ç©ºæ–¹æ³•
                clearWeeklyTrackingPackageIfZero() {
                    if (this.weeklyTrackingPackage.count === 0) {
                        this.weeklyTrackingPackage.count = null;
                    }
                },

                // æ¯å‘¨è¿½è¸ªç¤¼åŒ…é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setWeeklyTrackingPackageDefaultIfEmpty() {
                    if (this.weeklyTrackingPackage.count === null || this.weeklyTrackingPackage.count === '') {
                        this.weeklyTrackingPackage.count = 0;
                    }
                },

                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… æ¸…ç©ºæ–¹æ³•
                clearMonthlyTrackingPackage1IfZero() {
                    if (this.monthlyTrackingPackage1.count === 0) {
                        this.monthlyTrackingPackage1.count = null;
                    }
                },

                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â… é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setMonthlyTrackingPackage1DefaultIfEmpty() {
                    if (this.monthlyTrackingPackage1.count === null || this.monthlyTrackingPackage1.count === '') {
                        this.monthlyTrackingPackage1.count = 0;
                    }
                },

                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡æ¸…ç©ºæ–¹æ³•
                clearMonthlyTrackingPackage2IfZero() {
                    if (this.monthlyTrackingPackage2.count === 0) {
                        this.monthlyTrackingPackage2.count = null;
                    }
                },

                // æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setMonthlyTrackingPackage2DefaultIfEmpty() {
                    if (this.monthlyTrackingPackage2.count === null || this.monthlyTrackingPackage2.count === '') {
                        this.monthlyTrackingPackage2.count = 0;
                    }
                },

                // é™æ—¶ç¤¼åŒ…æ¸…ç©ºæ–¹æ³•
                clearLimitedPackageIfZero(packageName) {
                    if (this[packageName].count === 0) {
                        this[packageName].count = null;
                    }
                },

                // é™æ—¶ç¤¼åŒ…é»˜è®¤å€¼è®¾ç½®æ–¹æ³•
                setLimitedPackageDefaultIfEmpty(packageName) {
                    if (this[packageName].count === null || this[packageName].count === '') {
                        this[packageName].count = 0;
                    }
                },

                // å½“å‰èµ„æºçš„è¾“å…¥éªŒè¯
                validateInputDelayed(type) {
                    this.$nextTick(() => {
                        if (this.resources[type] !== null && this.resources[type] !== undefined && this.resources[type] !== '') {
                            if (this.resources[type] < 0 || isNaN(this.resources[type])) {
                                this.resources[type] = 0;
                            } else {
                                this.resources[type] = Math.floor(this.resources[type]);
                            }
                        }
                        // å¼‚æ–¹æ™¶ä¿®æ­£çš„ç‰¹æ®ŠéªŒè¯
                        if (type === 'crystal' && this.customAdjustment < 0) {
                            const maxDeduction = this.resources.crystal || 0;
                            if (Math.abs(this.customAdjustment) > maxDeduction) {
                                // è‡ªåŠ¨ä¿®æ­£ä¸ºæœ€å¤§å¯æ‰£å‡å€¼
                                this.customAdjustment = -maxDeduction;
                                // æ˜¾ç¤ºæç¤º
                                this.showAutoCloseAlert("å·²ç»æ²¡æœ‰å¯ä»¥æ‰£å‡çš„å¼‚æ–¹æ™¶äº†");
                            }
                        }
                        // è¾“å…¥å®Œæˆåæ›´æ–°é¥¼çŠ¶å›¾
                        if (this.sections.pullSummary) {
                            this.updatePieChart();
                        }
                    });
                },

                // å¼‚æ–¹æ™¶ä¿®æ­£çš„ä¸“é—¨éªŒè¯æ–¹æ³•
                validateCustomAdjustment() {
                    this.$nextTick(() => {
                        if (this.customAdjustment < 0) {
                            const maxDeduction = this.resources.crystal || 0;
                            if (Math.abs(this.customAdjustment) > maxDeduction) {
                                // è‡ªåŠ¨ä¿®æ­£ä¸ºæœ€å¤§å¯æ‰£å‡å€¼
                                this.customAdjustment = -maxDeduction;
                                // æ˜¾ç¤ºæç¤º
                                this.showAutoCloseAlert("å·²ç»æ²¡æœ‰å¯ä»¥æ‰£å‡çš„å¼‚æ–¹æ™¶äº†");
                            }
                        }
                        // ç¡®ä¿å€¼ä¸ºæ•´æ•°
                        if (this.customAdjustment !== null && this.customAdjustment !== undefined && this.customAdjustment !== '') {
                            this.customAdjustment = Math.floor(this.customAdjustment);
                        }
                    });
                },

                // å…¬å…±æœˆåº¦å¥–åŠ±è®¡ç®—æ–¹æ³•
                calculateMonthlyReward(monthlyReward, isCompleted) {
                    if (isCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                // ç›‘å¯Ÿå¯†ä»¤æ ¼å¼åŒ–æ—¥æœŸä¸ºMM-DD
                formatDateToMMDD(date) {
                    const month = (date.getMonth() + 1).toString().padStart(2, '0');
                    const day = date.getDate().toString().padStart(2, '0');
                    return `${month}-${day}`;
                },

                // åˆ‡æ¢ç›‘å¯Ÿå¯†ä»¤æœŸæ•°æ¿€æ´»çŠ¶æ€
                toggleInspectionPeriod(periodId) {
                    if (this.inspectionLevels[periodId] === undefined || this.inspectionLevels[periodId] === 0) {
                        this.$set(this.inspectionLevels, periodId, 1);
                    } else {
                        this.$set(this.inspectionLevels, periodId, 0);
                    }
                },

                // é€‰æ‹©ç›‘å¯Ÿå¯†ä»¤æœŸæ•°
                selectInspectionPeriod(periodId) {
                    this.selectedInspectionPeriod = periodId;
                },

                // ç›‘å¯Ÿå¯†ä»¤æ»‘å—å¸é™„åˆ°æŒ‡å®šæŒ¡ä½
                snapInspectionLevel(periodId) {
                    const levels = [0, 5, 15, 25, 35, 45, 55];
                    let closestLevel = levels[0];
                    let minDiff = Math.abs(this.inspectionLevels[periodId] - levels[0]);
                    
                    for (let i = 1; i < levels.length; i++) {
                        const diff = Math.abs(this.inspectionLevels[periodId] - levels[i]);
                        if (diff < minDiff) {
                            minDiff = diff;
                            closestLevel = levels[i];
                        }
                    }
                    
                    if (this.inspectionLevels[periodId] !== closestLevel) {
                        this.$set(this.inspectionLevels, periodId, closestLevel);
                    }
                },

                // ç›‘å¯Ÿå¯†ä»¤å½“å‰æœŸæ•°çš„æœç´¢ä»¤æ•°é‡è®¡ç®—
                calculateCurrentPeriodTickets(level) {
                    if (!level || level === 0) return 0; // 0çº§æ—¶æ˜¾ç¤º0å¼ ï¼Œè¡¨ç¤ºè¿˜æœªé¢†å–ä»»ä½•å¥–åŠ±
                    
                    let tickets = 0;
                    const ticketLevels = [5, 15, 25, 35, 45, 55];
                    
                    // è®¡ç®—å°äºç­‰äºå½“å‰ç­‰çº§çš„æ‰€æœ‰å¥–åŠ±
                    for (const ticketLevel of ticketLevels) {
                        if (level >= ticketLevel) {
                            tickets += 1;
                        }
                    }
                    
                    return tickets;
                },

                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤æ»‘å—å¸é™„åˆ°æŒ‡å®šæŒ¡ä½
                snapRechargeInspectionLevel(periodId) {
                    const levels = [0, 5, 15, 25, 30, 35, 45, 50, 55];
                    let closestLevel = levels[0];
                    let minDiff = Math.abs((this.rechargeInspectionLevels[periodId] || 0) - levels[0]);
                    
                    for (let i = 1; i < levels.length; i++) {
                        const diff = Math.abs((this.rechargeInspectionLevels[periodId] || 0) - levels[i]);
                        if (diff < minDiff) {
                            minDiff = diff;
                            closestLevel = levels[i];
                        }
                    }
                    if ((this.rechargeInspectionLevels[periodId] || 0) !== closestLevel) {
                        this.$set(this.rechargeInspectionLevels, periodId, closestLevel);
                        // æ–°å¢ï¼šå¼ºåˆ¶æ›´æ–°è´¹ç”¨è®¡ç®—
                        this.$forceUpdate();
                    }
                },

                // è·å–é€‰ä¸­çš„é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœŸæ•°æ–‡æœ¬
                getSelectedRechargePeriodText() {
                    if (!this.selectedRechargeInspectionPeriod) return '';
                    
                    const period = this.inspectionPeriods.find(p => p.id === this.selectedRechargeInspectionPeriod);
                    if (period) {
                        return `${period.startDate}åˆ°${period.endDate}`;
                    }
                    return '';
                },

                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤å½“å‰æœŸæ•°çš„å¼‚æ–¹æ™¶æ•°é‡è®¡ç®—
                calculateRechargePeriodCrystal(level) {
                    if (!level || level === 0) return 0; // 0çº§æ—¶æ˜¾ç¤º0ï¼Œè¡¨ç¤ºè¿˜æœªé¢†å–ä»»ä½•å¥–åŠ±
                    let crystal = 0;
                    // è®¡ç®—å°äºç­‰äºå½“å‰ç­‰çº§çš„æ‰€æœ‰å¼‚æ–¹æ™¶å¥–åŠ±
                    if (level >= 30) crystal += 200;
                    if (level >= 50) crystal += 680;
                    return crystal;
                },

                // é«˜çº§ç›‘å¯Ÿå¯†ä»¤å½“å‰æœŸæ•°çš„æœç´¢ä»¤æ•°é‡è®¡ç®—
                calculateRechargePeriodTickets(level) {
                    if (!level || level === 0) return 0; // 0çº§æ—¶æ˜¾ç¤º0å¼ ï¼Œè¡¨ç¤ºè¿˜æœªé¢†å–ä»»ä½•å¥–åŠ±
                    let tickets = 0;
                    const ticketLevels = [5, 15, 25, 35, 45, 55];
                    // è®¡ç®—å°äºç­‰äºå½“å‰ç­‰çº§çš„æ‰€æœ‰æœç´¢ä»¤å¥–åŠ±
                    for (const ticketLevel of ticketLevels) {
                        if (level >= ticketLevel) {
                            tickets += 1;
                        }
                    }
                    return tickets;
                },

                // ç°çƒ¬ä¹‹æ½®-é‡å¡‘åˆ‡æ¢æ–¹æ³•
                toggleAshTide(type) {
                    this.ashTide[type] = !this.ashTide[type];
                },

                // å¤šé¡¹åˆé‡‘è¾“å…¥éªŒè¯
                validateAlloyInput() {
                    // å»¶è¿ŸéªŒè¯ï¼Œé¿å…åœ¨è¾“å…¥è¿‡ç¨‹ä¸­å¹²æ‰°
                    this.$nextTick(() => {
                        if (this.alloyCount !== null && this.alloyCount !== undefined && this.alloyCount !== '') {
                            if (this.alloyCount < 0 || isNaN(this.alloyCount)) {
                                this.alloyCount = 0;
                            } else {
                                this.alloyCount = Math.floor(this.alloyCount);
                            }
                        }
                    });
                },

                // è§’è‰²å…»æˆå»¶è¿ŸéªŒè¯
                validateCharacterDevInputDelayed(type) {
                    this.$nextTick(() => {
                        if (this.characterDevelopment[type] !== null && this.characterDevelopment[type] !== undefined && this.characterDevelopment[type] !== '') {
                            if (this.characterDevelopment[type] < 0 || isNaN(this.characterDevelopment[type])) {
                                this.characterDevelopment[type] = 0;
                            } else {
                                this.characterDevelopment[type] = Math.floor(this.characterDevelopment[type]);
                            }
                        }
                    });
                },

                // æ¢¦å¢ƒ&äººæ ¼è‰²è°±å»¶è¿ŸéªŒè¯
                validateDreamInputDelayed(type) {
                    this.$nextTick(() => {
                        if (this[type] !== null && this[type] !== undefined && this[type] !== '') {
                            if (this[type] < 0 || isNaN(this[type])) {
                                this[type] = 0;
                            } else {
                                this[type] = Math.floor(this[type]);
                            }
                        }
                    });
                },


                // å½“å½“å‰èµ„æºçš„è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œå¦‚æœå€¼ä¸º0åˆ™æ¸…ç©º
                clearIfZero(type) {
                    if (this.resources[type] === 0) {
                        this.resources[type] = null;
                    }
                },

                // å½“å½“å‰èµ„æºçš„è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œå¦‚æœä¸ºç©ºåˆ™è®¾ç½®ä¸º0
                setDefaultIfEmpty(type) {
                    if (this.resources[type] === null || this.resources[type] === '') {
                        this.resources[type] = 0;
                    }
                },

                // åˆ‡æ¢æ´»åŠ¨å¤åˆ»æ¨¡å¼
                toggleActivityRerunMode(activityTitle) {
                    // å¦‚æœå¼€å…³æ‰“å¼€ï¼Œè®¾ç½®ä¸º'crystal'æ¨¡å¼ï¼Œå¦åˆ™è®¾ç½®ä¸ºnull
                    if (this.activityRerunMode[activityTitle]) {
                        this.activityRerunMode[activityTitle] = 'crystal';
                    } else {
                        this.activityRerunMode[activity.title] = null;
                    }
                    this.saveToLocalStorage();
                },

                // æ´»åŠ¨å®ŒæˆçŠ¶æ€åˆ‡æ¢æ–¹æ³•
                toggleActivityCompletion(activityTitle) {
                    // å¦‚æœæ˜¯å¦„å¤œè¿·ç« æ´»åŠ¨ï¼ŒåŒæ—¶æ›´æ–° nightMazeCompleted
                    if (activityTitle === 'å¦„å¤œè¿·ç« ') {
                        this.nightMazeCompleted = this.activityCompleted[activityTitle];
                    }
                    this.saveToLocalStorage();
                },

                // æ´»åŠ¨å®¡æŸ¥å¥–åŠ±å®ŒæˆçŠ¶æ€åˆ‡æ¢æ–¹æ³•
                toggleActivityReviewCompletion(activityTitle) {
                    this.saveToLocalStorage();
                },

                // æ´»åŠ¨è§’è‰²è¯•ç”¨å¥–åŠ±å®ŒæˆçŠ¶æ€åˆ‡æ¢æ–¹æ³•
                toggleActivityTrialCompletion(activityTitle) {
                    this.saveToLocalStorage();
                },

                // æ´»åŠ¨å…¬ä¼šæˆ˜å¥–åŠ±å®ŒæˆçŠ¶æ€åˆ‡æ¢æ–¹æ³•
                toggleActivityGuildWarCompletion(activityTitle) {
                    this.saveToLocalStorage();
                },

                // æ´»åŠ¨ç»å¯†è¡ŒåŠ¨å¥–åŠ±å®ŒæˆçŠ¶æ€åˆ‡æ¢æ–¹æ³•
                toggleActivitySecretOperationCompletion(activityTitle) {
                    this.saveToLocalStorage();
                },

                // åˆ‡æ¢æ¨¡å—çš„æ˜¾ç¤ºçŠ¶æ€
                toggleSection(section) {
                    this.sections[section] = !this.sections[section];
                    // å¦‚æœå±•å¼€çš„æ˜¯åŒ…å«é¥¼çŠ¶å›¾çš„æ¨¡å—ï¼Œé‡æ–°ç»˜åˆ¶é¥¼çŠ¶å›¾
                    if (section === 'pullSummary' && this.sections.pullSummary) {
                        this.$nextTick(() => {
                            this.updatePieChart();
                        });
                    }
                },
                
                // çš®è‚¤é¢„ç•™çº¢æ™¶æ•°é‡çš„è°ƒæ•´åŠŸèƒ½
                /*
                adjustSkinCount(price, change) {
                    const skinKey = `skin${price}`;
                    if (this.skinReserve[skinKey] !== undefined) {
                        const newValue = this.skinReserve[skinKey] + change;
                        if (newValue >= 0) {
                            this.skinReserve[skinKey] = newValue;
                        }
                    }
                },
                */

                adjustSkinCount(price, change) {
                    const skinKey = `skin${price}`;
                    if (this.skinReserve[skinKey] !== undefined) {
                        // è®¡ç®—å½“å‰å·²é¢„ç•™çš„æ€»ç’€ç’¨æ™¶æº
                        const currentReserved = this.totalSkinReserve;
                        // è·å–å½“å‰å¯ç”¨çš„ç’€ç’¨æ™¶æºåº“å­˜
                        const availablePremiumCrystal = this.resources.premiumCrystal || 0;
                        
                        // å¦‚æœè¦å¢åŠ çš®è‚¤æ•°é‡ï¼Œæ£€æŸ¥åº“å­˜æ˜¯å¦è¶³å¤Ÿ
                        if (change > 0) {
                            // è®¡ç®—å¢åŠ è¿™ä¸ªçš®è‚¤éœ€è¦å¤šå°‘ç’€ç’¨æ™¶æº
                            const costForThisSkin = price;
                            // æ£€æŸ¥å¢åŠ åæ€»é¢„ç•™æ˜¯å¦ä¼šè¶…è¿‡åº“å­˜
                            if (currentReserved + costForThisSkin > availablePremiumCrystal) {
                                this.showAutoCloseAlert("ç’€ç’¨æ™¶æºä¸è¶³ï¼Œæ— æ³•é¢„ç•™æ›´å¤šçš®è‚¤");
                                return; // ç›´æ¥è¿”å›ï¼Œä¸æ‰§è¡Œå¢åŠ æ“ä½œ
                            }
                        }
                        
                        // æ‰§è¡Œå¢å‡æ“ä½œ
                        const newValue = this.skinReserve[skinKey] + change;
                        if (newValue >= 0) {
                            this.skinReserve[skinKey] = newValue;
                            
                            // è‡ªåŠ¨é‡æ–°è®¡ç®—å·²ä½¿ç”¨çš„æŠ˜æ‰£æ¬¡æ•°
                            this.calculateUsedDiscounts();
                        }
                    }
                },
                // è®¡ç®—å·²ä½¿ç”¨çš„æŠ˜æ‰£æ¬¡æ•°
                calculateUsedDiscounts() {
                    if (!this.specialFashionTour.active) {
                        this.specialFashionTour.usedDiscounts = 0;
                        return;
                    }
                    
                    // è®¡ç®—æ€»çš®è‚¤æ•°é‡ï¼ˆ880å’Œ1280ï¼‰
                    const totalSkinCount = this.skinReserve.skin880 + this.skinReserve.skin1280;
                    
                    // å·²ä½¿ç”¨çš„æŠ˜æ‰£æ¬¡æ•°å°±æ˜¯æ€»çš®è‚¤æ•°é‡ï¼Œä½†ä¸è¶…è¿‡æœ€å¤§æ¬¡æ•°
                    this.specialFashionTour.usedDiscounts = Math.min(totalSkinCount, this.specialFashionTour.maxDiscounts);
                },
                // éªŒè¯ä¼˜æƒ æ¬¡æ•°è¾“å…¥
                validateDiscountCount() {
                    this.$nextTick(() => {
                        if (this.specialFashionTour.maxDiscounts !== null && this.specialFashionTour.maxDiscounts !== undefined && this.specialFashionTour.maxDiscounts !== '') {
                            // é™åˆ¶åœ¨ 0-4 ä¹‹é—´
                            if (this.specialFashionTour.maxDiscounts < 0) {
                                this.specialFashionTour.maxDiscounts = 0;
                            } else if (this.specialFashionTour.maxDiscounts > 4) {
                                this.specialFashionTour.maxDiscounts = 4;
                            } else {
                                this.specialFashionTour.maxDiscounts = Math.floor(this.specialFashionTour.maxDiscounts);
                            }
                            
                            // å¦‚æœå‡å°‘äº†æœ€å¤§æ¬¡æ•°ï¼Œéœ€è¦è°ƒæ•´å·²ä½¿ç”¨æ¬¡æ•°
                            if (this.specialFashionTour.usedDiscounts > this.specialFashionTour.maxDiscounts) {
                                this.specialFashionTour.usedDiscounts = this.specialFashionTour.maxDiscounts;
                            }
                            
                            // é‡æ–°è®¡ç®—çš®è‚¤æŠ˜æ‰£
                            this.calculateUsedDiscounts();
                        }
                    });
                },

                // æ¸…ç©ºè¾“å…¥æ¡†ï¼ˆå¦‚æœä¸º0ï¼‰
                clearDiscountIfZero() {
                    if (this.specialFashionTour.maxDiscounts === 0) {
                        this.specialFashionTour.maxDiscounts = null;
                    }
                },

                // è®¾ç½®é»˜è®¤å€¼ï¼ˆå¦‚æœä¸ºç©ºï¼‰
                setDiscountDefaultIfEmpty() {
                    if (this.specialFashionTour.maxDiscounts === null || this.specialFashionTour.maxDiscounts === '') {
                        this.specialFashionTour.maxDiscounts = 0;
                    }
                },

                // è¿½è¸ªè®¤è¯éªŒè¯é»„ç¥¨è¾“å…¥éªŒè¯
                validateCertificationInput() {
                    this.$nextTick(() => {
                        if (this.trackingCertificationCount !== null && this.trackingCertificationCount !== undefined && this.trackingCertificationCount !== '') {
                            if (this.trackingCertificationCount < 0 || isNaN(this.trackingCertificationCount)) {
                                this.trackingCertificationCount = 0;
                            } else {
                                this.trackingCertificationCount = Math.floor(this.trackingCertificationCount);
                            }
                        }
                    });
                },
                
                // åˆ‡æ¢ç‹‚å„ç‰¹è®­éš¾åº¦é€‰æ‹©çŠ¶æ€
                toggleTrainingMode(mode) {
                    this.trainingModes[mode] = !this.trainingModes[mode];
                },

                // åˆ‡æ¢ç‹„æ–¯åŸï¼ˆä¸»çº¿ï¼‰é€‰æ‹©çŠ¶æ€
                toggleMainStory(type) {
                    this.mainStory[type] = !this.mainStory[type];
                },

                // åˆ‡æ¢é›¶é•œç³»ç»Ÿï¼ˆä¸–ç•Œè§‚ï¼‰é€‰æ‹©æ–¹æ³•
                toggleZeroMirror(type) {
                    this.zeroMirror[type] = !this.zeroMirror[type];
                },

                // æ—§æ¡ˆå½’æ¡£å¤„å»¶è¿ŸéªŒè¯
                validateOldCaseArchiveInput() {
                    this.$nextTick(() => {
                        if (this.oldCaseArchiveCount !== null && this.oldCaseArchiveCount !== undefined && this.oldCaseArchiveCount !== '') {
                            if (this.oldCaseArchiveCount < 0 || isNaN(this.oldCaseArchiveCount)) {
                                this.oldCaseArchiveCount = 0;
                            } else {
                                this.oldCaseArchiveCount = Math.floor(this.oldCaseArchiveCount);
                            }
                        }
                    });
                },

                // åˆ‡æ¢ç‹„æ–¯æš—å½±ï¼ˆEXï¼‰é€‰æ‹©æ–¹æ³•
                toggleDarkShadowEx(type) {
                    this.darkShadowEx[type] = !this.darkShadowEx[type];
                },

                // åˆ‡æ¢è®°å¿†é£æš´é€‰æ‹©æ–¹æ³•
                toggleMemoryStorm(type) {
                    this.memoryStorm[type] = !this.memoryStorm[type];
                },

                // åˆ‡æ¢æ±¡æŸ“ä¹‹å·¢é€‰æ‹©æ–¹æ³•
                togglePollutionNest(type) {
                    this.pollutionNest[type] = !this.pollutionNest[type];
                },

                // åˆ‡æ¢æ¸…å‰¿è¡ŒåŠ¨é€‰æ‹©æ–¹æ³•
                toggleCleanupOperation(type) {
                    this.cleanupOperation[type] = !this.cleanupOperation[type];
                },

                // åˆ‡æ¢å¸•å°”é©¬åºŸå¢Ÿé€‰æ‹©æ–¹æ³•
                togglePalmaRuins(type) {
                    this.palmaRuins[type] = !this.palmaRuins[type];
                },
                
                // åˆ‡æ¢æ´¾é£å£°æœ›é€‰æ‹©æ–¹æ³•
                selectDispatchArea(area) {
                    this.selectedDispatchArea = area;
                },
                
                // æ´¾é£å£°æœ›æ»‘å—å¸é™„åˆ°æŒ‡å®šæŒ¡ä½
                snapDispatchLevel() {
                    const levels = [0, 1000, 3000, 6000, 10000];
                    let closestLevel = levels[0];
                    let minDiff = Math.abs(this.dispatchReputation[this.selectedDispatchArea].level - levels[0]);
                    
                    for (let i = 1; i < levels.length; i++) {
                        const diff = Math.abs(this.dispatchReputation[this.selectedDispatchArea].level - levels[i]);
                        if (diff < minDiff) {
                            minDiff = diff;
                            closestLevel = levels[i];
                        }
                    }
                    // åªæœ‰å½“å½“å‰å€¼ä¸ç­‰äºæœ€æ¥è¿‘çš„æŒ¡ä½æ—¶æ‰æ›´æ–°
                    if (this.dispatchReputation[this.selectedDispatchArea].level !== closestLevel) {
                        this.dispatchReputation[this.selectedDispatchArea].level = closestLevel;
                    }
                },
                
                // è®¡ç®—æ´¾é£å£°æœ›å¼‚æ–¹æ™¶
                calculateDispatchCrystal() {
                    // å®šä¹‰æ¯ä¸ªå£°æœ›ç­‰çº§çš„å¥–åŠ±
                    const reputationRewards = [
                        { level: 1000, crystal: 100 },
                        { level: 3000, crystal: 100 },
                        { level: 6000, crystal: 100 },
                        { level: 10000, crystal: 100 }
                    ];
                    // ä¸ºæ¯ä¸ªåŒºåŸŸè®¡ç®—å¼‚æ–¹æ™¶
                    for (const areaKey in this.dispatchReputation) {
                        const currentLevel = this.dispatchReputation[areaKey].level;
                        let totalCrystal = 0;
                        // è®¡ç®—å¤§äºå½“å‰ç­‰çº§çš„æ‰€æœ‰å¥–åŠ±æ€»å’Œ
                        for (const reward of reputationRewards) {
                            if (currentLevel < reward.level) {
                                totalCrystal += reward.crystal;
                            }
                        }
                        this.dispatchReputation[areaKey].crystal = totalCrystal;
                    }
                },
                
                // æ´¾é£å£°æœ›è·å–åŒºåŸŸåç§°
                getDispatchAreaName(areaKey) {
                    const names = {
                        syndicate: 'è¾›è¿ªåŠ ',
                        newCity: 'æ–°åŸ',
                        innerBay: 'é‡Œæ¹¾',
                        sandSea: 'ç ‚æµ·'
                    };
                    return names[areaKey] || areaKey;
                },

                // è§’è‰²å…»æˆæ¨¡å—æ–¹æ³•
                toggleHaylaReview() {
                    this.characterDevelopment.haylaReviewed = !this.characterDevelopment.haylaReviewed;
                },
                
                // è°ƒæ•´è§’è‰²å…»æˆæ•°é‡
                adjustCharacterDev(type, change) {
                    // ç¡®ä¿å½“å‰å€¼æ˜¯æ•°å­—ç±»å‹
                    const currentValue = Number(this.characterDevelopment[type]) || 0;
                    const newValue = currentValue + change;
                    // ç¡®ä¿æ–°å€¼ä¸å°äº0
                    if (newValue >= 0) {
                        this.characterDevelopment[type] = newValue;
                    }
                },

                // è®¡ç®—æ— å°½æ¢¦é­‡ï¼ˆç§¯åˆ†å¥–åŠ±ï¼‰å¥–åŠ±
                calculateNightmareRewards() {
                    let totalCrystal = 0;
                    let totalTickets = 0;
                    for (const reward of this.nightmareRewards) {
                        // åªè®¡ç®—å¤§äºå½“å‰ç§¯åˆ†çš„å¥–åŠ±
                        if (this.nightmareScore < reward.score) {
                            totalCrystal += reward.crystal;
                            totalTickets += reward.tickets;
                        }
                    }
                    return {
                        crystal: totalCrystal,
                        tickets: totalTickets
                    };
                },

                // å½“å‰èµ„æºå¼‚æ–¹æ™¶ã€ç’€ç’¨æ™¶æºå’Œæœç´¢ä»¤è¾“å…¥éªŒè¯
                validateInput(type) {
                    // ç¡®ä¿å€¼ä¸ºæ•´æ•°ä¸”éè´Ÿæ•°
                    if (this.resources[type] < 0) {
                        this.resources[type] = 0;
                    }
                    if (this.resources[type] !== null && this.resources[type] !== undefined) {
                        this.resources[type] = Math.floor(this.resources[type]);
                    }
                },
                
                // é¢å¤–è´­ä¹°æœˆå¡æ•°é‡çš„å¢å‡éªŒè¯
                adjustMonthlyCard(change) {
                    const newValue = this.monthlyCardCount + change;
                    // æ£€æŸ¥æ˜¯å¦ä»5å¢åŠ åˆ°6
                    if (this.monthlyCardCount === 5 && change === 1) {
                        this.showAutoCloseAlert("å‰©ä½™æœ‰æ•ˆæ—¥æœŸ>150å¤©æ—¶å°†æ— æ³•ç»§ç»­è´­ä¹°æœˆå¡");
                        return;
                    }
                    // é™åˆ¶åªèƒ½åœ¨-1åˆ°5ä¹‹é—´ï¼ˆç°åœ¨å…è®¸åˆ°5ï¼‰
                    if (newValue >= -1 && newValue <= 5) {
                        this.monthlyCardCount = newValue;
                    }
                },

                // æœˆå¡é¢å¤–è´­ä¹°è¶…æ•°é‡è‡ªåŠ¨æ˜¾ç¤º&å…³é—­æç¤º
                showAutoCloseAlert(message) {
                    // åˆ›å»ºæç¤ºå…ƒç´ 
                    const alertDiv = document.createElement('div');
                    alertDiv.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(0, 0, 0, 0.8);
                        color: white;
                        padding: 15px 25px;
                        border-radius: 8px;
                        z-index: 10000;
                        font-size: 14px;
                        text-align: center;
                    `;
                    alertDiv.textContent = message;
                    // æ·»åŠ åˆ°é¡µé¢
                    document.body.appendChild(alertDiv);
                    // 3ç§’åè‡ªåŠ¨ç§»é™¤
                    setTimeout(() => {
                        if (alertDiv.parentNode) {
                            alertDiv.parentNode.removeChild(alertDiv);
                        }
                    }, 3000);
                },

                // åˆ‡æ¢æœˆå¡æ¿€æ´»çŠ¶æ€
                toggleMonthlyCard() {
                    this.monthlyCardActive = !this.monthlyCardActive;
                },

                // è®¡ç®—å€’è®¡æ—¶æ˜¾ç¤ºå¤©æ•°
                calculateDisplayDays(timeType) {
                    let targetDate;
                    if (timeType === 'nextVersion') {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.nextVersion.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.nextVersion;
                    } else {
                        targetDate = this.calculateToPoolEnd ? 
                            new Date(this.poolDates.newYear.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000)) :
                            this.poolDates.newYear;
                    }
                    
                    const today = new Date();
                    const diffTime = targetDate - today;
                    const days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    return Math.max(0, days); // ç¡®ä¿ä¸ä¼šæ˜¾ç¤ºè´Ÿæ•°
                },

                // é€‰æ‹©é«˜çº§ç›‘å¯Ÿå¯†ä»¤æœŸæ•°
                selectRechargeInspectionPeriod(periodId) {
                    this.selectedRechargeInspectionPeriod = periodId;
                },

                // ç‹„æ–¯ç›ˆæ»¡é’µæ»‘å—å¸é™„åˆ°æŒ‡å®šæŒ¡ä½
                snapDisiLevel() {
                    const levels = [0, 5, 10, 15, 20, 25, 30, 35, 40, 42, 44, 46, 48, 50];
                    let closestLevel = levels[0];
                    let minDiff = Math.abs(this.disiLevel - levels[0]);
                    
                    for (let i = 1; i < levels.length; i++) {
                        const diff = Math.abs(this.disiLevel - levels[i]);
                        if (diff < minDiff) {
                            minDiff = diff;
                            closestLevel = levels[i];
                        }
                    }
                    // åªæœ‰å½“å½“å‰å€¼ä¸ç­‰äºæœ€æ¥è¿‘çš„æŒ¡ä½æ—¶æ‰æ›´æ–°
                    if (this.disiLevel !== closestLevel) {
                        this.disiLevel = closestLevel;
                    }
                },

                // åˆ‡æ¢ç‹„æ–¯ç›ˆæ»¡é’µæ¿€æ´»çŠ¶æ€
                toggleDisi() {
                    this.disiActive = !this.disiActive;
                    // å¦‚æœå…³é—­æŒ‰é’®ï¼Œé‡ç½®æ»‘å—åˆ°0çº§
                    if (!this.disiActive) {
                        this.disiLevel = 0;
                        this.disiPrePurchased = false;
                    }
                },

                // åˆ‡æ¢è¯¡ç‘çå®é¦†æ¿€æ´»çŠ¶æ€
                toggleTreasure() {
                    this.treasureActive = !this.treasureActive;
                    // å¦‚æœå…³é—­æŒ‰é’®ï¼Œå…³é—­é¢„è´­ä¹°
                    if (!this.treasureActive) {
                        this.treasurePrePurchased = false;
                    }
                },                

                // åˆ‡æ¢ç‰¹æƒ æ—¶å°šå·¡å›åº†å…¸æ¿€æ´»çŠ¶æ€
                toggleSpecialFashionTour() {
                    this.specialFashionTour.active = !this.specialFashionTour.active;
                    if (!this.specialFashionTour.active) {
                        // å¦‚æœå…³é—­æŒ‰é’®ï¼Œé‡ç½®æ‰€æœ‰ç›¸å…³çŠ¶æ€
                        this.specialFashionTour.completed = false;
                        this.specialFashionTour.usedDiscounts = 0;
                        this.specialFashionTour.prePurchased = false;
                        this.specialFashionTour.maxDiscounts = 0;
                    } else {
                        // å¦‚æœæ‰“å¼€æŒ‰é’®ï¼Œè®¾ç½®é»˜è®¤ä¼˜æƒ æ¬¡æ•°ä¸º4
                        this.specialFashionTour.maxDiscounts = 4;
                    }
                },

                // === æ–°å¢ï¼šæ™¶æºç‰¹ä¾›ï¼ˆé¦–å……ï¼‰æ–¹æ³• ===
                // åˆ‡æ¢æ™¶æºç‰¹ä¾›æŒ‰é’®è´­ä¹°çŠ¶æ€
                toggleCrystalSupplyButton(index) {
                this.crystalSupplyButtons[index].purchased = !this.crystalSupplyButtons[index].purchased;
                },

                // === æ–°å¢ï¼šæ™¶æºç‰¹ä¾›ï¼ˆéé¦–å……ï¼‰è¾“å…¥æ¡†æ–¹æ³• ===
                // è¾“å…¥éªŒè¯
                validateNonFirstCrystalSupplyInput(index) {
                    // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œä¿æŒä¸ºç©ºï¼Œä¸è¿›è¡ŒéªŒè¯
                    if (this.nonFirstCrystalSupplyButtons[index].count === '' || this.nonFirstCrystalSupplyButtons[index].count === null) {
                        return;
                    }
                    
                    // ç¡®ä¿å€¼ä¸ºæ•´æ•°ä¸”éè´Ÿæ•°
                    if (this.nonFirstCrystalSupplyButtons[index].count < 0) {
                        this.nonFirstCrystalSupplyButtons[index].count = 0;
                    }
                    if (this.nonFirstCrystalSupplyButtons[index].count !== null && this.nonFirstCrystalSupplyButtons[index].count !== undefined) {
                        this.nonFirstCrystalSupplyButtons[index].count = Math.floor(this.nonFirstCrystalSupplyButtons[index].count);
                    }
                    
                    // ç¡®ä¿é¥¼çŠ¶å›¾æ›´æ–°
                    this.$nextTick(() => {
                        if (this.sections.pullSummary) {
                            this.updatePieChart();
                        }
                    });
                },

                // === å¸¸é©»ç¤¼åŒ…æ–¹æ³• ===
                // åˆ‡æ¢å¸¸é©»ç¤¼åŒ…æ¿€æ´»çŠ¶æ€
                togglePermanentPackage() {
                    this.permanentPackage.active = !this.permanentPackage.active;
                },

                // === æ¯å‘¨è¿½è¸ªç¤¼åŒ…æ–¹æ³• ===
                // è¾“å…¥éªŒè¯
                validateWeeklyTrackingPackageInput() {
                    // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œä¿æŒä¸ºç©ºï¼Œä¸è¿›è¡ŒéªŒè¯
                    if (this.weeklyTrackingPackage.count === '' || this.weeklyTrackingPackage.count === null) {
                        return;
                    }
                    
                    // ç¡®ä¿å€¼ä¸ºæ•´æ•°ä¸”éè´Ÿæ•°ï¼Œä¸”ä¸è¶…è¿‡æœ€å¤§å‘¨æ•°
                    if (this.weeklyTrackingPackage.count < 0) {
                        this.weeklyTrackingPackage.count = 0;
                    }
                    if (this.weeklyTrackingPackage.count > this.weeklyTrackingPackageMaxCount) {
                        this.weeklyTrackingPackage.count = this.weeklyTrackingPackageMaxCount;
                    }
                    if (this.weeklyTrackingPackage.count !== null && this.weeklyTrackingPackage.count !== undefined) {
                        this.weeklyTrackingPackage.count = Math.floor(this.weeklyTrackingPackage.count);
                    }
                    
                    // ç¡®ä¿é¥¼çŠ¶å›¾æ›´æ–°
                    this.$nextTick(() => {
                        if (this.sections.pullSummary) {
                            this.updatePieChart();
                        }
                    });
                },

                // === æœˆåº¦è¿½è¸ªç¤¼åŒ…æ–¹æ³• ===
                // éªŒè¯æœˆåº¦è¿½è¸ªç¤¼åŒ…â… è¾“å…¥
                validateMonthlyTrackingPackage1Input() {
                    this.validateMonthlyTrackingPackageInput('monthlyTrackingPackage1');
                },

                // éªŒè¯æœˆåº¦è¿½è¸ªç¤¼åŒ…â…¡è¾“å…¥
                validateMonthlyTrackingPackage2Input() {
                    this.validateMonthlyTrackingPackageInput('monthlyTrackingPackage2');
                },

                // é€šç”¨çš„æœˆåº¦è¿½è¸ªç¤¼åŒ…è¾“å…¥éªŒè¯
                validateMonthlyTrackingPackageInput(packageName) {
                    // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œä¿æŒä¸ºç©ºï¼Œä¸è¿›è¡ŒéªŒè¯
                    if (this[packageName].count === '' || this[packageName].count === null) {
                        return;
                    }
                    
                    // ç¡®ä¿å€¼ä¸ºæ•´æ•°ä¸”éè´Ÿæ•°ï¼Œä¸”ä¸è¶…è¿‡æœ€å¤§æœˆæ•°
                    if (this[packageName].count < 0) {
                        this[packageName].count = 0;
                    }
                    if (this[packageName].count > this.monthlyTrackingPackageMaxCount) {
                        this[packageName].count = this.monthlyTrackingPackageMaxCount;
                    }
                    if (this[packageName].count !== null && this[packageName].count !== undefined) {
                        this[packageName].count = Math.floor(this[packageName].count);
                    }
                    
                    // ç¡®ä¿é¥¼çŠ¶å›¾æ›´æ–°
                    this.$nextTick(() => {
                        if (this.sections.pullSummary) {
                            this.updatePieChart();
                        }
                    });
                },

                // === å±€é•¿å°±ä»»ç‰¹ä¾›æ–¹æ³• ===
                // åˆ‡æ¢å±€é•¿å°±ä»»ç‰¹ä¾›æ¿€æ´»çŠ¶æ€
                toggleDirectorSupplyPackage(index) {
                    if (this.directorSupplyPackageEnabled[index]) {
                        const newState = !this.directorSupplyPackages[index].active;
                        this.directorSupplyPackages[index].active = newState;
                        
                        // å¦‚æœå–æ¶ˆè´­ä¹°æŸä¸ªç¤¼åŒ…ï¼Œè‡ªåŠ¨å…³é—­å®ƒåé¢çš„æ‰€æœ‰ç¤¼åŒ…
                        if (!newState) {
                            for (let i = index + 1; i < this.directorSupplyPackages.length; i++) {
                                this.directorSupplyPackages[i].active = false;
                            }
                        }
                    }
                },

                // è·å–ç½—é©¬æ•°å­—
                getRomanNumeral(num) {
                    const romanNumerals = ['', 'â… ', 'â…¡', 'â…¢', 'â…£', 'â…¤', 'â…¥'];
                    return romanNumerals[num] || num;
                },

                // === é™æ—¶ç¤¼åŒ…æ–¹æ³• ===
                // éªŒè¯é™æ—¶ç¤¼åŒ…è¾“å…¥éªŒè¯
                validateLimitedPackageInput(packageName) {
                    // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œä¿æŒä¸ºç©ºï¼Œä¸è¿›è¡ŒéªŒè¯
                    if (this[packageName].count === '' || this[packageName].count === null) {
                        return;
                    }
                    
                    // ç¡®ä¿å€¼ä¸ºæ•´æ•°ä¸”åœ¨0-2ä¹‹é—´
                    if (this[packageName].count < 0) {
                        this[packageName].count = 0;
                    }
                    if (this[packageName].count > 2) {
                        this[packageName].count = 2;
                    }
                    if (this[packageName].count !== null && this[packageName].count !== undefined) {
                        this[packageName].count = Math.floor(this[packageName].count);
                    }
                    
                    // ç¡®ä¿é¥¼çŠ¶å›¾æ›´æ–°
                    this.$nextTick(() => {
                        if (this.sections.pullSummary) {
                            this.updatePieChart();
                        }
                    });
                },

                // ä¿®å¤ç‰ˆçš„ç»Ÿä¸€é™æ—¶ç¤¼åŒ…åˆ‡æ¢æ–¹æ³•
                toggleLimitedPackage(packageName) {
                    console.log('ç‚¹å‡»äº†:', packageName);
                    
                    // ç»°å½±å¤œè¯ç³»åˆ—ï¼šäº’æ–¥é€‰æ‹©ï¼Œå¯å–æ¶ˆ
                    if (packageName.includes('Shadow')) {
                        console.log('å¤„ç†ç»°å½±å¤œè¯ç³»åˆ—');
                        
                        // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰å·²æ¿€æ´»çš„æŒ‰é’®ï¼Œåˆ™å–æ¶ˆæ¿€æ´»
                        if (this[packageName].active) {
                            this[packageName].active = false;
                        } else {
                            // å¦åˆ™é‡ç½®æ‰€æœ‰ç»°å½±å¤œè¯æŒ‰é’®å¹¶æ¿€æ´»å½“å‰
                            this.limitedPackageShadow1.active = false;
                            this.limitedPackageShadow2.active = false;
                            this.limitedPackageShadow3.active = false;
                            this[packageName].active = true;
                        }
                    } 
                    // ç™½é¸½å·¡ç¤¼ç³»åˆ—ï¼šäº’æ–¥é€‰æ‹©ï¼Œå¯å–æ¶ˆ
                    else if (packageName.includes('Dove')) {
                        console.log('å¤„ç†ç™½é¸½å·¡ç¤¼ç³»åˆ—:', packageName);
                        
                        // æŸ¥æ‰¾å¯¹åº”çš„ç™½é¸½å·¡ç¤¼ç¤¼åŒ…
                        const dovePackage = this.dovePackages.find(item => item.id === packageName);
                        if (dovePackage) {
                            console.log('æ‰¾åˆ°ç™½é¸½å·¡ç¤¼ç¤¼åŒ…ï¼Œå½“å‰çŠ¶æ€:', dovePackage.active);
                            
                            // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰å·²æ¿€æ´»çš„æŒ‰é’®ï¼Œåˆ™å–æ¶ˆæ¿€æ´»
                            if (dovePackage.active) {
                                dovePackage.active = false;
                            } else {
                                // å¦åˆ™é‡ç½®æ‰€æœ‰ç™½é¸½å·¡ç¤¼æŒ‰é’®å¹¶æ¿€æ´»å½“å‰
                                this.dovePackages.forEach(item => {
                                    item.active = false;
                                });
                                dovePackage.active = true;
                            }
                            
                            console.log('åˆ‡æ¢åçŠ¶æ€:', dovePackage.active);
                        } else {
                            console.error('æœªæ‰¾åˆ°ç™½é¸½å·¡ç¤¼ç¤¼åŒ…:', packageName);
                        }
                    }
                    // è¯¡äº‹æ–­ç« ï¼šæ­£å¸¸åˆ‡æ¢
                    else if (packageName === 'limitedPackageMystery') {
                        console.log('å¤„ç†è¯¡äº‹æ–­ç« ');
                        this[packageName].active = !this[packageName].active;
                    }
                    // è’æ—…èµ„æºè¡¥ç»™ï¼šæ­£å¸¸åˆ‡æ¢
                    else if (packageName === 'limitedPackageTravelSupply') {
                        console.log('å¤„ç†è’æ—…èµ„æºè¡¥ç»™');
                        this[packageName].active = !this[packageName].active;
                    }
                    // å•ä¸ªç¤¼åŒ…ï¼ˆä½œä¸ºç‹¬ç«‹dataå±æ€§å­˜åœ¨çš„ï¼‰
                    else if (this[packageName]) {
                        console.log('å¤„ç†å•ä¸ªç¤¼åŒ…:', packageName);
                        this[packageName].active = !this[packageName].active;
                    }
                    // æ•°ç»„ä¸­çš„ç¤¼åŒ…ï¼ˆsinglePackages, supplyPackages, upgradePackagesï¼‰
                    else {
                        console.log('åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ç¤¼åŒ…:', packageName);
                        const allPackages = [
                            ...this.singlePackages,
                            ...this.supplyPackages,
                            ...this.upgradePackages
                        ];
                        
                        const selectedPackage = allPackages.find(item => item.id === packageName);
                        if (selectedPackage) {
                            console.log('åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç¤¼åŒ…ï¼Œåˆ‡æ¢çŠ¶æ€');
                            selectedPackage.active = !selectedPackage.active;
                        } else {
                            console.error('âŒ ç¤¼åŒ…ä¸å­˜åœ¨:', packageName);
                        }
                    }
                    
                    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    this.saveToLocalStorage();
                },

                // åˆ‡æ¢ç›Ÿçº¦åºç« ç¤¼åŒ…çŠ¶æ€
                toggleCovenantPackage(packageId, index) {
                    console.log('åˆ‡æ¢ç›Ÿçº¦åºç« :', packageId, index);
                    
                    // ç›Ÿçº¦åºç« â…¥æœ‰è¾“å…¥æ¡†ï¼Œä¸éœ€è¦ç‚¹å‡»åˆ‡æ¢
                    if (packageId === 'limitedPackageCovenant6') {
                        return;
                    }
                    
                    // å¯¹äºç›Ÿçº¦åºç« â… -â…¤ï¼Œåˆ‡æ¢countå€¼ï¼ˆ0æˆ–1ï¼‰
                    const currentPackage = this.covenantPackages[index];
                    if (currentPackage) {
                        currentPackage.count = currentPackage.count === 0 ? 1 : 0;
                    }
                },

                // ç™½é¸½å·¡ç¤¼ç³»åˆ—äº’æ–¥é€‰æ‹©æ–¹æ³•ï¼ˆæ›´æ–°ç‰ˆï¼‰
                toggleDovePackage(packageId) {
                    // å…ˆé‡ç½®æ‰€æœ‰ç™½é¸½å·¡ç¤¼æŒ‰é’®
                    this.dovePackages.forEach(item => {
                        item.active = false;
                    });
                    
                    // æ¿€æ´»å½“å‰é€‰æ‹©çš„æŒ‰é’®
                    const selectedPackage = this.dovePackages.find(item => item.id === packageId);
                    if (selectedPackage && !selectedPackage.active) {
                        selectedPackage.active = true;
                    }
                },
                
                // ç»„åˆè´­ä¹°åˆ‡æ¢æ–¹æ³•
                toggleComboPackage() {
                    this.limitedPackageCombo.active = !this.limitedPackageCombo.active;
                    
                    // å¦‚æœæ¿€æ´»ç»„åˆè´­ä¹°ï¼Œè‡ªåŠ¨å…³é—­ä¸‰ä¸ªç‰¹ä¾›ç¤¼åŒ…
                    if (this.limitedPackageCombo.active) {
                        this.supplyPackages.forEach(item => {
                            item.active = false;
                        });
                    }
                },
                
                // ç›Ÿçº¦åºç« è¾“å…¥éªŒè¯
                validateCovenantInput(packageId) {
                    this.$nextTick(() => {
                        const packageItem = this.covenantPackages.find(item => item.id === packageId);
                        if (packageItem) {
                            if (packageItem.count < 0) {
                                packageItem.count = 0;
                            }
                            if (packageItem.count > packageItem.maxCount) {
                                packageItem.count = packageItem.maxCount;
                            }
                            if (packageItem.count !== null && packageItem.count !== undefined) {
                                packageItem.count = Math.floor(packageItem.count);
                            }
                        }
                    });
                },

            },
            mounted() {
                this.preloadCriticalImages();

                // åˆå§‹åŒ–é¥¼çŠ¶å›¾
                this.updatePieChart();
                
                // åˆå§‹åŒ–æ´¾é£å£°æœ›å¼‚æ–¹æ™¶è®¡ç®—
                this.calculateDispatchCrystal();

                // åˆå§‹åŒ–ä¸»é¢˜
                this.applyTheme();

                // ç¡®ä¿å¼¹çª—ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤º
                this.$nextTick(() => {
                    this.showModal = false;
                    this.currentModal = null;
                });

                // ç²¾ç®€ç‰ˆç›‘å¬ - åªç›‘å¬æ ¸å¿ƒæ€»è®¡æ•°æ®
                this.$watch(() => [
                    this.totalModulePulls,           // æ€»æŠ½æ•°
                    this.totalAllCrystal,            // æ€»å¼‚æ–¹æ™¶
                    this.totalAllPremiumCrystal,     // æ€»ç’€ç’¨æ™¶æº
                    this.totalAllTickets,            // æ€»æœç´¢ä»¤
                    this.totalAllLimitedCoupons,     // æ€»é™å®šåˆ¸
                    this.totalRechargeCost,          // æ€»æ°ªé‡‘é‡‘é¢
                ], () => {
                    // åªæœ‰åœ¨é¥¼çŠ¶å›¾æ¨¡å—å±•å¼€æ—¶æ‰æ›´æ–°å›¾è¡¨
                    if (this.sections.pullSummary) {
                        this.updatePieChart();
                    }
                });

                // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°ç»˜åˆ¶é¥¼çŠ¶å›¾
                window.addEventListener('resize', this.handleResize);

                // ä»æœ¬åœ°å­˜å‚¨æ¢å¤æ–°ç¤¼åŒ…æ•°æ®
                try {
                    const saved = localStorage.getItem('gachaCalculatorData');
                    if (saved) {
                        const savedData = JSON.parse(saved);
                        
                        // æ¢å¤ç›Ÿçº¦åºç« ç³»åˆ—æ•°æ®
                        if (savedData.covenantPackages) {
                            this.covenantPackages = savedData.covenantPackages;
                        }
                        
                        // æ¢å¤ç™½é¸½å·¡ç¤¼ç³»åˆ—æ•°æ®
                        if (savedData.dovePackages) {
                            this.dovePackages = savedData.dovePackages;
                        }
                        
                        // æ¢å¤å•ä¸ªç¤¼åŒ…æ•°æ®
                        if (savedData.singlePackages) {
                            this.singlePackages = savedData.singlePackages;
                        }
                        
                        // æ¢å¤ç‰¹ä¾›ç³»åˆ—æ•°æ®
                        if (savedData.supplyPackages) {
                            this.supplyPackages = savedData.supplyPackages;
                        }
                        
                        // æ¢å¤è·ƒå‡è¡¥ç»™ç³»åˆ—æ•°æ®
                        if (savedData.upgradePackages) {
                            this.upgradePackages = savedData.upgradePackages;
                        }
                        
                        // æ¢å¤ç»„åˆè´­ä¹°æ•°æ®
                        if (savedData.limitedPackageCombo) {
                            this.limitedPackageCombo = savedData.limitedPackageCombo;
                        }
                    }
                } catch (e) {
                    console.error('æ¢å¤é™æ—¶ç¤¼åŒ…æ•°æ®å¤±è´¥:', e);
                }
            },            
        })

        // æ·»åŠ é”™è¯¯å¤„ç†
        try {
            app.mount('#app');
        } catch (error) {
            console.error('é¡µé¢åŠ è½½å¤±è´¥:', error);
            // æ˜¾ç¤ºç®€å•é”™è¯¯ä¿¡æ¯
            document.getElementById('app').innerHTML = `
                <div style="padding: 20px; text-align: center;">
                    <h2>âš ï¸ é¡µé¢åŠ è½½é‡åˆ°é—®é¢˜</h2>
                    <p>è¯·å°è¯•ï¼š</p>
                    <button onclick="localStorage.removeItem('gachaCalculatorData'); location.reload();" 
                            style="padding: 10px; margin: 5px; background: #1890ff; color: white; border: none; border-radius: 5px;">
                        æ¸…é™¤æ•°æ®å¹¶åˆ·æ–°
                    </button>
                    <button onclick="location.reload()" 
                            style="padding: 10px; margin: 5px; background: #ccc; border: none; border-radius: 5px;">
                        ç›´æ¥åˆ·æ–°
                    </button>
                </div>
            `;
        }

    </script>
</body>
</html>